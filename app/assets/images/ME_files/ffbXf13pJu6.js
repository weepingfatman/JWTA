if (self.CavalryLogger) { CavalryLogger.start_js(["DAyre"]); }

__d("AdsCanvasCapabilities",[],(function a(b,c,d,e,f,g){f.exports={CAN_ADD_CULTURAL_MOMENT_COMPONENTS:"CAN_ADD_CULTURAL_MOMENT_COMPONENTS",CAN_ADD_OFFER:"CAN_ADD_OFFER",CAN_ADD_PRODUCT_SET:"CAN_ADD_PRODUCT_SET",CAN_ADD_STORE_LOCATOR:"CAN_ADD_STORE_LOCATOR",CAN_SAVE_INCOMPLETE_ELEMENTS:"CAN_SAVE_INCOMPLETE_ELEMENTS",CAN_USE_CANVAS_EDITOR_TEMPLATEV0:"CAN_USE_CANVAS_EDITOR_TEMPLATEV0",CAN_USE_CANVAS_EDITOR_TEMPLATEV1:"CAN_USE_CANVAS_EDITOR_TEMPLATEV1",CAN_USE_LIGHT_WEIGHT_EDITING:"CAN_USE_LIGHT_WEIGHT_EDITING",CAN_USE_LINKED_CANVAS:"CAN_USE_LINKED_CANVAS",CAN_USE_WEBISTE_PARSING:"CAN_USE_WEBISTE_PARSING",CAN_USE_PREVIEW_TAB:"CAN_USE_PREVIEW_TAB",CAN_CREATE_INSTAGRAM_CANVAS:"CAN_CREATE_INSTAGRAM_CANVAS"};}),null);
__d("AdsCanvasWebdriverIDs",[],(function a(b,c,d,e,f,g){f.exports={ADD_COMPONENT_DIALOG_BUTTON_COMPONENT:"add-component-dialog-button",ADD_COMPONENT_DIALOG_CANCEL:"add-component-dialog-cancel",ADD_COMPONENT_DIALOG_CAROUSEL_COMPONENT:"add-component-dialog-carousel",ADD_COMPONENT_DIALOG_CM_HEADER_COMPONENT:"add-component-dialog-cm-header",ADD_COMPONENT_DIALOG_CM_IMAGE_COMPONENT:"add-component-dialog-cm-image",ADD_COMPONENT_DIALOG_CM_POPULAR_MEDIA_COMPONENT:"add-component-dialog-cm-popular-media",ADD_COMPONENT_DIALOG_CM_TITLE_COMPONENT:"add-component-dialog-cm-title",ADD_COMPONENT_DIALOG_CONFIRM:"add-component-dialog-confirm",ADD_COMPONENT_DIALOG_DD_FB_TIPS_COMPONENT:"add-component-dialog-fb-tips",ADD_COMPONENT_DIALOG_HEADER_COMPONENT:"add-component-dialog-header",ADD_COMPONENT_DIALOG_OFFER_COMPONENT:"add-component-dialog-offer",ADD_COMPONENT_DIALOG_PHOTO_COMPONENT:"add-component-dialog-photo",ADD_COMPONENT_DIALOG_PRODUCT_SET_COMPONENT:"add-component-dialog-product-set",ADD_COMPONENT_DIALOG_SCRUBBABLE_GIF_COMPONENT:"add-component-dialog-scrubbable-gif",ADD_COMPONENT_DIALOG_STORE_LOCATOR_COMPONENT:"add-component-dialog-store-locator",ADD_COMPONENT_DIALOG_TEXT_COMPONENT:"add-component-dialog-text",ADD_COMPONENT_DIALOG_VIDEO_COMPONENT:"add-component-dialog-video",ADS_CANVAS_BUILDER:"ads-canvas-builder",ADS_CANVAS_BUILDER_COMPONENT_SELECTOR:"ads-canvas-builder-component-selector",ADS_CANVAS_BUILDER_CANVAS_EDITOR:"ads-canvas-builder-element-editor",ADS_CANVAS_BUILDER_PREVIEW:"ads-canvas-builder-preview",ADS_CANVAS_BUILDER_TOOLBAR:"ads-canvas-builder-toolbar",ADS_CANVAS_BUILDER_WELCOME_PANE:"ads-canvas-builder-welcome-pane",ADS_CANVAS_TYPEAHEAD:"ads-canvas-typeahead",ADS_CANVAS_TYPEAHEAD_CREATE_BUTTON:"ads-canvas-typeahead-create-button",ADS_CANVAS_TYPEAHEAD_PREVIEW_BUTTON:"ads-canvas-typeahead-preview-button",ADS_CANVAS_TYPEAHEAD_INPUT:"ads-canvas-typeahead-input",CANVAS_EDITOR_BUTTON_COMPONENT:"canvas-editor-button-component",CANVAS_EDITOR_CAROUSEL_COMPONENT:"canvas-editor-carousel-component",CANVAS_EDITOR_DOCUMENT_NAME_FIELD:"canvas-editor-document-name-field",CANVAS_EDITOR_HEADER_COMPONENT:"canvas-editor-header-component",CANVAS_EDITOR_PHOTO_COMPONENT:"canvas-editor-photo-component",CANVAS_EDITOR_TEXT_COMPONENT:"canvas-editor-text-component",CANVAS_EDITOR_VIDEO_COMPONENT:"canvas-editor-video-component",CANVAS_EDITOR_TITLE_AND_DATE_COMPONENT:"canvas-editor-title-and-date-component",CANVAS_EDITOR_CM_HEADER_COMPONENT:"canvas-editor-cm-header-component",CANVAS_EDITOR_CM_POPULAR_MEDIA_COMPONENT:"canvas-editor-cm-popular-media-component",CANVAS_EDITOR_DD_SVG_COMPONENT:"canvas-editor-dd-svg-component",CAROUSEL_COMPONENT_ADD_NEW_ITEM_BUTTON:"carousel-component-add-new-item-button",CAROUSEL_COMPONENT_ITEM:"carousel-component-item",CAROUSEL_COMPONENT_ITEM_SELECT_BAR:"carousel-component-item-select-bar",DESTINATION_FIELD:"destination-field",DESTINATION_INPUT_FIELD:"destination-input-field",DESTINATION_TYPE_FIELD:"destination-type-field",PAGE_COMPOSER_SHARE_CANVAS_LINK:"page-composer-share-canvas-link",PAGE_PUBLISH_TOOLS_CREATE_BUTTON:"ppt-create-button",PAGE_PUBLISH_TOOLS_VIEW_BUTTON:"ppt-view-button",PHOTO_UPLOADER_PREVIEW:"photo-uploader-preview",PHOTO_UPLOADER_PROGRESS_BAR:"photo-uploader-progress-bar",PHOTO_UPLOADER_UPLOAD_BUTTON:"photo-uploader-upload-button",START_DATE_TIME_PICKER:"start-date-time-picker",END_DATE_TIME_PICKER:"end-date-time-picker",TITLE_TEXT_EDITOR:"title-text-editor",GEN_PREVIEW_CM_POPULAR_MEDIA:"gen-preview-cm-popular-media",CM_POPULAR_MEDIA_INPUT:"cm-popular-media-input",PREVIEW_BUTTON_COMPONENT:"preview-button-component",PREVIEW_CAROUSEL_COMPONENT:"preview-carousel-component",PREVIEW_CAROUSEL_IMAGE:"preview-carousel-image",PREVIEW_HEADER_IMAGE:"preview-header-image",PREVIEW_HEADER_COMPONENT:"preview-header-component",PREVIEW_PHOTO_IMAGE:"preview-photo-image",PREVIEW_PHOTO_COMPONENT:"preview-photo-component",PREVIEW_TEXT_COMPONENT:"preview-text-component",PREVIEW_VIDEO_THUMBNAIL:"preview-video-thumbnail",PREVIEW_VIDEO_COMPONENT:"preview-video-component",PREVIEW_TITLE_AND_DATE_TITLE:"preview-title-and-date-title",PREVIEW_TITLE_AND_DATE_DATE:"preview-title-and-date-date",PREVIEW_TITLE_AND_DATE_MONTH:"preview-title-and-date-month",PREVIEW_TITLE_AND_DATE_COMPONENT:"preview-title-and-date-component",PREVIEW_LOCAL_IMAGE_COMPONENT:"preview-local-image-component",PREVIEW_CM_HEADER_COMPONENT:"preview-cm-header-component",PREVIEW_CM_POPULAR_MEDIA_COMPONENT:"preview-cm-popular-media-component",PUBLISH_DIALOG:"publish-dialog",PUBLISH_DIALOG_CANCEL:"publish-dialog-cancel",PUBLISH_DIALOG_CONFIRM:"publish-dialog-confirm",TOOLBAR_ADD_COMPONENT_BUTTON:"toolbar-add-component-button",TOOLBAR_LOADING_INDICATOR:"toolbar-loading-indicator",TOOLBAR_PUBLISH_BUTTON:"toolbar-publish-button",TOOLBAR_SAVE_BUTTON:"toolbar-save-button",VIDEO_COMPONENT_THUMBNAIL:"video-component-thumbnail",VIDEO_COMPONENT_PROGRESS_BAR:"video-component-progress-bar",VIDEO_COMPONENT_UPLOAD_BUTTON:"video-component-upload-button",WELCOME_PANE_OPEN_BLANK_CANVAS_BUTTON:"welcome-pane-open-blank-canvas-button",TEXT_EDITOR:"text-component-editor",CHECKBOX:"checkbox"};}),null);
__d("BOFSellerLoggingSources",[],(function a(b,c,d,e,f,g){f.exports={ADD_SECTION:"AddSection",FINISH_SETUP_BANNER:"FinishSetupBanner",PAGE_COMPOSER:"PageComposer",PRODUCT_TAGGING_TYPEAHEAD:"ProductTaggingTypeahead",PUBLISHING_TOOLS:"PublishingTools",QP:"QP",SHOP_TAB:"ShopTab",STRIPE_REDIRECT:"StripeRedirect",GRAPH_API:"GraphApi",DEV_TEST:"DevTest",SHOP_EDIT:"ShopEdit",PAGE_CARD:"PageCard"};}),null);
__d("CanvasCreationEvent",[],(function a(b,c,d,e,f,g){f.exports={ADD_ELEMENT:"editor.add_element",ADD_ELEMENT_TOP_TOOLBAR_BUTTON:"editor.add_element_top_toolbar",ADD_ELEMENT_BOTTOM_TOOLBAR_BUTTON:"editor.add_element_bottom_toolbar",BACK_TO_MENU:"editor.back_to_menu",CREATE:"create",DUPLICATE:"duplicate",EDITOR_EXIT:"editor.editor_exit",EDITOR_LINE_HEIGHT_TOUCH:"editor.editor_line_height_touch",EDITOR_PADDING_TOUCH:"editor.editor_padding_touch",EDITOR_PHOTO_ASPECT_RATIO_WARNING:"editor.editor_photo_aspect_ratio_warning",EDITOR_PHOTO_UPLOAD_TIMEOUT:"editor.editor_photo_upload_timeout",GETTING_STARTED_GUIDE:"welcome_screen.getting_started_guide",LOAD:"load",LOAD_TEMPLATE:"editor.load_template",PHOTO_UPLOAD_ERROR:"editor.photo_upload_error",PHOTO_UPLOAD_SUCCESS:"editor.photo_upload_success",PREVIEW_FAILURE:"editor.preview_failure",PREVIEW_SUCCESS:"editor.preview_success",PUBLISH:"publish",PUBLISH_FAILURE:"editor.publish_failure",REORDER_COMPONENT:"editor.reorder_component",TEMPLATE_FETCH_FAILED:"editor.template_fetch_failed",TEMPLATE_DOWNLOADED:"editor.template_downloaded",TEMPLATE_SELECTED:"editor.template_selected",TOOLBAR_PUBLISH_CLICKED:"editor.toolbar_publish_clicked",VIDEO_ENCODE_SUCCESS:"editor.video_encode_success",VIDEO_ENCODE_ERROR:"editor.video_encode_error",VIDEO_POST_SUCCESS:"editor.video_post_success",VIDEO_POST_ERROR:"editor.video_post_error",VIDEO_UPLOAD_SUCCESS:"editor.video_upload_success",VIDEO_UPLOAD_ERROR:"editor.video_upload_error",SAVE:"save",SAVE_INCOMPLETE_ELEMENTS:"save_incomplete_elements",SAVE_FAILURE:"editor.save_failure",SHARE_PREVIEW:"editor.share_preview",SWIPE_TO_OPEN_TOGGLED:"editor.swipe_to_open_toggled",VALIDATION_ERROR:"editor.validation_error",WELCOMESCREEN_ADD_COMPONENT:"welcome_screen.addcomponents",WELCOMESCREEN_BLANKCANVAS:"welcome_screen.blankcanvas",WELCOMESCREEN_EXAMPLES:"welcome_screen.examples",WELCOMESCREEN_TEMPLATE:"welcome_screen.template",WELCOMESCREEN_TIPS:"welcome_screen.tips",WELCOMESCREEN_TOUR:"welcome_screen.tour"};}),null);
__d("CanvasProperty",[],(function a(b,c,d,e,f,g){f.exports={AUTO_CONVERT_PHOTO:"auto_convert_photo",COLLECTION:"collection",TUTORIAL:"tutorial",TEMPLATE:"template",WEBSITE_PARSING:"website_parsing"};}),null);
__d("CommerceB2CUnsupportedCurrencies",[],(function a(b,c,d,e,f,g){f.exports={CNY:"CNY",CUC:"CUC",IRR:"IRR",KPW:"KPW",SDG:"SDG",SYP:"SYP"};}),null);
__d("CommerceInventoryAvailabilityOptions",[],(function a(b,c,d,e,f,g){f.exports={INVENTORY_IN_STOCK:100,INVENTORY_OUT_OF_STOCK:0};}),null);
__d("CommerceProductVariantType",[],(function a(b,c,d,e,f,g){f.exports={SIZE:"Size",COLOR:"Color",MATERIAL:"Material",LENGTH:"Length",FIT:"Fit",WIDTH:"Width",SCENT:"Scent",FLAVOR:"Flavor",MODEL:"Model",FORMAT:"Format",PLATFORM:"Platform",EDITION:"Edition"};}),null);
__d("CommerceSelfServeProductTaxCategories",[],(function a(b,c,d,e,f,g){f.exports={NONE:0,TAX_ITEM_CODE_COMMERCE_SPORT_RECREATION_BAD:4900000,TAX_ITEM_CODE_COMMERCE_SPORT_RECREATION:4.9e+07,TAX_ITEM_CODE_COMMERCE_CLOTHING:53100000,TAX_ITEM_CODE_COMMERCE_SHOES:53110000,TAX_ITEM_CODE_COMMERCE_LUGGAGE_BAGS:53120000,TAX_ITME_CODE_COMMERCE_PERSONAL_CARE:53130000,TAX_ITEM_CODE_COMMERCE_JEWELRY:54100000,TAX_ITEM_CODE_COMMERCE_WATCHES:54111500,TAX_ITEM_CODE_COMMERCE_OTHERS:-1};}),null);
__d("CommerceSelfServeSection",[],(function a(b,c,d,e,f,g){f.exports={CHECKOUT_URL:"checkout_url",COMMERCE_INSIGHTS:"commerce_insights",FEATURED_PRODUCT_TOGGLE:"featured_product_toggle",INVENTORY:"inventory",IN_STOCK_TOGGLE:"in_stock_toggle",PRODUCT_VISIBILITY:"product_visibility",SHIPPING_OPTIONS:"shipping_options",TAX_CATEGORY:"tax_category",TAX_TABLE:"tax_table",VARIANTS:"variants",MINIMUM_PRICE_ERROR:"minimum_price_error",SALE_PRICE:"sale_price",CATEGORY:"category"};}),null);
__d("CommerceSelfServeUI",[],(function a(b,c,d,e,f,g){f.exports={MIN_SHIPPING_OPTIONS:1,MAX_SHIPPING_OPTIONS:5};}),null);
__d("InstantShoppingDocumentElementType",[],(function a(b,c,d,e,f,g){f.exports={RICH_TEXT:1,PHOTO:2,BUTTON:3,SLIDESHOW:4,DIVIDER:5,EXPANDABLE_SECTION:6,STATEFUL:7,VIDEO:8,COLOR_SELECTOR:9,TOGGLE_BUTTON:10,HEADER:11,COMPOSITE_BLOCK:12,FOOTER:13,ELEMENT_GROUP:14,TITLE_AND_DATE:15,STORE_LOCATOR:16,SCRUBBABLE_GIF:17,LOCAL_IMAGE:18,OFFER:19,WEBVIEW:20,CULTURAL_MOMENT_POPULAR_MEDIA:900,DAILY_DIALOGUE_FB_TIPS:901};}),null);
__d("MessagingRelatedLinkType",[],(function a(b,c,d,e,f,g){f.exports={MME_LINK:"mme_link",LINE_LINK:"line_link",TELEGRAM_LINK:"telegram_link",WECHAT_LINK:"wechat_link",WHATSAPP_LINK:"whatsapp_link"};}),null);
__d("PagesComposerCarouselPostNuxType",[],(function a(b,c,d,e,f,g){f.exports={MEDIA_ATTACHEMENT_URL_INPUT_AREA_NUX:"media_attachment_url_input_area_nux"};}),null);
__d("PagesManagerProductToolsConstants",[],(function a(b,c,d,e,f,g){f.exports={MAX_FEATURED_ITEM_COUNT:10};}),null);
__d("PaymentsTypeEnum",[],(function a(b,c,d,e,f,g){f.exports={BOF:"BOF",NMOR:"NMOR"};}),null);
__d("ProductVisibility",[],(function a(b,c,d,e,f,g){f.exports={LEGACY_PUBLIC:"",STAGING:"staging",PUBLISHED:"published"};}),null);
__d("PUWUploaders",[],(function a(b,c,d,e,f,g){f.exports={HTML5:"html5",FLASH:"flash"};}),null);
__d("RichMediaStoreLocatorElementTheme",[],(function a(b,c,d,e,f,g){f.exports={LIGHT:"Light",DARK:"Dark",CUSTOM:"Custom"};}),null);
__d("XCommerceSelfServeParam",[],(function a(b,c,d,e,f,g){f.exports={EXPLANATION:"explanation",PAGE_ID:"page_id",AMOUNT:"amount",ADDRESS:"address",STREET_1:"street1",CITY:"city",STATE:"region",ZIP:"postalCode",ACCEPTED_TOS:"accepted_tos",ALERT_EMAIL:"alert_email",COLLECTION_NAME:"collection_name",CONTACT_EMAIL:"contact_email",SECONDARY_CTA:"secondary_product_cta",PAYMENT_PROVIDER:"payment_provider",PAYPAL_MERCHANT_EMAIL:"paypal_merchant_email",RETURN_POLICY_TIME:"return_policy_time",SETTINGS_ID:"settings_id",SHIPPING_POLICY_TIME:"shipping_policy_time",STRIPE_DEFERRED_EMAIL:"stripe_deferred_email",TAX_NEXUS_LOCATIONS:"tax_nexus_locations",VISIBILITY:"visibility",CHECKOUT_URL:"checkout_url",COLLECTION_ID:"collection_id",CURRENCY_CODE:"currency_code",DEFAULT_SHIPPING_OPTIONS_JSON:"default_shipping_options_json",FEATURED_PRODUCT:"featured_product",INVENTORY:"inventory",IS_ON_SALE:"is_on_sale",PRODUCT_CATALOG_ID:"catalog_id",PRODUCT_DESCRIPTION:"product_desc",PRODUCT_ID:"product_id",PRODUCT_PHOTO_IDS:"photo_ids",PRODUCT_VIDEO_IDS:"video_ids",PRODUCT_PRICE:"product_price",PRODUCT_SALE_PRICE:"product_sale_price",PRODUCT_TITLE:"product_title",SHARE_TO_TIMELINE:"share_to_timeline",SHIPPING_OPTION_NAMES:"shipping_option_names",SHIPPING_OPTION_VALUES:"shipping_option_values",TAX_APPLIED_TO_SHIPPING_MAP:"tax_applied_to_shipping_map",TAX_CATEGORY:"tax_category",TAX_LOCATIONS:"tax_locations",TAX_PERCENT_MAP:"tax_percent_map",VARIANT_NAMES:"variant_names",VARIANT_INVENTORY:"variant_inventory_map",VARIANT_PRICE:"variant_price_map",VARIANT_SALE_PRICE:"variant_sale_price_map",VARIANT_DATA:"variant_serial_data_map",VARIANT_PRODUCT_ID:"variant_product_id_map"};}),null);
__d('AdsCanvasEditorEnums',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h={SAVED:0,SAVING:1,UNSAVED:2},i=c('keyMirror')({NONE:null,WARNING:null,ERROR:null}),j=c('keyMirror')({WEBSITE:null,NATIVE:null,CANVAS:null}),k=c('keyMirror')({FACEBOOK:null,MOBILE_SITE:null,INSTAGRAM:null});f.exports={ErrorTypeEnum:i,SaveStateEnum:h,LinkDestinationEnum:j,PreviewEnum:k};}),null);
__d('CanvasCreationWaterfallTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:CanvasCreationWaterfallLoggerConfig',this.$CanvasCreationWaterfallTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:CanvasCreationWaterfallLoggerConfig',this.$CanvasCreationWaterfallTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$CanvasCreationWaterfallTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$CanvasCreationWaterfallTypedLogger1=babelHelpers['extends']({},this.$CanvasCreationWaterfallTypedLogger1,j);return this;};h.prototype.setCanvasID=function(j){this.$CanvasCreationWaterfallTypedLogger1.canvas_id=j;return this;};h.prototype.setCanvasLoadType=function(j){this.$CanvasCreationWaterfallTypedLogger1.canvas_load_type=j;return this;};h.prototype.setCanvasName=function(j){this.$CanvasCreationWaterfallTypedLogger1.canvas_name=j;return this;};h.prototype.setCanvasTags=function(j){this.$CanvasCreationWaterfallTypedLogger1.canvas_tags=c('GeneratedLoggerUtils').serializeVector(j);return this;};h.prototype.setDuplicateParentCanvasID=function(j){this.$CanvasCreationWaterfallTypedLogger1.duplicate_parent_canvas_id=j;return this;};h.prototype.setEditorLineHeight=function(j){this.$CanvasCreationWaterfallTypedLogger1.editor_line_height=j;return this;};h.prototype.setEditorPaddingBottom=function(j){this.$CanvasCreationWaterfallTypedLogger1.editor_padding_bottom=j;return this;};h.prototype.setEditorPaddingTop=function(j){this.$CanvasCreationWaterfallTypedLogger1.editor_padding_top=j;return this;};h.prototype.setEditorPhotoHeight=function(j){this.$CanvasCreationWaterfallTypedLogger1.editor_photo_height=j;return this;};h.prototype.setEditorPhotoWidth=function(j){this.$CanvasCreationWaterfallTypedLogger1.editor_photo_width=j;return this;};h.prototype.setEditorURL=function(j){this.$CanvasCreationWaterfallTypedLogger1.editor_url=j;return this;};h.prototype.setElementPayload=function(j){this.$CanvasCreationWaterfallTypedLogger1.element_payload=j;return this;};h.prototype.setElementType=function(j){this.$CanvasCreationWaterfallTypedLogger1.element_type=j;return this;};h.prototype.setErrorCode=function(j){this.$CanvasCreationWaterfallTypedLogger1.error_code=j;return this;};h.prototype.setEventDetails=function(j){this.$CanvasCreationWaterfallTypedLogger1.event_details=j;return this;};h.prototype.setEventName=function(j){this.$CanvasCreationWaterfallTypedLogger1.event_name=j;return this;};h.prototype.setHelpPageEventName=function(j){this.$CanvasCreationWaterfallTypedLogger1.help_page_event_name=j;return this;};h.prototype.setIncompleteElements=function(j){this.$CanvasCreationWaterfallTypedLogger1.incomplete_elements=j;return this;};h.prototype.setIsNewUser=function(j){this.$CanvasCreationWaterfallTypedLogger1.is_new_user=j;return this;};h.prototype.setPageCanvasCount=function(j){this.$CanvasCreationWaterfallTypedLogger1.page_canvas_count=j;return this;};h.prototype.setPageID=function(j){this.$CanvasCreationWaterfallTypedLogger1.page_id=j;return this;};h.prototype.setPageName=function(j){this.$CanvasCreationWaterfallTypedLogger1.page_name=j;return this;};h.prototype.setPagePublishedCanvasCount=function(j){this.$CanvasCreationWaterfallTypedLogger1.page_published_canvas_count=j;return this;};h.prototype.setPublishedURL=function(j){this.$CanvasCreationWaterfallTypedLogger1.published_url=j;return this;};h.prototype.setReorderComponentDistance=function(j){this.$CanvasCreationWaterfallTypedLogger1.reorder_component_distance=j;return this;};h.prototype.setSource=function(j){this.$CanvasCreationWaterfallTypedLogger1.source=j;return this;};h.prototype.setVC=function(j){this.$CanvasCreationWaterfallTypedLogger1.vc=j;return this;};h.prototype.setVideoID=function(j){this.$CanvasCreationWaterfallTypedLogger1.video_id=j;return this;};h.prototype.setViewerID=function(j){this.$CanvasCreationWaterfallTypedLogger1.viewer_id=j;return this;};var i={canvas_id:true,canvas_load_type:true,canvas_name:true,canvas_tags:true,duplicate_parent_canvas_id:true,editor_line_height:true,editor_padding_bottom:true,editor_padding_top:true,editor_photo_height:true,editor_photo_width:true,editor_url:true,element_payload:true,element_type:true,error_code:true,event_details:true,event_name:true,help_page_event_name:true,incomplete_elements:true,is_new_user:true,page_canvas_count:true,page_id:true,page_name:true,page_published_canvas_count:true,published_url:true,reorder_component_distance:true,source:true,vc:true,video_id:true,viewer_id:true};f.exports=h;}),null);
__d('RichMediaEditorActionTypes',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){'use strict';f.exports=c('keyMirrorRecursive')({ADD_DOCUMENT_ELEMENT:true,ADD_ELEMENTS_SELECTED:true,ADD_FILES_TO_DOCUMENT_ELEMENT:true,BACK_TO_MENU:true,CANVAS_TEMPLATE_SELECTED:false,COLLAPSE_EXPANDED_ELEMENTS:false,CREATE_DEFAULT_DOCUMENT:true,CREATE_DOCUMENT_FROM_MEDIA:true,DELETE_ELEMENT:true,DESELECT_ELEMENT_TO_ADD:true,EDIT_DOCUMENT_ELEMENT:true,FETCH_TEMPLATES:null,LOAD_BLANK_CANVAS:false,LOAD_CANVAS_TEMPLATE:false,LOAD_DOCUMENT:true,MOVE_ELEMENT_DOWN:true,MOVE_ELEMENT_UP:true,PAGE_LOAD_ERROR:true,PAGE_LOADED:true,REPLACE_FILE_IN_DOCUMENT:true,RESET_UNPUBLISHED_CANVAS:true,SAVE_INCOMPLETE_ELEMENTS:false,SELECT_ELEMENT_TO_ADD:true,SET_ADD_COMPONENT_DIALOG_SHOWN:true,SET_CANVAS_PAGEID:null,SET_CANVAS_SOURCE:null,SET_CUSTOMIZE_THEME_COLOR:true,SET_DIALOG_CANVAS:true,SET_DIALOG_SHOWN:true,SET_DOCUMENT_EDIT_STATE:true,SET_DOCUMENT_NAME:true,SET_DOCUMENT_THEME:true,SET_DOCUMENT_URL_DIALOG_SHOWN:true,SET_FORCE_EDIT_PUBLISHED:true,SET_NONEMPTY_ELEMENT_NAME:true,SET_PREVIEW_FAILED:true,SET_PREVIEW_TYPE:true,SET_SAVE_FAILED:true,SET_SELECTED_CANVAS:true,SET_SENDING_PREVIEW:true,SET_SHOW_TEMPLATES:false,SET_SWIPE_TO_OPEN_ENABLED:true,SET_SUPPORT_INSTAGRAM_ENABLED:false,SET_UNPUBLISHED_CANVAS:true,SET_USE_CUSTOMIZE_THEME_COLOR:true,SET_VALIDATION_FAILED:false,TEMPLATE_FETCHED:null,TOGGLE_DOCUMENT_DEBUG_PANE_SHOWN:true,TOGGLE_WELCOME_PANE_SHOWN:false,TOOLBAR_PUBLISH_CLICK:false,TRIGGER_NUX_TOUR:false,LOAD_PAGE_DATA_SUCCESS:false,LOAD_PAGE_DATA_ERROR:false},'RichMediaEditor');}),null);
__d("XCanvasAdsUtilsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ads\/canvas\/pageconfig\/",{page_id:{type:"String",required:true}});}),null);
__d('RichMediaEditorDataLoader',['AsyncRequest','AsyncResponse','XCanvasAdsUtilsController'],(function a(b,c,d,e,f,g){'use strict';var h={getCanvasPageData:function i(j){var k=c('XCanvasAdsUtilsController').getURIBuilder().setString('page_id',j).getURI();return new (c('AsyncRequest'))().setURI(k).exec();}};f.exports=h;}),null);
__d('RichMediaEditorDataDispatcher',['CanvasCreationWaterfallTypedLogger','RichMediaEditorDataLoader','RichMediaEditorActionTypes','AdsDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h={getCanvasPageData:function i(j,k,l){c('RichMediaEditorDataLoader').getCanvasPageData(j).then(function(m){var n=m.getPayload(),o=n.page_canvas_count,p=n.page_published_canvas_count;c('AdsDispatcher').handleUpdateFromViewAction({funnelLogger:l,logger:k,pageCanvasCount:o,pagePublishedCanvasCount:p,type:c('RichMediaEditorActionTypes').LOAD_PAGE_DATA_SUCCESS});})['catch'](function(m){c('AdsDispatcher').handleUpdateFromViewAction({funnelLogger:l,logger:k,type:c('RichMediaEditorActionTypes').LOAD_PAGE_DATA_ERROR});}).done();}};f.exports=h;}),null);
__d('AdsCanvasDailyDialogueSVGElement',['immutable','InstantShoppingDocumentElementType'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record,k={id:'',name:'',type:c('InstantShoppingDocumentElementType').DAILY_DIALOGUE_FB_TIPS,index:0,expanded:false,advancedExpanded:false,CMSIDs:[],width:0,height:0,frameNumber:1,previewFetchedTime:0,backgroundColor:'',SVGSource:'',permalinks:null},l=j(k);h=babelHelpers.inherits(m,l);i=h&&h.prototype;m.create=function(n,o,p,q,r,s,t,u,v,w,x){return new m({index:n,name:o,type:c('InstantShoppingDocumentElementType').DAILY_DIALOGUE_FB_TIPS,expanded:p,advancedExpanded:q,CMSIDs:r,width:s,height:t,frameNumber:u,backgroundColor:v,SVGSource:w,permalinks:x});};m.createDefault=function(n){return m.create(n,'SVG',true,false,[],0,0,1,'','',null);};m.createFromObject=function(n){return m.create(n.index,n.name,n.expanded,n.advancedExpanded,n.CMSIDs,n.width,n.height,n.frameNumber,n.backgroundColor,n.SVGSource,n.permalinks);};m.validate=function(n){if(n.CMSIDs==null||n.CMSIDs.length===0||n.frameNumber===0||n.height===0||n.width===0)return {isValid:false,errorMsg:'SVG should be set up'};return {isValid:true,errorMsg:''};};function m(){h.apply(this,arguments);}f.exports=m;}),null);
__d('RichMediaEditorConstants',[],(function a(b,c,d,e,f,g){'use strict';f.exports={EDITOR_HEIGHT:666,EDITOR_ELEMENT_ID_PREFIX:'editor_element',EDITOR_ELEMENT_CONTAINER_ID:'editor_element_container',EDITOR_FONT_FAMILIIES:['sans-serif','serif','HelveticaNeue-Regular','HelveticaNeue-Light','HelveticaNeue-Medium','HelveticaNeue-UltraLight','HelveticaNeue-CondensedBold','Georgia'],EDITOR_LINE_HEIGHT:['0.8','1.0','1.1','1.2','1.3','1.4','1.5','1.6','1.7','1.8','1.9','2.0'],EDITOR_DEFAULT_LINE_HEIGHT:'1.2',EDITOR_PADDING:['0','4','8','12','16','20','24','28','32','48','96','192'],EDITOR_DEFAULT_PADDING:'0',EDITOR_DEFAULT_TEXT_BUTTON_PADDING_VERTICAL:'48',EDITOR_DEFAULT_TEXT_BUTTON_PADDING_HORIZONTAL:'20',EDITOR_PADDING_PREVIEW_SCALE:1.2,MAX_LENGTH_SCRUBBABLE_GIF_SEC:30,MIN_LENGTH_SCRUBBABLE_GIF_SEC:1};}),null);
__d('RichMediaEditorUtil',['ads-lib-urllib'],(function a(b,c,d,e,f,g){'use strict';var h={isValidURL:function i(j){return c('ads-lib-urllib').isUrl(j);},normalizeURL:function i(j){return c('ads-lib-urllib').normalize(j);},isValidDeeplink:function i(j){return true;}};f.exports=h;}),null);
__d('RichMediaElementValidationUtil',['AdsCanvasEditorEnums'],(function a(b,c,d,e,f,g){'use strict';var h=c('AdsCanvasEditorEnums').LinkDestinationEnum,i={validateForAppstoreDestination:function j(k,l){if(l)for(var m=0;m<l.length;m++){var n=l[m];if(n===k)break;if(n.destination===h.NATIVE&&n.link&&k.destination===h.NATIVE&&k.link&&n.link!==k.link)return {isValid:false,errorMsg:'App store URLs should be same'};}return {isValid:true,errorMsg:''};}};f.exports=i;}),null);
__d('RichMediaRichFormatText',['ContentState','immutable','decodeBlocks','encodeBlocks','RichMediaEditorConstants'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record,k=c('RichMediaEditorConstants').EDITOR_FONT_FAMILIIES,l=c('RichMediaEditorConstants').EDITOR_LINE_HEIGHT,m=c('RichMediaEditorConstants').EDITOR_DEFAULT_LINE_HEIGHT,n={id:'',composedText:{entityMap:{},blocks:[]},textAlignment:'center',textColor:'#000',fontSize:15,fontFamily:k[0],lineHeight:m},o=j(n);h=babelHelpers.inherits(p,o);i=h&&h.prototype;p.create=function(q,r,s,t,u,v){return new p({composedText:c('encodeBlocks')(q),textAlignment:r,textColor:s,fontSize:t,fontFamily:u,lineHeight:v});};p.createDefault=function(){return p.create(c('ContentState').createFromText(''),'center','#777',15,k[0],m);};p.createFromObject=function(q){var r=q.fontFamily;if(k.indexOf(r)===-1)r=k[0];var s=q.lineHeight;if(l.indexOf(s)===-1)s=m;return new p({composedText:q.composedText,textAlignment:q.textAlignment,textColor:q.textColor,fontSize:q.fontSize,fontFamily:r,lineHeight:s});};p.createFromAdAsset=function(q){return p.create(c('ContentState').createFromText(q),'center','#000',15,k[0],m);};p.getPlainTextFromComposedText=function(q){var r=c('decodeBlocks')(q.blocks,q.entityMap);return r.getPlainText();};function p(){h.apply(this,arguments);}f.exports=p;}),null);
__d('validateDeepLink',['AppAdsConfig','URIRFC3986','arrayContains','trim'],(function a(b,c,d,e,f,g){'use strict';var h=c('AppAdsConfig').deepLinkBlacklist.map(function(j){return new RegExp(c('trim')(j,'/'));});function i(j){j=j.toLowerCase();var k=j.indexOf('://');if(k===-1)return false;var l=j.slice(0,k);if(l&&l.includes('.')){if(!/^[a-z0-9][a-z0-9+-.]*$/.test(l))return false;}else{var m=c('URIRFC3986').parse(j);if(m==null||!m.scheme||!/^([a-z][a-z0-9+-.]*):/i.test(j))return false;}if(c('arrayContains')(['http','https'],l))return true;var n=h.some(function(o){return o.test(j);});return !n;}f.exports=i;}),null);
__d('RichMediaButtonElement',['fbt','immutable','InstantShoppingDocumentElementType','RichMediaEditorUtil','RichMediaElementValidationUtil','RichMediaRichFormatText','RichMediaEditorConstants','AdsCanvasEditorEnums','validateDeepLink'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('RichMediaEditorConstants').EDITOR_DEFAULT_TEXT_BUTTON_PADDING_VERTICAL,l=c('RichMediaEditorConstants').EDITOR_DEFAULT_TEXT_BUTTON_PADDING_HORIZONTAL,m=c('AdsCanvasEditorEnums').LinkDestinationEnum,n=c('immutable').Record,o=40,p={id:'',name:'',type:c('InstantShoppingDocumentElementType').BUTTON,index:0,expanded:false,advancedExpanded:false,padding:{paddingTop:k,paddingBottom:k,paddingLeft:l,paddingRight:l},backgroundColor:'#FFFFFF',buttonColor:'#000',isFilled:false,isFixedToBottom:false,link:'',deeplink:null,linkedCanvasName:null,destination:m.WEBSITE,richFormatText:c('RichMediaRichFormatText').createDefault()},q=n(p);i=babelHelpers.inherits(r,q);j=i&&i.prototype;r.create=function(s,t,u,v,w,x,y,z,aa,ba,ca,da,ea){return new r({index:s,name:t,type:c('InstantShoppingDocumentElementType').BUTTON,expanded:u,advancedExpanded:v,padding:w,buttonColor:x,isFilled:y,isFixedToBottom:z,link:aa,deeplink:ba,linkedCanvasName:ca,destination:da,richFormatText:ea});};r.createDefault=function(s){return r.create(s,h._("Button").toString(),true,false,{paddingTop:k,paddingBottom:k,paddingLeft:l,paddingRight:l},'#000',false,false,'',null,null,m.WEBSITE,c('RichMediaRichFormatText').createDefault());};r.createFromObject=function(s){return r.create(s.index,s.name,s.expanded,s.advancedExpanded,{paddingTop:s.padding&&s.padding.paddingTop?s.padding.paddingTop:k,paddingBottom:s.padding&&s.padding.paddingBottom?s.padding.paddingBottom:k,paddingLeft:s.padding&&s.padding.paddingLeft?s.padding.paddingLeft:l,paddingRight:s.padding&&s.padding.paddingRight?s.padding.paddingRight:l},s.buttonColor,s.isFilled,s.isFixedToBottom,s.link,s.deeplink,s.linkedCanvasName,s.destination,c('RichMediaRichFormatText').createFromObject(s.richFormatText));};r.createFromAdAsset=function(s,t,u){return r.create(s,'Button',true,false,{paddingTop:k,paddingBottom:k,paddingLeft:l,paddingRight:l},'#000',false,t,'',null,null,m.WEBSITE,c('RichMediaRichFormatText').createFromAdAsset(u));};r.validate=function(s,t){if(!s.link)return {isValid:false,errorMsg:h._("Empty Link URL")};if(!c('RichMediaEditorUtil').isValidURL(s.link))if(s.destination===m.NATIVE){return {isValid:false,errorMsg:h._("Invalid Store URL")};}else return {isValid:false,errorMsg:h._("Invalid Website URL")};var u=c('RichMediaElementValidationUtil').validateForAppstoreDestination(s,t);if(!u.isValid)return u;if(s.deeplink)if(!c('validateDeepLink')(s.deeplink))return {isValid:false,errorMsg:h._("Invalid Deeplink")};var v=c('RichMediaRichFormatText').getPlainTextFromComposedText(s.richFormatText.composedText);if(v.length>o)return {isValid:false,errorMsg:h._("Button text too long")};return {isValid:true,errorMsg:''};};function r(){i.apply(this,arguments);}f.exports=r;}),null);
__d('RichMediaCarouselItem',['fbt','immutable','RichMediaEditorUtil','RichMediaElementValidationUtil','AsyncUploadRequest','AdsCanvasEditorEnums','getByPath','validateDeepLink'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('AdsCanvasEditorEnums').LinkDestinationEnum,l=c('immutable').Record,m={id:'',index:0,photo:null,name:'',description:null,link:null,deeplink:null,linkedCanvasName:null,destination:k.WEBSITE,uploadStatus:null,uploadRequest:null},n=l(m);i=babelHelpers.inherits(o,n);j=i&&i.prototype;o.create=function(p,q,r,s,t,u,v,w,x,y,z){return new o({id:p,index:q,photo:r,name:s,description:t,link:u,deeplink:v,linkedCanvasName:w,destination:x,uploadStatus:y,uploadRequest:z});};o.createDefault=function(p,q,r){return o.create(p,q,null,'',null,null,null,null,k.WEBSITE,null,r);};o.createFromObject=function(p){return o.create(p.id||p.name+'_'+Date.now(),p.index,p.photo,p.name,p.description,p.link,p.deeplink,p.linkedCanvasName,p.destination,null,p.uploadRequest);};o.createFromPayloadAndElementField=function(p,q){if(q)p.photo.src=c('getByPath')(q,['element','photo','source']);return o.create(p.id||p.name+'_'+Date.now(),p.index,p.photo,p.name,p.description,p.link,p.deeplink,p.linkedCanvasName,p.destination,null,p.uploadRequest);};o.validate=function(p,q){if(!p.photo)return {isValid:false,errorMsg:h._("Missing photo")};if(p.link&&!c('RichMediaEditorUtil').isValidURL(p.link))if(p.destination===k.NATIVE){return {isValid:false,errorMsg:h._("Invalid Store URL")};}else return {isValid:false,errorMsg:h._("Invalid Website URL")};var r=c('RichMediaElementValidationUtil').validateForAppstoreDestination(p,q);if(!r.isValid)return r;if(p.deeplink)if(!c('validateDeepLink')(p.deeplink))return {isValid:false,errorMsg:h._("Invalid Deeplink")};if(p.uploadStatus&&p.uploadStatus.isUploading!==false)return {isValid:false,errorMsg:''};return {isValid:true,errorMsg:''};};function o(){i.apply(this,arguments);}f.exports=o;}),null);
__d('RichMediaElement',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record;h=babelHelpers.inherits(k,j({id:'',index:-1,name:'',type:-1,expanded:false,advancedExpanded:false}));i=h&&h.prototype;function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('RichMediaCarouselElement',['fbt','immutable','InstantShoppingDocumentElementType','RichMediaCarouselItem','AsyncResponse','AsyncUploadRequest','RichMediaElement','RichMediaEditorConstants','getByPath'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('RichMediaEditorConstants').EDITOR_DEFAULT_PADDING,l=c('immutable').Record,m={id:'',name:'',type:c('InstantShoppingDocumentElementType').SLIDESHOW,index:0,expanded:false,advancedExpanded:false,padding:{paddingTop:k,paddingBottom:k},layout:'fit_to_width',items:[],selectedItemIndex:0,addFile:function p(){return null;},onFileProgress:function p(){return o.createDefault(0);},onFileSuccess:function p(){return o.createDefault(0);},onFileError:function p(){return o.createDefault(0);}},n=l(m);i=babelHelpers.inherits(o,n);j=i&&i.prototype;o.create=function(p,q,r,s,t,u,v,w){return new o({index:p,name:q,type:c('InstantShoppingDocumentElementType').SLIDESHOW,expanded:r,advancedExpanded:s,padding:t,layout:u,items:v,selectedItemIndex:w});};o.createDefault=function(p){return o.create(p,h._("Carousel").toString(),true,false,{paddingTop:k,paddingBottom:k},'fit_to_width',[0,1].map(function(q){return c('RichMediaCarouselItem').createDefault(q+'_'+Math.round(Math.random()*10000)+'_'+Date.now(),q,null);}),0);};o.createFromObject=function(p,q){var r=[],s=0;p.items.forEach(function(u){if(u){var v=c('RichMediaCarouselItem').createFromObject(u);r.push(v.set('index',s));s++;}});var t=p.selectedItemIndex||p.selectedItemIndex===0?p.selectedItemIndex:0;t=Math.min(Math.max(0,t),r.length-1);return o.create(p.index,p.name,p.expanded,p.advancedExpanded,p.padding,q?'fit_to_width':p.layout,r,t);};o.createFromPayloadAndElementField=function(p,q){var r=[],s=c('getByPath')(q,['element','child_elements','length'],0);for(var t=0;t<p.items.length;t++){var u=p.items[t],v=t<s&&q.element&&q.element.child_elements?q.element.child_elements[t]:null;if(u){var w=c('RichMediaCarouselItem').createFromPayloadAndElementField(u,v);r.push(w.set('index',t));}}var x=p.selectedItemIndex||p.selectedItemIndex===0?p.selectedItemIndex:0;x=Math.min(Math.max(0,x),r.length-1);return o.create(p.index,p.name,p.expanded,p.advancedExpanded,p.padding,p.layout,r,x);};o.validate=function(p,q){if(p.items.length<=1)return {isValid:false,errorMsg:h._("Upload at least 2 images to create a carousel").toString()};for(var r=0;r<p.items.length;++r){var s=p.items[r],t=c('RichMediaCarouselItem').validate(s,q);if(!t.isValid)return {isValid:false,errorMsg:h._({"*":"Item {carousel_item_number}"},[h.param('carousel_item_number',r+1,[0])]).toString()+t.errorMsg};}return {isValid:true,errorMsg:''};};o.equals=function(p,q){if(p.padding&&(p.padding.paddingTop!==q.padding.paddingTop||p.padding.paddingBottom!==q.padding.paddingBottom)||p.layout!==q.layout||p.selectedItemIndex!==q.selectedItemIndex||p.items.length!==q.items.length||p.items.some(function(r,s){if(!r.photo||!q.items[s].photo)return true;return r.photo.src!==q.items[s].photo.src;}))return false;return true;};o.prototype.addFile=function(p,q){this.items.push(c('RichMediaCarouselItem').createDefault(p,this.items.length,q));return this;};o.prototype.reorderItem=function(p,q){var r=this.items[p];this.items.splice(p,1);this.items.splice(q,0,r);return this;};o.prototype.replaceFile=function(p,q){var r=this.items.findIndex(function(s){return s.id===p;});if(r<0)return this;this.items[r]=this.items[r].set('uploadStatus',{isUploading:true,percentage:0});return this;};o.prototype.onFileProgress=function(p,q){var r=this.items.findIndex(function(s){return s.id===p;});this.items[r]=this.items[r].set('uploadStatus',{isUploading:true,percentage:q});return this;};o.prototype.onFileSuccess=function(p,q){var r=this.items.findIndex(function(s){return s.id===p;});this.items[r]=this.items[r].set('uploadStatus',{isUploading:false}).set('photo',q.payload.photo);return this;};o.prototype.onFileError=function(p){var q=this.items.findIndex(function(r){return r.id===p;});this.items[q]=this.items[q].set('uploadStatus',{isUploading:false});return this;};function o(){i.apply(this,arguments);}f.exports=o;}),null);
__d('CanvasColorUtils',['Assert','colr'],(function a(b,c,d,e,f,g){'use strict';function h(k){var l=Math.floor(k*255/100).toString(16);if(l.length===1)l='0'+l;return l;}function i(k){c('Assert').isTrue(k.length<=2,'invalid hex string: '+k);return Math.ceil(parseInt(k,16)/255*100);}function j(k){return c('colr').fromHex(k).toGrayscale()/255;}f.exports={convertColorWithOpacityToARGB:function k(l){var m=l.color;c('Assert').isTrue(6===m.length,'unexpected length string: '+m);var n=h(l.opacity)+m;c('Assert').isTrue(n.length===8,'generated invalid argb: '+n);return n;},convertARGBToColorWithOpacity:function k(l){c('Assert').isTrue(l.length===8,'Got argb: '+l);return {color:l.slice(2),opacity:i(l.slice(0,2))};},convertRGBtoCSSColorWithOpacity:function k(l,m){c('Assert').isTrue(6===l.length,'unexpected length string: '+l);return 'rgba('+parseInt(l.slice(0,2),16)+','+parseInt(l.slice(2,4),16)+','+parseInt(l.slice(4,6),16)+','+m+')';},luminosityOfColor:j,colorContrastingWith:function k(l){return j(l)>.5?'#000':'#FFF';}};}),null);
__d('RichMediaHeaderElement',['fbt','CanvasColorUtils','immutable','InstantShoppingDocumentElementType','RichMediaEditorConstants','getByPath'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('RichMediaEditorConstants').EDITOR_DEFAULT_PADDING,l=c('immutable').Record,m={id:'',name:'',type:c('InstantShoppingDocumentElementType').HEADER,index:0,expanded:false,advancedExpanded:false,padding:{paddingTop:k,paddingBottom:k},fixToTop:true,photo:null,backgroundColor:null,isCulturalMomentHeader:null,uploadStatus:null},n=l(m);i=babelHelpers.inherits(o,n);j=i&&i.prototype;o.create=function(p,q,r,s,t,u,v,w,x){return new o({name:p,type:c('InstantShoppingDocumentElementType').HEADER,expanded:r,advancedExpanded:s,padding:t,index:q,fixToTop:true,photo:u,backgroundColor:v,isCulturalMomentHeader:w,uploadStatus:x});};o.createDefault=function(p){return o.create(h._("Header").toString(),p,true,false,{paddingTop:k,paddingBottom:k},null,'FFFFFFFF',null,null);};o.createFromObject=function(p){return o.create(p.name,p.index,p.expanded,p.advancedExpanded,p.padding,p.photo,p.backgroundColor,p.isCulturalMomentHeader);};o.createFromPayloadAndElementField=function(p,q){if(p.photo)p.photo.src=c('getByPath')(q,['element','child_elements','0','element','photo','source']);return o.create(p.name,p.index,p.expanded,p.advancedExpanded,p.padding,p.photo,p.backgroundColor,p.isCulturalMomentHeader);};o.validate=function(p){if(!p.photo)return {isValid:false,errorMsg:h._("Missing photo")};if(!p.backgroundColor)return {isValid:false,errorMsg:h._("Missing background color")};if(p.uploadStatus&&p.uploadStatus.isUploading!==false)return {isValid:false,errorMsg:''};return {isValid:true,errorMsg:''};};o.prototype.isOpaque=function(){if(!this.backgroundColor)return true;var p=c('CanvasColorUtils').convertARGBToColorWithOpacity(this.backgroundColor);if(p.opacity===100)return true;return false;};function o(){i.apply(this,arguments);}f.exports=o;}),null);
__d('RichMediaCulturalMomentHeaderElement',['InstantShoppingDocumentElementType','RichMediaEditorConstants','RichMediaHeaderElement'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('RichMediaEditorConstants').EDITOR_DEFAULT_PADDING;h=babelHelpers.inherits(k,c('RichMediaHeaderElement'));i=h&&h.prototype;k.create=function(l,m,n,o,p,q,r,s,t){return new k({name:l,type:c('InstantShoppingDocumentElementType').HEADER,expanded:n,advancedExpanded:o,padding:p,index:m,fixToTop:true,photo:q,backgroundColor:r,isCulturalMomentHeader:s,uploadStatus:t});};k.createDefault=function(l){return k.create('Header',l,true,false,{paddingTop:j,paddingBottom:j},null,'FF000000',true,null);};k.createFromObject=function(l){return k.create(l.name,l.index,l.expanded,l.advancedExpanded,l.padding,l.photo,l.backgroundColor,l.isCulturalMomentHeader);};k.createFromPayloadAndElementField=function(l,m){return k.create(l.name,l.index,l.expanded,l.advancedExpanded,l.padding,l.photo,l.backgroundColor,l.isCulturalMomentHeader);};k.validate=function(l){if(!l.backgroundColor)return {isValid:false,errorMsg:'Missing background color'};return {isValid:true,errorMsg:''};};function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('RichMediaCultureMomentPopularMediaElement',['immutable','InstantShoppingDocumentElementType'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record,k={id:'',name:'',type:c('InstantShoppingDocumentElementType').CULTURAL_MOMENT_POPULAR_MEDIA,index:0,previewOnly:true,expanded:false,advancedExpanded:false,keyword:'',previewPhotos:null,previewFetchedTime:0,handPickedPhotos:['','','','',''],useKeywordSearch:false,title:'',actionTitle:'',uriForSeeAll:'',permalinks:null},l=j(k);h=babelHelpers.inherits(m,l);i=h&&h.prototype;m.create=function(n,o,p,q,r,s,t,u,v,w,x,y,z){return new m({index:n,name:o,type:c('InstantShoppingDocumentElementType').CULTURAL_MOMENT_POPULAR_MEDIA,previewOnly:p,expanded:q,advancedExpanded:r,keyword:s,previewPhotos:t,handPickedPhotos:u,useKeywordSearch:v,title:w,actionTitle:x,uriForSeeAll:y,permalinks:z});};m.createDefault=function(n){return m.create(n,'Culture Moment Popular Media Image',true,true,false,'',null,['','','','',''],false,'','','',null);};m.createFromObject=function(n){return m.create(n.index,n.name,n.previewOnly,n.expanded,n.advancedExpanded,n.keyword,n.previewPhotos,n.handPickedPhotos,n.useKeywordSearch,n.title,n.actionTitle,n.uriForSeeAll,n.permalinks);};m.validate=function(n){if(n.keyword==null||n.keyword.length===0)return {isValid:false,errorMsg:'Keyword should be set up'};return {isValid:true,errorMsg:''};};function m(){h.apply(this,arguments);}f.exports=m;}),null);
__d('RichMediaEditorActions',['Map','RichMediaEditorActionTypes','AdsDispatcher'],(function a(b,c,d,e,f,g){'use strict';f.exports={collapseExpandedElements:function h(){c('AdsDispatcher').handleUpdateFromViewAction({type:c('RichMediaEditorActionTypes').COLLAPSE_EXPANDED_ELEMENTS});},setDocumentName:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({name:i,type:c('RichMediaEditorActionTypes').SET_DOCUMENT_NAME});},setNonEmptyElementName:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({element:i,type:c('RichMediaEditorActionTypes').SET_NONEMPTY_ELEMENT_NAME});},setDocumentTheme:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({theme:i,type:c('RichMediaEditorActionTypes').SET_DOCUMENT_THEME});},setDocumentEditState:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({editState:i,type:c('RichMediaEditorActionTypes').SET_DOCUMENT_EDIT_STATE});},addDocumentElement:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({element:i,type:c('RichMediaEditorActionTypes').ADD_DOCUMENT_ELEMENT});},addFilesToDocumentElement:function h(i,j,k){c('AdsDispatcher').handleUpdateFromViewAction({element:i,pageID:j,files:k,type:c('RichMediaEditorActionTypes').ADD_FILES_TO_DOCUMENT_ELEMENT});},replaceFileInDocumentElement:function h(i,j,k,l){c('AdsDispatcher').handleUpdateFromViewAction({element:i,pageID:j,itemID:k,files:l,type:c('RichMediaEditorActionTypes').REPLACE_FILE_IN_DOCUMENT});},editDocumentElement:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({element:i,type:c('RichMediaEditorActionTypes').EDIT_DOCUMENT_ELEMENT});},moveElementUp:function h(i){var j=arguments.length<=1||arguments[1]===undefined?1:arguments[1];c('AdsDispatcher').handleUpdateFromViewAction({element:i,distance:j,type:c('RichMediaEditorActionTypes').MOVE_ELEMENT_UP});},moveElementDown:function h(i){var j=arguments.length<=1||arguments[1]===undefined?1:arguments[1];c('AdsDispatcher').handleUpdateFromViewAction({element:i,distance:j,type:c('RichMediaEditorActionTypes').MOVE_ELEMENT_DOWN});},deleteElement:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({element:i,type:c('RichMediaEditorActionTypes').DELETE_ELEMENT});},createDefaultDocument:function h(){c('AdsDispatcher').handleUpdateFromViewAction({type:c('RichMediaEditorActionTypes').CREATE_DEFAULT_DOCUMENT});},saveIncompleteElements:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({elementValidation:i,type:c('RichMediaEditorActionTypes').SAVE_INCOMPLETE_ELEMENTS});},setPreviewFailed:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({previewFailed:i,type:c('RichMediaEditorActionTypes').SET_PREVIEW_FAILED});},setPreviewType:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({previewType:i,type:c('RichMediaEditorActionTypes').SET_PREVIEW_TYPE});},setSendingPreview:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({sendingPreview:i,type:c('RichMediaEditorActionTypes').SET_SENDING_PREVIEW});},setSaveFailed:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({saveFailed:i,type:c('RichMediaEditorActionTypes').SET_SAVE_FAILED});},setValidationFailed:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({elementValidation:i,type:c('RichMediaEditorActionTypes').SET_VALIDATION_FAILED});},setDialogShown:function h(i,j){c('AdsDispatcher').handleUpdateFromViewAction({dialogID:i,dialogShown:j,type:c('RichMediaEditorActionTypes').SET_DIALOG_SHOWN});},setDialogCanvas:function h(i,j){c('AdsDispatcher').handleUpdateFromViewAction({dialogID:i,canvas:j,type:c('RichMediaEditorActionTypes').SET_DIALOG_CANVAS});},setDocumentURLDialogShown:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({dialogShown:i,type:c('RichMediaEditorActionTypes').SET_DOCUMENT_URL_DIALOG_SHOWN});},setForceEditPublished:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({forceEditPublished:i,type:c('RichMediaEditorActionTypes').SET_FORCE_EDIT_PUBLISHED});},toggleDocumentDebugPaneShown:function h(){c('AdsDispatcher').handleUpdateFromViewAction({type:c('RichMediaEditorActionTypes').TOGGLE_DOCUMENT_DEBUG_PANE_SHOWN});},toggleWelcomePaneShown:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({shown:i,type:c('RichMediaEditorActionTypes').TOGGLE_WELCOME_PANE_SHOWN});},triggerNuxTour:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({shown:i,type:c('RichMediaEditorActionTypes').TRIGGER_NUX_TOUR});},loadDocument:function h(i,j,k,l,m,n,o,p,q){c('AdsDispatcher').handleUpdateFromViewAction({documentName:i,documentTheme:j,documentID:k,elementsPayload:l,elements:m,isPublished:n,styleList:o,tags:p,propertyList:q,type:c('RichMediaEditorActionTypes').LOAD_DOCUMENT});},createDocumentFromMedia:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({images:i,type:c('RichMediaEditorActionTypes').CREATE_DOCUMENT_FROM_MEDIA});},selectElementToAdd:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({elementTypeName:i,type:c('RichMediaEditorActionTypes').SELECT_ELEMENT_TO_ADD});},deselectElementToAdd:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({elementTypeName:i,type:c('RichMediaEditorActionTypes').DESELECT_ELEMENT_TO_ADD});},addElementsSelected:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({elementsSelected:i,type:c('RichMediaEditorActionTypes').ADD_ELEMENTS_SELECTED});},setAddComponentDialogShown:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({dialogShown:i,type:c('RichMediaEditorActionTypes').SET_ADD_COMPONENT_DIALOG_SHOWN});},setUseCustomizeThemeColor:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({useCustomizeThemeColor:i,type:c('RichMediaEditorActionTypes').SET_USE_CUSTOMIZE_THEME_COLOR});},setCustomizeThemeColor:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({customizeThemeColor:i,type:c('RichMediaEditorActionTypes').SET_CUSTOMIZE_THEME_COLOR});},setUnpublishedCanvas:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({unpublishedCanvas:i,type:c('RichMediaEditorActionTypes').SET_UNPUBLISHED_CANVAS});},resetUnpublishedCanvas:function h(){c('AdsDispatcher').handleUpdateFromViewAction({type:c('RichMediaEditorActionTypes').RESET_UNPUBLISHED_CANVAS});},setSelectedCanvas:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({selectedCanvas:i,type:c('RichMediaEditorActionTypes').SET_SELECTED_CANVAS});},loadCanvasTemplate:function h(i,j,k){c('AdsDispatcher').handleUpdateFromViewAction({selectedTemplate:i,elementsPayload:j,elements:k,type:c('RichMediaEditorActionTypes').LOAD_CANVAS_TEMPLATE});},setShowTemplates:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({showTemplates:i,type:c('RichMediaEditorActionTypes').SET_SHOW_TEMPLATES});},canvasTemplateSelected:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({selectedTemplate:i,type:c('RichMediaEditorActionTypes').CANVAS_TEMPLATE_SELECTED});},backToMenu:function h(){c('AdsDispatcher').handleUpdateFromViewAction({type:c('RichMediaEditorActionTypes').BACK_TO_MENU});},setCanvasSource:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({source:i,type:c('RichMediaEditorActionTypes').SET_CANVAS_SOURCE});},setCanvasPageId:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({pageId:i,type:c('RichMediaEditorActionTypes').SET_CANVAS_PAGEID});},setSwipeToOpenEnabled:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({value:i,type:c('RichMediaEditorActionTypes').SET_SWIPE_TO_OPEN_ENABLED});},setSupportInstagram:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({value:i,type:c('RichMediaEditorActionTypes').SET_SUPPORT_INSTAGRAM_ENABLED});},fetchTemplates:function h(i,j){c('AdsDispatcher').handleUpdateFromViewAction({accessToken:i,pageID:j,type:c('RichMediaEditorActionTypes').FETCH_TEMPLATES});},templateFetched:function h(i,j,k){c('AdsDispatcher').handleUpdateFromViewAction({template:i,payload:j,elements:k,type:c('RichMediaEditorActionTypes').TEMPLATE_FETCHED});},toolbarPublishClick:function h(i){c('AdsDispatcher').handleUpdateFromViewAction({elementValidation:i,type:c('RichMediaEditorActionTypes').TOOLBAR_PUBLISH_CLICK});}};}),null);
__d('RichMediaDocumentThemeConstants',[],(function a(b,c,d,e,f,g){'use strict';f.exports={WHITE:'FFFFFFFF',BLACK:'FF000000'};}),null);
__d('RichMediaEditorTemplateLayouts',['fbt'],(function a(b,c,d,e,f,g,h){'use strict';f.exports={LAYOUT_CONFIGS:[{title:h._("Single Screen"),subtitle:h._("Quickly put together a Canvas that complements the message from your ad."),value:'single_screen'},{title:h._("Storytelling"),subtitle:h._("Guide people through a story with photos, videos and text."),value:'storytelling'},{title:h._("Fullscreen Media"),subtitle:h._("Show a set of photos and videos in a fullscreen layout."),value:'fullscreen_media'}]};}),null);
__d("XCanvasPhotoUploadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ads\/canvas\/upload\/photo\/",{photo_url:{type:"String"}});}),null);
__d('RichMediaEditorUploader',['ActorURI','AsyncUploadRequest','XCanvasPhotoUploadController'],(function a(b,c,d,e,f,g){'use strict';var h={upload:function i(j,k,l){var m=c('ActorURI').create(c('XCanvasPhotoUploadController').getURIBuilder().getURI(),j),n=new (c('AsyncUploadRequest'))(m).setAllowCrossOrigin(false).setFiles({file:k}),o=[];o.push(n.subscribe('progress',function(p,q){var event=q.getProgressEvent();if(event.lengthComputable)l.onProgress(q.getFile(),event.loaded/event.total*100);}));o.push(n.subscribe('success',function(p,q){l.onSuccess(q.getFile(),q.getResponse());}));o.push(n.subscribe('error',function(p,q){l.onError(q.getFile());}));o.push(n.subscribe('complete',function(p,q){while(o.length)o.pop().unsubscribe();}));n.send();return n;}};f.exports=h;}),null);
__d('RichMediaElementTypeConstant',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({'':null,BUTTON:null,CAROUSEL:null,CULTURAL_MOMENT_HEADER:null,CULTURAL_MOMENT_POPULAR_MEDIA:null,ELEMENT_GROUP:null,FOOTER:null,HEADER:null,LOCAL_IMAGE:null,OFFER:null,PHOTO:null,RICH_TEXT:null,SCRUBBABLE_GIF:null,STORE_LOCATOR:null,TITLE_AND_DATE:null,VIDEO:null,FB_TIPS:null});f.exports={TYPE_NAMES:{BUTTON:'button',CAROUSEL:'carousel',CULTURAL_MOMENT_HEADER:'cultural_moment_header',CULTURAL_MOMENT_POPULAR_MEDIA:'culture_moment_popular_media',HEADER:'header',LOCAL_IMAGE:'local_image',OFFER:'offer',PHOTO:'photo',TEXT:'text',VIDEO:'video',PRODUCT_SET:'product_set',TITLE_AND_DATE:'title_and_date',SCRUBBABLE_GIF:'scrubbable_gif',STORE_LOCATOR:'store_locator',FB_TIPS:'fb_tips'},RichMediaElementTypes:h};}),null);
__d('RichMediaPhotoElement',['fbt','immutable','InstantShoppingDocumentElementType','RichMediaEditorUtil','RichMediaElementValidationUtil','RichMediaEditorConstants','AdsCanvasEditorEnums','getByPath','validateDeepLink'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('RichMediaEditorConstants').EDITOR_DEFAULT_PADDING,l=c('AdsCanvasEditorEnums').LinkDestinationEnum,m=c('immutable').Record,n={id:'',name:'',type:c('InstantShoppingDocumentElementType').PHOTO,index:0,expanded:false,advancedExpanded:false,padding:{paddingTop:k,paddingBottom:k},layout:'fit_to_width',description:null,link:null,deeplink:null,linkedCanvasName:null,destination:l.WEBSITE,photo:null,culturalMomentAnnotationImage:null,uploadStatus:null,crops:null},o=m(n);i=babelHelpers.inherits(p,o);j=i&&i.prototype;p.create=function(q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea){return new p({name:q,type:c('InstantShoppingDocumentElementType').PHOTO,index:r,expanded:s,advancedExpanded:t,padding:u,layout:v,description:w,link:x,deeplink:y,linkedCanvasName:z,destination:aa,photo:ba,culturalMomentAnnotationImage:ca,uploadStatus:da,crops:ea});};p.createDefault=function(q){return p.create('Photo',q,true,false,{paddingTop:k,paddingBottom:k},'fit_to_width',null,null,null,null,l.WEBSITE,null,null,null);};p.createFromObject=function(q,r){return p.create(q.name,q.index,q.expanded,q.advancedExpanded,q.padding,r?'fit_to_width':q.layout,q.description,q.link,q.deeplink,q.linkedCanvasName,q.destination,q.photo,q.culturalMomentAnnotationImage,null,q.crops);};p.createFromPayloadAndElementField=function(q,r){if(q.photo)q.photo.src=c('getByPath')(r,['element','photo','images','0','source']);return p.create(q.name,q.index,q.expanded,q.advancedExpanded,q.padding,q.layout,q.description,q.link,q.deeplink,q.linkedCanvasName,q.destination,q.photo,q.culturalMomentAnnotationImage,null,q.crops);};p.createFromAdAsset=function(q,r,s){return p.create(h._("Photo").toString(),q,true,false,{paddingTop:k,paddingBottom:k},'fit_to_width',null,null,null,null,l.WEBSITE,r,null,null,s);};p.validate=function(q,r){if(!q.photo)return {isValid:false,errorMsg:h._("Missing photo")};if(q.link&&!c('RichMediaEditorUtil').isValidURL(q.link))if(q.destination===l.NATIVE){return {isValid:false,errorMsg:h._("Invalid Store URL")};}else return {isValid:false,errorMsg:h._("Invalid Website URL")};var s=c('RichMediaElementValidationUtil').validateForAppstoreDestination(q,r);if(!s.isValid)return s;if(q.deeplink)if(!c('validateDeepLink')(q.deeplink))return {isValid:false,errorMsg:h._("Invalid Deeplink")};if(q.uploadStatus&&q.uploadStatus.isUploading!==false)return {isValid:false,errorMsg:''};return {isValid:true,errorMsg:''};};function p(){i.apply(this,arguments);}f.exports=p;}),null);
__d('RichMediaProductSetElement',['fbt','AdsCollectionsConstants','immutable','InstantShoppingDocumentElementType','RichMediaEditorConstants'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('RichMediaEditorConstants').EDITOR_DEFAULT_PADDING,l=c('immutable').Record,m={id:'',name:'',type:c('InstantShoppingDocumentElementType').ELEMENT_GROUP,index:0,expanded:false,advancedExpanded:false,padding:{paddingTop:k,paddingBottom:k},catalogID:null,setID:null,limit:0,retailerItemIDs:null,itemHeadlineTemplate:null,itemDescriptionTemplate:null},n=l(m);i=babelHelpers.inherits(o,n);j=i&&i.prototype;o.create=function(p,q,r,s,t,u,v,w,x,y,z){return new o({name:p,index:q,type:c('InstantShoppingDocumentElementType').ELEMENT_GROUP,expanded:r,advancedExpanded:s,padding:t,catalogID:u,setID:v,limit:w,retailerItemIDs:x,itemHeadlineTemplate:y,itemDescriptionTemplate:z});};o.createDefault=function(p){return o.create('Product',p,true,false,{paddingTop:k,paddingBottom:k},null,null,c('AdsCollectionsConstants').COLLECTION_PRODUCT_MAX_COUNT,null,null,null);};o.createFromObject=function(p){return o.create(p.name,p.index,p.expanded,p.advancedExpanded,p.padding,p.catalogID,p.setID,p.limit,p.retailerItemIDs,p.itemHeadlineTemplate,p.itemDescriptionTemplate);};o.createFromAdAsset=function(p,q,r,s,t,u){return o.create(h._("Product").toString(),p,true,false,{paddingTop:k,paddingBottom:k},q,r,c('AdsCollectionsConstants').COLLECTION_PRODUCT_MAX_COUNT,s,t,u);};o.validate=function(p){if(p.catalogID==null)return {isValid:false,errorMsg:h._("Missing catalog ID")};if(p.setID==null)return {isValid:false,errorMsg:h._("Please choose or create a Product Set from your Product Catalog")};if(p.limit<=0)return {isValid:false,errorMsg:h._("Invalid maximum products count")};return {isValid:true,errorMsg:''};};function o(){i.apply(this,arguments);}f.exports=o;}),null);
__d('RichMediaTextElement',['fbt','immutable','InstantShoppingDocumentElementType','RichMediaEditorUtil','RichMediaRichFormatText','RichMediaEditorConstants','AdsCanvasEditorEnums','validateDeepLink'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('RichMediaEditorConstants').EDITOR_DEFAULT_LINE_HEIGHT,l=c('RichMediaEditorConstants').EDITOR_DEFAULT_TEXT_BUTTON_PADDING_VERTICAL,m=c('RichMediaEditorConstants').EDITOR_DEFAULT_TEXT_BUTTON_PADDING_HORIZONTAL,n=c('AdsCanvasEditorEnums').LinkDestinationEnum,o=c('immutable').Record,p={id:'',name:'',type:c('InstantShoppingDocumentElementType').RICH_TEXT,index:0,expanded:false,advancedExpanded:false,padding:{paddingTop:l,paddingBottom:l,paddingLeft:m,paddingRight:m},richFormatText:{composedText:{entityMap:{},blocks:[]},textAlignment:'center',textColor:'#000',fontSize:12,fontFamily:'sans-serif',lineHeight:k},backgroundColor:'#FFFFFF',link:null,deeplink:null,destination:n.WEBSITE},q=o(p);i=babelHelpers.inherits(r,q);j=i&&i.prototype;r.create=function(s,t,u,v,w,x,y,z,aa,ba){return new r({index:s,name:t,type:c('InstantShoppingDocumentElementType').RICH_TEXT,expanded:u,advancedExpanded:v,padding:w,richFormatText:x,backgroundColor:y,link:z,deeplink:aa,destination:ba});};r.createDefault=function(s){return r.create(s,h._("Text").toString(),true,false,{paddingTop:l,paddingBottom:l,paddingLeft:m,paddingRight:m},c('RichMediaRichFormatText').createDefault(),'#FFFFFF',null,null,n.WEBSITE);};r.createFromObject=function(s){return r.create(s.index,s.name,s.expanded,s.advancedExpanded,{paddingTop:s.padding&&s.padding.paddingTop?s.padding.paddingTop:l,paddingBottom:s.padding&&s.padding.paddingBottom?s.padding.paddingBottom:l,paddingLeft:s.padding&&s.padding.paddingLeft?s.padding.paddingLeft:m,paddingRight:s.padding&&s.padding.paddingRight?s.padding.paddingRight:m},c('RichMediaRichFormatText').createFromObject(s.richFormatText),s.backgroundColor,s.link,s.deeplink,s.destination?s.destination:n.WEBSITE);};r.createFromAdAsset=function(s,t){return r.create(s,h._("Text").toString(),true,false,{paddingTop:l,paddingBottom:l,paddingLeft:m,paddingRight:m},c('RichMediaRichFormatText').createFromAdAsset(t),'#FFFFFF',null,null,n.WEBSITE);};r.validate=function(s){var t=c('RichMediaRichFormatText').getPlainTextFromComposedText(s.richFormatText.composedText);if(t.length==0)return {isValid:false,errorMsg:h._("Empty text block is not allowed")};if(s.link&&!c('RichMediaEditorUtil').isValidURL(s.link))if(s.destination===n.NATIVE){return {isValid:false,errorMsg:h._("Invalid Store URL")};}else return {isValid:false,errorMsg:h._("Invalid Website URL")};if(s.deeplink)if(!c('validateDeepLink')(s.deeplink))return {isValid:false,errorMsg:h._("Invalid Deeplink")};return {isValid:true,errorMsg:''};};function r(){i.apply(this,arguments);}f.exports=r;}),null);
__d('RichMediaVideoElement',['fbt','immutable','InstantShoppingDocumentElementType','RichMediaEditorConstants'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('RichMediaEditorConstants').EDITOR_DEFAULT_PADDING,l=c('immutable').Record,m={id:'',name:'',type:c('InstantShoppingDocumentElementType').VIDEO,index:0,expanded:false,advancedExpanded:false,padding:{paddingTop:k,paddingBottom:k},layout:'fit_to_width',video:null,culturalMomentAnnotationImage:null,uploadStatus:null},n=l(m);i=babelHelpers.inherits(o,n);j=i&&i.prototype;o.create=function(p,q,r,s,t,u,v,w,x){return new o({name:p,type:c('InstantShoppingDocumentElementType').VIDEO,index:q,expanded:r,advancedExpanded:s,padding:t,layout:u?u:'fit_to_width',video:v,culturalMomentAnnotationImage:w,uploadStatus:x});};o.createDefault=function(p){return o.create(h._("Video").toString(),p,true,false,{paddingTop:k,paddingBottom:k},'fit_to_width',null,null,null);};o.createFromObject=function(p,q){return o.create(p.name,p.index,p.expanded,p.advancedExpanded,p.padding,q?'fit_to_width':p.layout,p.video,p.culturalMomentAnnotationImage);};o.createFromAdAsset=function(p,q){return o.create('Video',p,true,false,{paddingTop:k,paddingBottom:k},'fit_to_width',q,null,null);};o.validate=function(p){if(!p.video)return {isValid:false,errorMsg:h._("Missing video")};if(p.uploadStatus&&(p.uploadStatus.isUploading!==false||p.uploadStatus.isEncoding!==false))return {isValid:false,errorMsg:''};return {isValid:true,errorMsg:''};};function o(){i.apply(this,arguments);}f.exports=o;}),null);
__d('RichMediaElementUtil',['fbt','AdsCanvasDailyDialogueSVGElement','InstantShoppingDocumentElementType','RichMediaButtonElement','RichMediaCarouselElement','RichMediaCulturalMomentHeaderElement','RichMediaCultureMomentPopularMediaElement','RichMediaEditorActions','RichMediaHeaderElement','RichMediaPhotoElement','RichMediaProductSetElement','RichMediaRichFormatText','RichMediaTextElement','RichMediaVideoElement','UnicodeBidi'],(function a(b,c,d,e,f,g,h){'use strict';var i,j={_elementTypeNameMap:(i={},i[c('InstantShoppingDocumentElementType').BUTTON]=h._("Button").toString(),i[c('InstantShoppingDocumentElementType').RICH_TEXT]=h._("Rich Text").toString(),i[c('InstantShoppingDocumentElementType').PHOTO]=h._("Photo").toString(),i[c('InstantShoppingDocumentElementType').SCRUBBABLE_GIF]=h._("Scrubbable GIF").toString(),i[c('InstantShoppingDocumentElementType').VIDEO]=h._("Video").toString(),i[c('InstantShoppingDocumentElementType').SLIDESHOW]=h._("Carousel").toString(),i[c('InstantShoppingDocumentElementType').ELEMENT_GROUP]=h._("Product").toString(),i[c('InstantShoppingDocumentElementType').HEADER]=h._("Header").toString(),i[c('InstantShoppingDocumentElementType').STORE_LOCATOR]=h._("Button").toString(),i),getDefaultElementName:function k(l){if(this._elementTypeNameMap[l])return this._elementTypeNameMap[l];return h._("Untitled").toString();},validateElements:function k(l){var m=true,n=[];for(var o=0;o<l.length;++o){var p=this.validateElement(l[o],l);if(!p.isValid){m=false;var q=this._elementTypeNameMap[l[o].type];n.push({element:q,errorMsg:p.errorMsg});}}return {isValid:m,errorMsg:JSON.stringify(n)};},setNonEmptyElementNames:function k(l){for(var m=0;m<l.length;++m)c('RichMediaEditorActions').setNonEmptyElementName(l[m]);},validateElement:function k(l,m){switch(l.type){case c('InstantShoppingDocumentElementType').RICH_TEXT:return c('RichMediaTextElement').validate(l);case c('InstantShoppingDocumentElementType').PHOTO:return c('RichMediaPhotoElement').validate(l,m);case c('InstantShoppingDocumentElementType').VIDEO:return c('RichMediaVideoElement').validate(l);case c('InstantShoppingDocumentElementType').BUTTON:return c('RichMediaButtonElement').validate(l,m);case c('InstantShoppingDocumentElementType').SLIDESHOW:return c('RichMediaCarouselElement').validate(l,m);case c('InstantShoppingDocumentElementType').HEADER:if(l.isCulturalMomentHeader){return c('RichMediaCulturalMomentHeaderElement').validate(l);}else return c('RichMediaHeaderElement').validate(l);case c('InstantShoppingDocumentElementType').ELEMENT_GROUP:return c('RichMediaProductSetElement').validate(l);case c('InstantShoppingDocumentElementType').CULTURAL_MOMENT_POPULAR_MEDIA:return c('RichMediaCultureMomentPopularMediaElement').validate(l);case c('InstantShoppingDocumentElementType').DAILY_DIALOGUE_FB_TIPS:return c('AdsCanvasDailyDialogueSVGElement').validate(l);}return {isValid:true,errorMsg:''};},validateElementsForInstagram:function k(l){for(var m=0;m<l.length;++m)if(!j.validateElementForInstagram(l[m]).isValid)return false;return true;},validateElementForInstagram:function k(l){var m=[c('InstantShoppingDocumentElementType').STORE_LOCATOR,c('InstantShoppingDocumentElementType').OFFER,c('InstantShoppingDocumentElementType').ELEMENT_GROUP];if(m.indexOf(l.type)!==-1){var n=h._("Instagram Canvas does not support {unsupported component type}",[h.param('unsupported component type',l.name)]);return {isValid:false,errorMsg:n.toString()};}if(l.type===c('InstantShoppingDocumentElementType').RICH_TEXT){var o=this.validateRTLForInstagram(l);if(!o.isvalid)return o;}else if(l.type===c('InstantShoppingDocumentElementType').VIDEO){var p=this.validate360VideoForInstagram(l);if(!p.isValid)return p;}return {isValid:true,errorMsg:''};},validateRTLForInstagram:function k(l){var m=c('RichMediaRichFormatText').getPlainTextFromComposedText(l.richFormatText.composedText);if(c('UnicodeBidi').isDirectionRTL(m)){var n=h._("Instagram Canvas does not support RTL text");return {isValid:false,errorMsg:n.toString()};}return {isValid:true,errorMsg:''};},validate360VideoForInstagram:function k(l){if(l.video){var m=l.video.spherical;if(m){var n=h._("Instagram Canvas does not support 360 videos");return {isValid:false,errorMsg:n.toString()};}}return {isValid:true,errorMsg:''};},getFixToBottomButtonElement:function k(l){if(l.length===0)return null;if(l[l.length-1].type===c('InstantShoppingDocumentElementType').BUTTON&&l[l.length-1].isFixedToBottom)return l[l.length-1];return null;},getHeaderElement:function k(l){if(l.length===0)return null;if(l[0].type===c('InstantShoppingDocumentElementType').HEADER)return c('RichMediaHeaderElement').createFromObject(l[0]);return null;},hasFixToTopHeaderElement:function k(l){if(l.length===0)return false;if(l[0].type===c('InstantShoppingDocumentElementType').HEADER)return l[0].isOpaque();return false;},isContentUploadingInElement:function k(l){if(l.uploadStatus){var m=l.uploadStatus;switch(l.type){case c('InstantShoppingDocumentElementType').PHOTO:if(m.isUploading)return true;break;case c('InstantShoppingDocumentElementType').VIDEO:if(m.isUploading||m.isEncoding)return true;break;default:break;}}else if(l.type===c('InstantShoppingDocumentElementType').SLIDESHOW){var n=l.items;for(var o=0;o<n.length;o++)if(n[o].uploadStatus&&n[o].uploadStatus.isUploading)return true;}return false;}};f.exports=j;}),null);
__d('RichMediaLocalImageElement',['immutable','InstantShoppingDocumentElementType'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record,k={id:'',name:'',type:c('InstantShoppingDocumentElementType').LOCAL_IMAGE,index:0,expanded:false,advancedExpanded:false},l=j(k);h=babelHelpers.inherits(m,l);i=h&&h.prototype;m.create=function(n,o,p,q){return new m({index:n,name:o,type:c('InstantShoppingDocumentElementType').LOCAL_IMAGE,expanded:p,advancedExpanded:q});};m.createDefault=function(n){return m.create(n,'Local Footer Image',true,false);};m.createFromObject=function(n){return m.create(n.index,n.name,n.expanded,n.advancedExpanded);};m.validate=function(n){return {isValid:true,errorMsg:''};};function m(){h.apply(this,arguments);}f.exports=m;}),null);
__d('RichMediaScrubbableGIFElement',['immutable','InstantShoppingDocumentElementType','RichMediaEditorConstants'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('RichMediaEditorConstants').EDITOR_DEFAULT_PADDING,k=c('immutable').Record,l={id:'',name:'',type:c('InstantShoppingDocumentElementType').SCRUBBABLE_GIF,index:0,expanded:false,advancedExpanded:false,padding:{paddingTop:j,paddingBottom:j},layout:'fit_to_width',video:null,uploadStatus:null},m=k(l);h=babelHelpers.inherits(n,m);i=h&&h.prototype;n.create=function(o,p,q,r,s,t,u,v){return new n({name:o,type:c('InstantShoppingDocumentElementType').SCRUBBABLE_GIF,index:p,expanded:q,advancedExpanded:r,padding:s,layout:t?t:'fit_to_width',video:u,uploadStatus:v});};n.createDefault=function(o){return n.create('Scrubbable GIF',o,true,false,{paddingTop:j,paddingBottom:j},'fit_to_width',null,null);};n.createFromObject=function(o){return n.create(o.name,o.index,o.expanded,o.advancedExpanded,o.padding,o.layout,o.video);};n.validate=function(o){if(!o.video)return {isValid:false,errorMsg:'Missing video'};if(o.uploadStatus&&(o.uploadStatus.isUploading!==false||o.uploadStatus.isEncoding!==false))return {isValid:false,errorMsg:''};return {isValid:true,errorMsg:''};};function n(){h.apply(this,arguments);}f.exports=n;}),null);
__d('RichMediaStoreLocatorThemes',['fbt','RichMediaStoreLocatorElementTheme'],(function a(b,c,d,e,f,g,h){'use strict';var i;f.exports={STORE_LOCATOR_THEMES:c('RichMediaStoreLocatorElementTheme'),STORE_LOCATOR_THEMES_LABELS:(i={},i[c('RichMediaStoreLocatorElementTheme').LIGHT]=h._("Light"),i[c('RichMediaStoreLocatorElementTheme').DARK]=h._("Dark"),i[c('RichMediaStoreLocatorElementTheme').CUSTOM]=h._("Custom"),i),STORE_LOCATOR_LIGHT_HEADER_BACKGROUND_COLOR:'#FFFFFF',STORE_LOCATOR_DARK_HEADER_BACKGROUND_COLOR:'#000000',STORE_LOCATOR_DEFAULT_CUSTOM_HEADER_BACKGROUND_COLOR:'#4267b2',STORE_LOCATOR_DEFAULT_TYPEFACE:'HelveticaNeue-Light'};}),null);
__d('RichMediaStoreLocatorElement',['fbt','InstantShoppingDocumentElementType','RichMediaStoreLocatorThemes','RichMediaEditorConstants','immutable'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('RichMediaStoreLocatorThemes').STORE_LOCATOR_DARK_HEADER_BACKGROUND_COLOR,l=c('RichMediaStoreLocatorThemes').STORE_LOCATOR_DEFAULT_CUSTOM_HEADER_BACKGROUND_COLOR,m=c('RichMediaStoreLocatorThemes').STORE_LOCATOR_DEFAULT_TYPEFACE,n=c('RichMediaStoreLocatorThemes').STORE_LOCATOR_LIGHT_HEADER_BACKGROUND_COLOR,o=c('RichMediaStoreLocatorThemes').STORE_LOCATOR_THEMES,p=c('RichMediaEditorConstants').EDITOR_FONT_FAMILIIES,q=c('immutable').Record,r={id:'',name:'',type:c('InstantShoppingDocumentElementType').STORE_LOCATOR,index:0,expanded:false,advancedExpanded:false,pageID:'',typeface:m,theme:o.LIGHT,customHeaderBackgroundColor:l},s=q(r);i=babelHelpers.inherits(t,s);j=i&&i.prototype;t.create=function(u,v,w,x,y,z,aa,ba){return new t({index:u,name:v,type:c('InstantShoppingDocumentElementType').STORE_LOCATOR,expanded:w,advancedExpanded:x,pageID:y,typeface:z,theme:aa,customHeaderBackgroundColor:ba});};t.createDefault=function(u){return t.create(u,h._("Store Locator").toString(),true,false,r.pageID,r.typeface,r.theme,r.customHeaderBackgroundColor);};t.createFromObject=function(u){return t.create(u.index,u.name,u.expanded,u.advancedExpanded,u.pageID,u.typeface,u.theme,u.customHeaderBackgroundColor);};t.isValidColor=function(u){return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(u);};t.isValidTheme=function(u){return u in o;};t.isValidTypeface=function(u){return p.indexOf(u)!=-1;};t.validate=function(u){var v='',w=true;if(!t.isValidTheme(u.theme)){w=false;v+=h._("The theme {theme} is not valid.",[h.param('theme',u.theme)]).toString();}if(!t.isValidTypeface(u.typeface)){w=false;v+=h._("The typeface {typeface} is not valid.",[h.param('typeface',u.typeface)]).toString();}if(!t.isValidColor(u.customHeaderBackgroundColor)){w=false;v+=h._("The custom header background color {background_color} is not a valid hex color.",[h.param('background_color',u.customHeaderBackgroundColor)]).toString();}return {isValid:w,errorMsg:v};};t.prototype.headerBackgroundColor=function(){switch(this.theme){case o.LIGHT:return n;case o.DARK:return k;case o.CUSTOM:return this.customHeaderBackgroundColor;default:throw new Error('Theme not supported.');}};function t(){i.apply(this,arguments);}f.exports=t;}),null);
__d('RichMediaTitleAndDateElement',['immutable','InstantShoppingDocumentElementType'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record,k={id:'',name:'',type:c('InstantShoppingDocumentElementType').TITLE_AND_DATE,index:0,expanded:false,advancedExpanded:false,title:'',startTime:Date.now()/1000,endTime:Date.now()/1000,isLocalTime:true},l=j(k);h=babelHelpers.inherits(m,l);i=h&&h.prototype;m.create=function(n,o,p,q,r,s,t,u){return new m({index:n,name:o,type:c('InstantShoppingDocumentElementType').TITLE_AND_DATE,expanded:p,advancedExpanded:q,title:r,startTime:s,endTime:t,isLocalTime:u});};m.createDefault=function(n){return m.create(n,'Title And Date',true,false,'Title',Date.now()/1000,Date.now()/1000,true);};m.createFromObject=function(n){return m.create(n.index,n.name,n.expanded,n.advancedExpanded,n.title,n.startTime,n.endTime,n.isLocalTime);};m.validate=function(n){if(n.title.length==0)return {isValid:false,errorMsg:'Empty title is not allowed'};if(n.startTime>n.endTime)return {isValid:false,errorMsg:'Start date must be less than the end date'};return {isValid:true,errorMsg:''};};function m(){h.apply(this,arguments);}f.exports=m;}),null);
__d('RichMediaEditorStore',['fbt','invariant','AdsCanvasEditorFeature','AdsDispatcher','AsyncUploadRequest','CanvasProperty','CanvasSource','FluxStore','InstantShoppingDocumentElementType','RichMediaEditorActionTypes','RichMediaEditorActions','RichMediaEditorUploader','RichMediaEditorUtil','RichMediaElementUtil','RichMediaButtonElement','RichMediaCarouselElement','RichMediaCulturalMomentHeaderElement','RichMediaHeaderElement','RichMediaLocalImageElement','RichMediaCultureMomentPopularMediaElement','AdsCanvasDailyDialogueSVGElement','RichMediaPhotoElement','RichMediaProductSetElement','RichMediaScrubbableGIFElement','RichMediaStoreLocatorElement','RichMediaTextElement','RichMediaTitleAndDateElement','RichMediaVideoElement','SimpleNUXMessage','SimpleNUXMessageTypes','AdsCanvasEditorEnums','RichMediaDocumentThemeConstants','RichMediaEditorTemplateLayouts','RichMediaElementTypeConstant','Map'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('AdsCanvasEditorEnums').ErrorTypeEnum,m=c('AdsCanvasEditorEnums').PreviewEnum,n=c('AdsCanvasEditorEnums').LinkDestinationEnum,o=c('AdsCanvasEditorEnums').SaveStateEnum,p=c('RichMediaDocumentThemeConstants').WHITE,q=c('RichMediaDocumentThemeConstants').BLACK,r=c('RichMediaEditorTemplateLayouts').LAYOUT_CONFIGS,s=c('RichMediaElementTypeConstant').TYPE_NAMES;j=babelHelpers.inherits(t,c('FluxStore'));k=j&&j.prototype;function t(u){k.constructor.call(this,u);this.$RichMediaEditorStore1=[];this.$RichMediaEditorStore2=null;this.$RichMediaEditorStore3='';this.$RichMediaEditorStore4=p;this.$RichMediaEditorStore5=[];this.$RichMediaEditorStore6=o.SAVED;this.$RichMediaEditorStore7='';this.$RichMediaEditorStore8=l.NONE;this.$RichMediaEditorStore18=false;this.$RichMediaEditorStore9=false;this.$RichMediaEditorStore10=false;this.$RichMediaEditorStore11=false;this.$RichMediaEditorStore12=false;this.$RichMediaEditorStore13=false;this.$RichMediaEditorStore14=false;this.$RichMediaEditorStore15=false;this.$RichMediaEditorStore16=-1;this.$RichMediaEditorStore17={};this.$RichMediaEditorStore19=false;this.$RichMediaEditorStore21=false;this.$RichMediaEditorStore22=q;this.$RichMediaEditorStore23=0;this.$RichMediaEditorStore24=false;this.$RichMediaEditorStore25=false;this.$RichMediaEditorStore26=false;this.$RichMediaEditorStore27=null;this.$RichMediaEditorStore28=false;this.$RichMediaEditorStore20=false;this.$RichMediaEditorStore29=c('CanvasSource').OTHER;this.$RichMediaEditorStore30='';this.$RichMediaEditorStore31=false;this.$RichMediaEditorStore32=true;this.$RichMediaEditorStore33=false;this.$RichMediaEditorStore34=[];this.$RichMediaEditorStore35=m.FACEBOOK;}t.prototype.__onDispatch=function(u){var v=u.action,w=void 0,x=void 0;switch(v.type){case c('RichMediaEditorActionTypes').SET_DOCUMENT_NAME:this.$RichMediaEditorStore3=v.name;this.$RichMediaEditorStore6=o.UNSAVED;this.$RichMediaEditorStore16=-1;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_NONEMPTY_ELEMENT_NAME:aa=this.$RichMediaEditorStore5;ka=v.element.index;if(aa[ka].name.trim().length==0){var y=c('RichMediaElementUtil').getDefaultElementName(v.element.type),z=aa[ka].set('name',y);aa[ka]=z;this.__emitChange();}break;case c('RichMediaEditorActionTypes').SET_DOCUMENT_THEME:this.$RichMediaEditorStore4=v.theme;this.$RichMediaEditorStore6=o.UNSAVED;this.$RichMediaEditorStore16=-1;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_DOCUMENT_EDIT_STATE:this.$RichMediaEditorStore6=v.editState;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_FORCE_EDIT_PUBLISHED:this.$RichMediaEditorStore18=v.forceEditPublished;this.__emitChange();break;case c('RichMediaEditorActionTypes').ADD_DOCUMENT_ELEMENT:var aa=this.$RichMediaEditorStore5;this.$RichMediaEditorStore8=l.NONE;if(v.element.type===c('InstantShoppingDocumentElementType').HEADER){this.$RichMediaEditorStore36(v.element,0);}else if(v.element.type===c('InstantShoppingDocumentElementType').BUTTON&&v.element.isFixedToBottom){this.$RichMediaEditorStore5.push(v.element);}else if(this.getHasStoreLocatorElement()||this.getHasFixedToBottomElement()){var ba=this.getHasStoreLocatorElement()&&this.getHasFixedToBottomElement()?2:1;this.$RichMediaEditorStore36(v.element,this.$RichMediaEditorStore5.length-ba);}else this.$RichMediaEditorStore5.push(v.element);this.$RichMediaEditorStore16=v.element.index;this.$RichMediaEditorStore6=o.UNSAVED;this.__emitChange();break;case c('RichMediaEditorActionTypes').ADD_FILES_TO_DOCUMENT_ELEMENT:w=this.$RichMediaEditorStore37(v.files,v.pageID,this.getDocumentElement(v.element.id));this.$RichMediaEditorStore5[w.index]=w;this.$RichMediaEditorStore16=w.index;this.__emitChange();break;case c('RichMediaEditorActionTypes').REPLACE_FILE_IN_DOCUMENT:w=this.getDocumentElement(v.element.id);w.type===c('InstantShoppingDocumentElementType').SLIDESHOW||i(0);var ca=new (c('Map'))();ca[v.files[0].name]=v.itemID;var da=c('RichMediaEditorUploader').upload(v.pageID,[v.files[0]],this.$RichMediaEditorStore38(w.id,ca));this.$RichMediaEditorStore1.push(da);w=w.replaceFile(v.itemID,da);this.$RichMediaEditorStore5[w.index]=w;this.$RichMediaEditorStore16=w.index;this.$RichMediaEditorStore6=o.UNSAVED;this.__emitChange();break;case c('RichMediaEditorActionTypes').EDIT_DOCUMENT_ELEMENT:this.$RichMediaEditorStore9=false;aa=this.$RichMediaEditorStore5;var ea=this.$RichMediaEditorStore5[v.element.index];if(ea&&ea!=v.element&&ea.expanded===v.element.expanded&&v.element.previewOnly!==true)this.$RichMediaEditorStore6=o.UNSAVED;this.$RichMediaEditorStore5[v.element.index]=v.element;var fa=v.element.uploadStatus&&(v.element.uploadStatus.isEncoding||v.element.uploadStatus.isUploading);if(!fa)this.$RichMediaEditorStore16=v.element.index;if(v.element.type===c('InstantShoppingDocumentElementType').BUTTON)if(v.element.isFixedToBottom){aa.splice(v.element.index,1);aa.push(v.element);for(var ga=v.element.index;ga<aa.length;ga++)aa[ga]=aa[ga].set('index',ga);this.$RichMediaEditorStore16=aa.length-1;}else if(ea.isFixedToBottom&&this.getHasStoreLocatorElement()&&v.element.index===aa.length-1&&!v.element.isFixedToBottom){var ha=aa[aa.length-2].set('index',aa.length-1),ia=aa[aa.length-1].set('index',aa.length-2);aa[aa.length-2]=ia;aa[aa.length-1]=ha;this.$RichMediaEditorStore16=aa.length-2;}if(c('RichMediaElementUtil').validateElements(aa).isValid)this.$RichMediaEditorStore8=l.WARNING;this.__emitChange();break;case c('RichMediaEditorActionTypes').MOVE_ELEMENT_UP:if(v.element.index>0&&v.element.index-v.distance>=0){aa=this.$RichMediaEditorStore5;var ja=0;for(ja=0;ja<v.distance;ja++){var ka=v.element.index-ja,la=aa[ka].set('index',ka-1),ma=aa[ka-1].set('index',ka);if(ma.type!==c('InstantShoppingDocumentElementType').HEADER){aa[ka]=ma;aa[ka-1]=la;}else break;this.$RichMediaEditorStore16=ka-ja;}this.$RichMediaEditorStore6=o.UNSAVED;this.__emitChange();}break;case c('RichMediaEditorActionTypes').MOVE_ELEMENT_DOWN:var na=this.$RichMediaEditorStore5.length;if(this.getHasStoreLocatorElement())na--;if(this.getHasFixedToBottomElement())na--;if(v.element.index<na-v.distance&&v.element.type!==c('InstantShoppingDocumentElementType').HEADER){aa=this.$RichMediaEditorStore5;var oa=0;for(oa=0;oa<v.distance;oa++){ka=v.element.index+oa;la=aa[ka];var pa=aa[ka+1];aa[ka]=pa.set('index',ka);aa[ka+1]=la.set('index',ka+1);this.$RichMediaEditorStore16=ka+1;}this.$RichMediaEditorStore6=o.UNSAVED;this.__emitChange();}break;case c('RichMediaEditorActionTypes').DELETE_ELEMENT:aa=this.$RichMediaEditorStore5;ka=v.element.index;aa.splice(ka,1);for(var qa=ka;qa<aa.length;++qa)aa[qa]=aa[qa].set('index',qa);this.$RichMediaEditorStore6=o.UNSAVED;this.$RichMediaEditorStore16=ka>0?ka-1:0;if(aa.length==0||c('RichMediaElementUtil').validateElements(aa).isValid)this.$RichMediaEditorStore8=l.WARNING;this.__emitChange();break;case c('RichMediaEditorActionTypes').CREATE_DEFAULT_DOCUMENT:this.$RichMediaEditorStore39();this.__emitChange();break;case c('RichMediaEditorActionTypes').CREATE_DOCUMENT_FROM_MEDIA:this.$RichMediaEditorStore40();this.$RichMediaEditorStore41(v.images);this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_PREVIEW_FAILED:this.$RichMediaEditorStore11=v.previewFailed;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_PREVIEW_TYPE:this.$RichMediaEditorStore35=v.previewType;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_SENDING_PREVIEW:this.$RichMediaEditorStore13=v.sendingPreview;this.__emitChange();break;case c('RichMediaEditorActionTypes').SAVE_INCOMPLETE_ELEMENTS:x=c('RichMediaElementUtil').validateElements(this.$RichMediaEditorStore5);this.$RichMediaEditorStore8=l.WARNING;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_SAVE_FAILED:x=c('RichMediaElementUtil').validateElements(this.$RichMediaEditorStore5);if(x.isValid)this.$RichMediaEditorStore12=v.saveFailed;if(v.saveFailed)this.$RichMediaEditorStore8=l.ERROR;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_VALIDATION_FAILED:if(!v.elementValidation.isValid)this.$RichMediaEditorStore8=l.ERROR;this.__emitChange();break;case c('RichMediaEditorActionTypes').LOAD_DOCUMENT:this.$RichMediaEditorStore2=v.propertyList;this.$RichMediaEditorStore34=v.tags;this.$RichMediaEditorStore26=false;this.$RichMediaEditorStore8=l.NONE;this.$RichMediaEditorStore9=false;this.$RichMediaEditorStore10=v.isPublished;this.$RichMediaEditorStore31=!c('SimpleNUXMessage').hasUserSeenMessage(c('SimpleNUXMessageTypes').AD_CANVAS_EDITOR_TOOLBAR_NUX);this.$RichMediaEditorStore6=o.SAVED;if(v.elementsPayload){var ra=JSON.parse(v.elementsPayload);ra.forEach(function(wa,xa){if(wa.index!==xa)this.$RichMediaEditorStore6=o.UNSAVED;wa.index=xa;}.bind(this));v.elementsPayload=JSON.stringify(ra);}if(v.documentName)this.$RichMediaEditorStore3=v.documentName;if(v.documentID)this.$RichMediaEditorStore7=v.documentID;if(v.documentTheme){this.$RichMediaEditorStore4=v.documentTheme;this.$RichMediaEditorStore21=v.documentTheme!==p&&v.documentTheme!==q;this.$RichMediaEditorStore22=this.$RichMediaEditorStore21?v.documentTheme:q;}if(v.elementsPayload&&v.elements){this.$RichMediaEditorStore42(v.elementsPayload,v.elements);}else if(v.elementsPayload)this.$RichMediaEditorStore43(v.elementsPayload);this.$RichMediaEditorStore32=!!(v.styleList&&v.styleList.includes('ENABLE_SWIPE_TO_OPEN'));this.$RichMediaEditorStore14=false;this.$RichMediaEditorStore25=false;this.$RichMediaEditorStore24=false;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_DOCUMENT_URL_DIALOG_SHOWN:this.$RichMediaEditorStore15=v.dialogShown;this.__emitChange();break;case c('RichMediaEditorActionTypes').TOGGLE_DOCUMENT_DEBUG_PANE_SHOWN:this.$RichMediaEditorStore14=!this.$RichMediaEditorStore14;this.__emitChange();break;case c('RichMediaEditorActionTypes').TOGGLE_WELCOME_PANE_SHOWN:this.$RichMediaEditorStore25=v.shown;if(v.shown){this.$RichMediaEditorStore27=null;this.$RichMediaEditorStore7='';this.$RichMediaEditorStore5=[];this.$RichMediaEditorStore23=0;}this.__emitChange();break;case c('RichMediaEditorActionTypes').TRIGGER_NUX_TOUR:this.$RichMediaEditorStore24=v.shown;this.__emitChange();break;case c('RichMediaEditorActionTypes').COLLAPSE_EXPANDED_ELEMENTS:if(!c('AdsCanvasEditorFeature').ads_canvas_editor_publish_redesign)break;aa=this.$RichMediaEditorStore5;for(var sa=0;sa<aa.length;++sa)aa[sa]=aa[sa].set('expanded',false);this.$RichMediaEditorStore26=true;this.__emitChange();break;case c('RichMediaEditorActionTypes').SELECT_ELEMENT_TO_ADD:var ta=v.elementTypeName;if(ta in this.$RichMediaEditorStore17){this.$RichMediaEditorStore17[ta]++;}else this.$RichMediaEditorStore17[ta]=1;this.__emitChange();break;case c('RichMediaEditorActionTypes').DESELECT_ELEMENT_TO_ADD:ta=v.elementTypeName;if(ta in this.$RichMediaEditorStore17){this.$RichMediaEditorStore17[ta]--;if(this.$RichMediaEditorStore17[ta]<=0)delete this.$RichMediaEditorStore17[ta];}this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_ADD_COMPONENT_DIALOG_SHOWN:this.$RichMediaEditorStore19=v.dialogShown;this.__emitChange();break;case c('RichMediaEditorActionTypes').ADD_ELEMENTS_SELECTED:this.$RichMediaEditorStore8=l.NONE;for(var ua in s){ta=s[ua];if(ta in this.$RichMediaEditorStore17&&this.$RichMediaEditorStore17[ta]>0){this.$RichMediaEditorStore44(ta);this.$RichMediaEditorStore6=o.UNSAVED;this.$RichMediaEditorStore9=false;}}if(this.$RichMediaEditorStore17[s.HEADER]>0){this.$RichMediaEditorStore16=0;}else if(!this.$RichMediaEditorStore17[s.STORE_LOCATOR]&&this.getHasStoreLocatorElement()){this.$RichMediaEditorStore16=this.$RichMediaEditorStore5.length-2;}else this.$RichMediaEditorStore16=this.$RichMediaEditorStore5.length-1;if(this.getHasFixedToBottomElement()&&this.$RichMediaEditorStore16>0)this.$RichMediaEditorStore16-=1;this.$RichMediaEditorStore17={};this.$RichMediaEditorStore19=false;this.$RichMediaEditorStore25=false;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_USE_CUSTOMIZE_THEME_COLOR:this.$RichMediaEditorStore21=v.useCustomizeThemeColor;if(v.useCustomizeThemeColor&&this.$RichMediaEditorStore4!==this.$RichMediaEditorStore22){this.$RichMediaEditorStore4=this.$RichMediaEditorStore22;this.$RichMediaEditorStore6=o.UNSAVED;}this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_CUSTOMIZE_THEME_COLOR:if(this.$RichMediaEditorStore21===false||this.$RichMediaEditorStore22!==v.customizeThemeColor){this.$RichMediaEditorStore22=v.customizeThemeColor;this.$RichMediaEditorStore4=v.customizeThemeColor;this.$RichMediaEditorStore21=true;this.$RichMediaEditorStore6=o.UNSAVED;}this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_SHOW_TEMPLATES:this.$RichMediaEditorStore20=v.showTemplates;this.__emitChange();break;case c('RichMediaEditorActionTypes').LOAD_CANVAS_TEMPLATE:this.$RichMediaEditorStore27=v.selectedTemplate;if(v.selectedTemplate)this.$RichMediaEditorStore45(v.selectedTemplate,v.elementsPayload,v.elements);this.$RichMediaEditorStore32=false;this.__emitChange();break;case c('RichMediaEditorActionTypes').CANVAS_TEMPLATE_SELECTED:this.$RichMediaEditorStore27=v.selectedTemplate;this.$RichMediaEditorStore25=false;if(v.selectedTemplate==='blank'){this.$RichMediaEditorStore19=true;this.$RichMediaEditorStore5=[];}if(v.selectedTemplate==='tour'){this.$RichMediaEditorStore24=true;this.$RichMediaEditorStore5=[];}var va=r.findIndex(function(wa){return wa.value===v.selectedTemplate;});if(va!==-1)this.$RichMediaEditorStore3=r[va].title.toString();this.$RichMediaEditorStore32=true;this.__emitChange();break;case c('RichMediaEditorActionTypes').BACK_TO_MENU:this.$RichMediaEditorStore2=null;this.$RichMediaEditorStore9=true;this.$RichMediaEditorStore25=true;this.$RichMediaEditorStore27=null;this.$RichMediaEditorStore32=true;this.$RichMediaEditorStore8=l.NONE;this.$RichMediaEditorStore3=h._("Untitled Canvas").toString();this.$RichMediaEditorStore4=p;this.$RichMediaEditorStore21=false;this.$RichMediaEditorStore22=q;this.$RichMediaEditorStore5=[];this.$RichMediaEditorStore6=o.UNSAVED;this.$RichMediaEditorStore14=false;this.$RichMediaEditorStore24=false;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_CANVAS_SOURCE:this.$RichMediaEditorStore29=v.source;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_CANVAS_PAGEID:this.$RichMediaEditorStore30=v.pageId;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_SWIPE_TO_OPEN_ENABLED:this.$RichMediaEditorStore32=v.value;this.$RichMediaEditorStore6=o.UNSAVED;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_SUPPORT_INSTAGRAM_ENABLED:this.$RichMediaEditorStore33=v.value;this.$RichMediaEditorStore6=o.UNSAVED;this.$RichMediaEditorStore35=m.FACEBOOK;this.__emitChange();break;}};t.prototype.getCanvasPageId=function(){return this.$RichMediaEditorStore30;};t.prototype.getCanvasPropertyList=function(){return this.$RichMediaEditorStore2;};t.prototype.getCanvasSource=function(){return this.$RichMediaEditorStore29;};t.prototype.getCanvasTags=function(){return this.$RichMediaEditorStore34;};t.prototype.getDocumentName=function(){return this.$RichMediaEditorStore3;};t.prototype.getDocumentTheme=function(){return this.$RichMediaEditorStore4;};t.prototype.getDocumentEditState=function(){return this.$RichMediaEditorStore6;};t.prototype.getDocumentElement=function(u){return this.$RichMediaEditorStore5.find(function(v){return v.id===u;});};t.prototype.getDocumentID=function(){return this.$RichMediaEditorStore7;};t.prototype.getDocumentElements=function(){return this.$RichMediaEditorStore5.slice();};t.prototype.getIsPublished=function(){return this.$RichMediaEditorStore10;};t.prototype.getPreviewFailed=function(){return this.$RichMediaEditorStore11;};t.prototype.getPreviewType=function(){return this.$RichMediaEditorStore35;};t.prototype.getSendingPreview=function(){return this.$RichMediaEditorStore13;};t.prototype.getSaveFailed=function(){return this.$RichMediaEditorStore12;};t.prototype.getDocumentURLDialogShown=function(){return this.$RichMediaEditorStore15;};t.prototype.getDocumentDebugPaneShown=function(){return this.$RichMediaEditorStore14;};t.prototype.getForceEditPublished=function(){return this.$RichMediaEditorStore18;};t.prototype.getCurrentEditingElementIndex=function(){return this.$RichMediaEditorStore16;};t.prototype.getSelectedElementsToAdd=function(){return babelHelpers['extends']({},this.$RichMediaEditorStore17);};t.prototype.getShowAddComponentDialog=function(){return this.$RichMediaEditorStore19;};t.prototype.getShowBackToMenuUnsavedDialog=function(){return this.$RichMediaEditorStore28;};t.prototype.getHasFixedToBottomElement=function(){var u=this.$RichMediaEditorStore5;if(u.length>0&&u[u.length-1].type===c('InstantShoppingDocumentElementType').BUTTON&&u[u.length-1].isFixedToBottom)return true;return false;};t.prototype.getHasHeaderElement=function(){var u=this.$RichMediaEditorStore5.filter(function(v){return v.type===c('InstantShoppingDocumentElementType').HEADER;});return u.length!==0;};t.prototype.getHasStoreLocatorElement=function(){var u=this.$RichMediaEditorStore5.filter(function(v){return v.type===c('InstantShoppingDocumentElementType').STORE_LOCATOR;});return u.length!==0;};t.prototype.getHasOfferElement=function(){var u=this.$RichMediaEditorStore5.filter(function(v){return v.type===c('InstantShoppingDocumentElementType').OFFER;});return u.length!==0;};t.prototype.getNumberOfScrubbableGIFs=function(){return this.$RichMediaEditorStore5.filter(function(u){return u.type===c('InstantShoppingDocumentElementType').SCRUBBABLE_GIF;}).length;};t.prototype.getUseCustomizeThemeColor=function(){return this.$RichMediaEditorStore21;};t.prototype.getCustomizeThemeColor=function(){return this.$RichMediaEditorStore22;};t.prototype.getErrorType=function(){return this.$RichMediaEditorStore8;};t.prototype.getSelectedTemplate=function(){return this.$RichMediaEditorStore27;};t.prototype.getShowTemplates=function(){return this.$RichMediaEditorStore20;};t.prototype.getSwipeToOpenEnabled=function(){return this.$RichMediaEditorStore32;};t.prototype.getSupportInstagramEnabled=function(){return this.$RichMediaEditorStore33;};t.prototype.isDefaultDocument=function(){return this.$RichMediaEditorStore9;};t.prototype.isWelcomePaneShown=function(){return this.$RichMediaEditorStore25;};t.prototype.isElementsCollapsed=function(){return this.$RichMediaEditorStore26;};t.prototype.showNuxTour=function(){return this.$RichMediaEditorStore24;};t.prototype.shouldEnableSwipeToOpenCheckbox=function(){var u=this.$RichMediaEditorStore5[this.$RichMediaEditorStore5.length-1];if(!u)return false;switch(u.type){case c('InstantShoppingDocumentElementType').PHOTO:if(u.layout==='fit_to_height'||u.layout==='expandable'||!u.link||u.destination===n.CANVAS||!c('RichMediaEditorUtil').isValidURL(u.link))return false;return true;case c('InstantShoppingDocumentElementType').BUTTON:if(!u.link||u.destination===n.CANVAS||!c('RichMediaEditorUtil').isValidURL(u.link))return false;return true;case c('InstantShoppingDocumentElementType').SLIDESHOW:if(u.layout==='fit_to_height'||!u.items.some(function(v){return v.link&&v.destination!==n.CANVAS&&c('RichMediaEditorUtil').isValidURL(v.link);}))return false;return true;default:return false;}};t.prototype.isNewUser=function(){return this.$RichMediaEditorStore31;};t.prototype.setIsNotNewUser=function(){if(this.$RichMediaEditorStore31){c('SimpleNUXMessage').markMessageSeenByUser(c('SimpleNUXMessageTypes').AD_CANVAS_EDITOR_TOOLBAR_NUX);this.$RichMediaEditorStore31=false;}};t.prototype.$RichMediaEditorStore39=function(){this.$RichMediaEditorStore46();this.$RichMediaEditorStore9=true;this.$RichMediaEditorStore32=true;this.$RichMediaEditorStore25=true;};t.prototype.$RichMediaEditorStore40=function(){this.$RichMediaEditorStore46();this.$RichMediaEditorStore9=false;this.$RichMediaEditorStore32=false;this.$RichMediaEditorStore25=false;};t.prototype.$RichMediaEditorStore46=function(){this.$RichMediaEditorStore2=null;this.$RichMediaEditorStore34=[];this.$RichMediaEditorStore10=false;this.$RichMediaEditorStore27=null;this.$RichMediaEditorStore28=false;this.$RichMediaEditorStore8=l.NONE;this.$RichMediaEditorStore31=!c('SimpleNUXMessage').hasUserSeenMessage(c('SimpleNUXMessageTypes').AD_CANVAS_EDITOR_TOOLBAR_NUX);this.$RichMediaEditorStore3=h._("Untitled Canvas").toString();this.$RichMediaEditorStore4=p;this.$RichMediaEditorStore21=false;this.$RichMediaEditorStore22=q;this.$RichMediaEditorStore7='';this.$RichMediaEditorStore5=[];this.$RichMediaEditorStore6=o.UNSAVED;this.$RichMediaEditorStore14=false;this.$RichMediaEditorStore24=false;};t.prototype.$RichMediaEditorStore36=function(u,v){var w=this.$RichMediaEditorStore5;for(var x=v;x<w.length;++x)w[x]=w[x].set('index',x+1);w.splice(v,0,u.set('index',v));};t.prototype.$RichMediaEditorStore44=function(u){var v=-1;if(u===s.HEADER){v=0;}else{v=this.$RichMediaEditorStore5.length;if(this.getHasFixedToBottomElement())v-=1;if(this.getHasStoreLocatorElement())v-=1;}var w=null;switch(u){case s.BUTTON:w=c('RichMediaButtonElement').createDefault(v);break;case s.CAROUSEL:w=c('RichMediaCarouselElement').createDefault(v);break;case s.CULTURAL_MOMENT_HEADER:w=c('RichMediaCulturalMomentHeaderElement').createDefault(v);break;case s.HEADER:w=c('RichMediaHeaderElement').createDefault(v);break;case s.PHOTO:w=c('RichMediaPhotoElement').createDefault(v);break;case s.TEXT:w=c('RichMediaTextElement').createDefault(v);break;case s.VIDEO:w=c('RichMediaVideoElement').createDefault(v);break;case s.SCRUBBABLE_GIF:w=c('RichMediaScrubbableGIFElement').createDefault(v);break;case s.PRODUCT_SET:w=c('RichMediaProductSetElement').createDefault(v);break;case s.TITLE_AND_DATE:w=c('RichMediaTitleAndDateElement').createDefault(v);break;case s.STORE_LOCATOR:w=c('RichMediaStoreLocatorElement').createDefault(v);break;case s.LOCAL_IMAGE:w=c('RichMediaLocalImageElement').createDefault(v);break;case s.CULTURAL_MOMENT_POPULAR_MEDIA:w=c('RichMediaCultureMomentPopularMediaElement').createDefault(v);break;case s.FB_TIPS:w=c('AdsCanvasDailyDialogueSVGElement').createDefault(v);break;}if(!w)return;w=this.$RichMediaEditorStore47(w);this.$RichMediaEditorStore36(w,v);};t.prototype.$RichMediaEditorStore43=function(u){this.$RichMediaEditorStore5=[];var v=JSON.parse(u).filter(function(y){return !!y.type;});this.$RichMediaEditorStore23=v.length;for(var w=0;w<v.length;++w){var x=v[w];x.expanded=!!x.expanded;x.advancedExpanded=!!x.advancedExpanded;x.index=w;switch(x.type){case c('InstantShoppingDocumentElementType').RICH_TEXT:x=c('RichMediaTextElement').createFromObject(x);break;case c('InstantShoppingDocumentElementType').PHOTO:x=c('RichMediaPhotoElement').createFromObject(x);break;case c('InstantShoppingDocumentElementType').VIDEO:x=c('RichMediaVideoElement').createFromObject(x);break;case c('InstantShoppingDocumentElementType').SCRUBBABLE_GIF:x=c('RichMediaScrubbableGIFElement').createFromObject(x);break;case c('InstantShoppingDocumentElementType').BUTTON:x=c('RichMediaButtonElement').createFromObject(x);break;case c('InstantShoppingDocumentElementType').SLIDESHOW:x.selectedItemIndex=0;x=c('RichMediaCarouselElement').createFromObject(x);break;case c('InstantShoppingDocumentElementType').HEADER:if(x.isCulturalMomentHeader){x=c('RichMediaCulturalMomentHeaderElement').createFromObject(x);}else x=c('RichMediaHeaderElement').createFromObject(x);break;case c('InstantShoppingDocumentElementType').ELEMENT_GROUP:x=c('RichMediaProductSetElement').createFromObject(x);break;case c('InstantShoppingDocumentElementType').STORE_LOCATOR:x=c('RichMediaStoreLocatorElement').createFromObject(x);break;}this.$RichMediaEditorStore5.push(this.$RichMediaEditorStore47(x));}};t.prototype.$RichMediaEditorStore42=function(u,v){this.$RichMediaEditorStore5=[];var w=JSON.parse(u);for(var x=w.length-1;x>=0;x--)if(!w[x].type){w.splice(x,1);v.splice(x,1);}this.$RichMediaEditorStore23=w.length;var y=w.length;if(y>0&&v[y-1].element_type==='FOOTER'){var z=-1;for(var aa=0;aa<y;aa++)if(w[aa].type===c('InstantShoppingDocumentElementType').BUTTON&&w[aa].isFixedToBottom===true){z=aa;break;}if(z!==-1){var ba=w[z];for(var ca=z;ca<y-1;ca++){w[ca]=w[ca+1];w[ca].index=ca;}w[y-1]=ba;w[y-1].index=y-1;}}for(var da=0;da<y;da++){var ea=w[da],fa=v[da],ga=ea;if(!ea.expanded)ga.expanded=false;if(!ea.advancedExpanded)ga.advancedExpanded=false;ga.index=da;switch(ga.type){case c('InstantShoppingDocumentElementType').RICH_TEXT:ga=c('RichMediaTextElement').createFromObject(ga);break;case c('InstantShoppingDocumentElementType').PHOTO:ga=c('RichMediaPhotoElement').createFromPayloadAndElementField(ea,fa);break;case c('InstantShoppingDocumentElementType').VIDEO:ga=c('RichMediaVideoElement').createFromObject(ga);break;case c('InstantShoppingDocumentElementType').SCRUBBABLE_GIF:ga=c('RichMediaScrubbableGIFElement').createFromObject(ga);break;case c('InstantShoppingDocumentElementType').BUTTON:ga=c('RichMediaButtonElement').createFromObject(ga);break;case c('InstantShoppingDocumentElementType').SLIDESHOW:ga.selectedItemIndex=0;ga=c('RichMediaCarouselElement').createFromPayloadAndElementField(ea,fa);break;case c('InstantShoppingDocumentElementType').HEADER:if(ea.isCulturalMomentHeader){ga=c('RichMediaCulturalMomentHeaderElement').createFromPayloadAndElementField(ea,fa);}else ga=c('RichMediaHeaderElement').createFromPayloadAndElementField(ea,fa);break;case c('InstantShoppingDocumentElementType').ELEMENT_GROUP:ga=c('RichMediaProductSetElement').createFromObject(ga);break;case c('InstantShoppingDocumentElementType').TITLE_AND_DATE:ga=c('RichMediaTitleAndDateElement').createFromObject(ga);break;case c('InstantShoppingDocumentElementType').STORE_LOCATOR:ga=c('RichMediaStoreLocatorElement').createFromObject(ga);break;case c('InstantShoppingDocumentElementType').LOCAL_IMAGE:ga=c('RichMediaLocalImageElement').createFromObject(ga);break;case c('InstantShoppingDocumentElementType').CULTURAL_MOMENT_POPULAR_MEDIA:ga=c('RichMediaCultureMomentPopularMediaElement').createFromObject(ga);break;case c('InstantShoppingDocumentElementType').DAILY_DIALOGUE_FB_TIPS:ga=c('AdsCanvasDailyDialogueSVGElement').createFromObject(ga);}this.$RichMediaEditorStore5.push(this.$RichMediaEditorStore47(ga));}};t.prototype.$RichMediaEditorStore41=function(u){for(var v=u.entries(),w=Array.isArray(v),x=0,v=w?v:v[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var y;if(w){if(x>=v.length)break;y=v[x++];}else{x=v.next();if(x.done)break;y=x.value;}var z=y,aa=z[0],ba=z[1],ca=c('RichMediaPhotoElement').createFromAdAsset(parseInt(aa,0),ba,null);this.$RichMediaEditorStore5.push(this.$RichMediaEditorStore47(ca));}this.$RichMediaEditorStore2=[c('CanvasProperty').WEBSITE_PARSING];};t.prototype.$RichMediaEditorStore47=function(u){return u.set('id',(++this.$RichMediaEditorStore23).toString());};t.prototype.$RichMediaEditorStore37=function(u,v,w){w.type===c('InstantShoppingDocumentElementType').SLIDESHOW||i(0);var x=void 0,y=new (c('Map'))();for(var z=0,aa=u.length;z<aa;++z){x=u[z];y[x.name]=x.name+'_'+Date.now();}var ba=this.$RichMediaEditorStore38(w.id,y);for(z=0;z<aa;++z){x=u[z];var ca=c('RichMediaEditorUploader').upload(v,[x],ba);w=w.addFile(y[x.name],ca);this.$RichMediaEditorStore1.push(ca);}return w;};t.prototype.$RichMediaEditorStore45=function(u,v,w){this.$RichMediaEditorStore9=true;this.$RichMediaEditorStore8=l.NONE;this.$RichMediaEditorStore6=o.UNSAVED;this.$RichMediaEditorStore3=h._("Untitled Canvas").toString();this.$RichMediaEditorStore14=false;this.$RichMediaEditorStore25=true;this.$RichMediaEditorStore24=false;if(v&&w){this.$RichMediaEditorStore42(v,w);}else{this.$RichMediaEditorStore5=[];this.$RichMediaEditorStore23=0;}};t.prototype.$RichMediaEditorStore38=function(u,v){return {onProgress:function(w,x){var y=this.getDocumentElement(u);if(y&&y.onFileProgress){y=y.onFileProgress(v[w.name],x);if(y)c('RichMediaEditorActions').editDocumentElement(y);}}.bind(this),onSuccess:function(w,x){var y=this.getDocumentElement(u);if(y&&y.onFileSuccess){y=y.onFileSuccess(v[w.name],x);if(y)c('RichMediaEditorActions').editDocumentElement(y);}}.bind(this),onError:function(w){var x=this.getDocumentElement(u);if(x&&x.onFileError){x=x.onFileError(v[w.name]);if(x)c('RichMediaEditorActions').editDocumentElement(x);}}.bind(this)};};f.exports=new t(c('AdsDispatcher'));}),null);
__d('AdsCanvasCapabilityConfig',['AdsCanvasCapabilities','immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j,k=c('immutable').Record,l=(j={},j[c('AdsCanvasCapabilities').CAN_ADD_CULTURAL_MOMENT_COMPONENTS]=false,j[c('AdsCanvasCapabilities').CAN_ADD_OFFER]=false,j[c('AdsCanvasCapabilities').CAN_ADD_PRODUCT_SET]=false,j[c('AdsCanvasCapabilities').CAN_ADD_STORE_LOCATOR]=false,j[c('AdsCanvasCapabilities').CAN_SAVE_INCOMPLETE_ELEMENTS]=false,j[c('AdsCanvasCapabilities').CAN_USE_CANVAS_EDITOR_TEMPLATEV0]=false,j[c('AdsCanvasCapabilities').CAN_USE_CANVAS_EDITOR_TEMPLATEV1]=false,j[c('AdsCanvasCapabilities').CAN_USE_LIGHT_WEIGHT_EDITING]=false,j[c('AdsCanvasCapabilities').CAN_USE_LINKED_CANVAS]=false,j[c('AdsCanvasCapabilities').CAN_USE_WEBISTE_PARSING]=false,j[c('AdsCanvasCapabilities').CAN_USE_PREVIEW_TAB]=false,j[c('AdsCanvasCapabilities').CAN_CREATE_INSTAGRAM_CANVAS]=false,j);h=babelHelpers.inherits(m,k(l));i=h&&h.prototype;m.prototype.hasCapability=function(n){return this.get(n);};function m(){h.apply(this,arguments);}f.exports=m;}),null);
__d('AdsCanvasBuilderDispatcher',['ReactDispatcher_DEPRECATED'],(function a(b,c,d,e,f,g){'use strict';f.exports=new (c('ReactDispatcher_DEPRECATED'))();}),null);
__d('AdsCanvasEditorFunnelLoggingConstants',[],(function a(b,c,d,e,f,g){'use strict';f.exports={FUNNEL_LOGGING_NAME:'WWW_CANVAS_EDITOR_FUNNEL',FUNNEL_LOGGING_EVENT:{ADD_ELEMENT:'add_element',BACK_TO_MENU:'back_to_menu',CREATE_POST:'create_post',CHANGE_CANVAS_TITLE:'change_canvas_title',CHANGE_ELEMENT_TITLE:'change_element_title',DUPLICATE:'duplicate',GET_URL:'get_url',GETTING_STARTED_GUIDE:'getting_started_guide',PREVIEW_FAIL:'preview_fail',PREVIEW_SELF:'preview_self',PREVIEW_SHARE:'preview_share',PUBLISH:'publish_canvas',PUBLISH_FAILURE:'publish_failure',REMOVE_ELEMENT:'remove_element',SAVE:'save_canvas',SAVE_INCOMPLETE_ELEMENTS:'save_incomplete_elements',SAVE_FAILURE:'save_failure',SWIPE_TO_OPEN_TOGGLED:'swipe_to_open_toggled',SWITCH_ELEMENT:'switch_element',TEMPLATE_PREVIEW_LAYOUT:'template_preview_layout',TEMPLATE_SELECT_LAYOUT:'template_select_layout',TEMPLATE_DOWNLOAD_LAYOUT:'template_download_layout',TOOLBAR_PUBLISH_CLICKED:'toolbar_publish_clicked',UPLOAD_VIDEO:'upload_video',UPLOAD_PHOTO:'upload_photo',VALIDATION_ERROR:'validation_error',WELCOMESCREEN_BLANKCANVAS:'welcome_screen_blankcanvas',WELCOMESCREEN_EXAMPLES:'welcome_screen_examples',WELCOMESCREEN_TEMPLATE:'welcome_screen_template',WELCOMESCREEN_TIPS:'welcome_screen_tips',WELCOMESCREEN_TOUR:'welcome_screen_tour'},FUNNEL_LOGGING_TIMEOUT:999999,FUNNEL_LOGGING_TAGS:{EDITOR_EXIT:'editor_exit',FIRST_TIME_USER:'first_time_user',IS_EMPLOYEE:'is_employee',LOAD_EXISTING_DOC_WITH_VALIDATION_ERRORS:'load_existing_doc_with_validation_errors',PAGE_HAS_NEVER_CREATED:'page_has_never_created',PAGE_HAS_NEVER_PUBLISHED:'page_has_never_published',WELCOMESCREEN_SHOWN:'welcome_screen_shown'}};}),null);
__d("XBusinessCanvasBuilderController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/canvas_builder\/{?doc_id}\/",{page_id:{type:"FBID",required:true},source:{type:"String",required:true},doc_id:{type:"FBID"},adaccount_id:{type:"String"}});}),null);
__d('AdsCanvasButtons.react',['ix','cx','fbt','AdsCanvasEditorFunnelLoggingConstants','AdsCanvasWebdriverIDs','FunnelLogger','Image.react','React','Tooltip','XBusinessCanvasBuilderController','XUIButton.react','XUIButtonGroup.react','adsGKCheck','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('AdsCanvasEditorFunnelLoggingConstants').FUNNEL_LOGGING_NAME,n=c('React').PropTypes;k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=l.constructor).call.apply(p,[this].concat(s)),this.$AdsCanvasButtons3=function(event){event.stopPropagation();if(!this.props.canOpenCanvasBuilderNewTab){this.props.onClickCreate&&this.props.onClickCreate();this.props.onClick('newCanvasDialog');c('FunnelLogger').addFunnelTag(m,this.props.source);}}.bind(this),this.$AdsCanvasButtons4=function(event){event.stopPropagation();if(!this.props.canOpenCanvasBuilderNewTab){this.props.onClickPreview&&this.props.onClickPreview();if(this.props.canvas){this.props.onClick(this.props.canvas.id);c('FunnelLogger').addFunnelTag(m,this.props.source);}}}.bind(this),q;}o.prototype.render=function(){return c('React').createElement(c('XUIButtonGroup.react'),{className:"_44jh"},this.$AdsCanvasButtons1(),this.$AdsCanvasButtons2());};o.prototype.$AdsCanvasButtons2=function(){var p=c('XBusinessCanvasBuilderController').getURIBuilder().setFBID('page_id',this.props.pageID).setString('source',this.props.source).setString('adaccount_id',this.props.adAccountID).getURI();return c('React').createElement(c('XUIButton.react'),{className:"_44jg",'data-testid':c('AdsCanvasWebdriverIDs').ADS_CANVAS_TYPEAHEAD_CREATE_BUTTON,disabled:this.props.disabled,href:this.props.canOpenCanvasBuilderNewTab?p:null,image:this.props.canOpenCanvasBuilderNewTab?c('React').createElement(c('Image.react'),{src:h("122688")}):c('React').createElement(c('Image.react'),{src:h("123418")}),label:j._("Plus"),labelIsHidden:true,target:this.props.canOpenCanvasBuilderNewTab?'_blank':null,onClick:this.$AdsCanvasButtons3});};o.prototype.$AdsCanvasButtons1=function(){var p=this.props.canvas;if(!p)return null;var q=c('XBusinessCanvasBuilderController').getURIBuilder().setFBID('page_id',this.props.pageID).setFBID('doc_id',p.id||null).setString('source',this.props.source).setString('adaccount_id',this.props.adAccountID).getURI();return c('React').createElement(c('XUIButton.react'),babelHelpers['extends']({className:"_44jg",'data-testid':c('AdsCanvasWebdriverIDs').ADS_CANVAS_TYPEAHEAD_PREVIEW_BUTTON,disabled:this.props.disabled||!p.element_payload&&!c('adsGKCheck')('canvas_builder_read_new_api'),href:this.props.canOpenCanvasBuilderNewTab?q:null,image:c('React').createElement(c('Image.react'),{src:h("122868")}),label:j._("Show"),labelIsHidden:true,target:this.props.canOpenCanvasBuilderNewTab?'_blank':null,onClick:this.$AdsCanvasButtons4},c('Tooltip').propsFor(!p.element_payload&&!c('adsGKCheck')('canvas_builder_read_new_api')?j._("Previews aren't currently supported for a Canvas created using the API."):null)));};o.propTypes={adAccountID:n.string,canOpenCanvasBuilderNewTab:n.bool,canvas:n.object,disabled:n.bool,source:n.string.isRequired,onClick:n.func.isRequired,onClickCreate:n.func,onClickPreview:n.func};f.exports=o;}),null);
__d('AdsCanvasCloseConfirmDialog.react',['cx','fbt','LayerFadeOnHide','LayerHideOnEscape','React','XUIDialog.react','XUIDialogBody.react','XUIDialogFooter.react','XUIDialogButton.react','XUIDialogTitle.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$AdsCanvasCloseConfirmDialog1=function(){this.props.onConfirm(this.props.dialogID);}.bind(this),o;}m.prototype.render=function(){return c('React').createElement(c('XUIDialog.react'),{behaviors:{LayerHideOnEscape:c('LayerHideOnEscape'),LayerFadeOnHide:c('LayerFadeOnHide')},shown:true,width:450},c('React').createElement(c('XUIDialogTitle.react'),{showCloseButton:true},i._("Unsaved Changes")),c('React').createElement(c('XUIDialogBody.react'),null,i._("Do you want to discard unsaved changes?")),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',label:i._("Cancel"),onClick:this.props.onCancel}),c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',className:"_4jy1",label:i._("Confirm"),onClick:this.$AdsCanvasCloseConfirmDialog1})));};m.propTypes={dialogID:l.string,onCancel:l.func.isRequired,onConfirm:l.func.isRequired};f.exports=m;}),null);
__d('AdsCanvasComposerDialogStore',['AdsActionTypes','AdsDispatcher','FluxStore','RichMediaEditorActionTypes'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.$AdsCanvasComposerDialogStore1={};this.$AdsCanvasComposerDialogStore2={};this.$AdsCanvasComposerDialogStore3=null;this.$AdsCanvasComposerDialogStore4=null;}j.prototype.__onDispatch=function(k){var l=k.action;switch(l.type){case c('AdsActionTypes').CANVAS.DOC_ID.LOADED:this.$AdsCanvasComposerDialogStore2[l.canvasID]=l.canvas;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_UNPUBLISHED_CANVAS:this.$AdsCanvasComposerDialogStore4=l.unpublishedCanvas;this.__emitChange();break;case c('RichMediaEditorActionTypes').RESET_UNPUBLISHED_CANVAS:this.$AdsCanvasComposerDialogStore4=null;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_DIALOG_SHOWN:this.$AdsCanvasComposerDialogStore1[l.dialogID]=l.dialogShown;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_DIALOG_CANVAS:this.$AdsCanvasComposerDialogStore2[l.dialogID]=l.canvas;this.__emitChange();break;case c('RichMediaEditorActionTypes').SET_SELECTED_CANVAS:this.$AdsCanvasComposerDialogStore3=l.selectedCanvas;this.__emitChange();break;}};j.prototype.getDialogShown=function(k){if(k in this.$AdsCanvasComposerDialogStore1){return this.$AdsCanvasComposerDialogStore1[k];}else return false;};j.prototype.getDialogCanvas=function(k){if(k in this.$AdsCanvasComposerDialogStore2){return this.$AdsCanvasComposerDialogStore2[k];}else return null;};j.prototype.getSelectedCanvas=function(){return this.$AdsCanvasComposerDialogStore3;};j.prototype.getUnpublishedCanvas=function(){return this.$AdsCanvasComposerDialogStore4;};f.exports=new j(c('AdsDispatcher'));}),null);
__d('AdsCanvasEditorFunnelLogging',['AdsCanvasEditorFeature','AdsCanvasEditorFunnelLoggingConstants','AdsCanvasSV','CurrentUser','FunnelLogger','RichMediaEditorDataDispatcher','RichMediaEditorStore','Set'],(function a(b,c,d,e,f,g){'use strict';var h=false,i={startFunnel:function j(){if(h)return;h=true;c('FunnelLogger').startFunnel(c('AdsCanvasEditorFunnelLoggingConstants').FUNNEL_LOGGING_NAME);c('FunnelLogger').setFunnelTimeout(c('AdsCanvasEditorFunnelLoggingConstants').FUNNEL_LOGGING_NAME,c('AdsCanvasEditorFunnelLoggingConstants').FUNNEL_LOGGING_TIMEOUT);if(c('CurrentUser').isEmployee())c('FunnelLogger').addFunnelTag(c('AdsCanvasEditorFunnelLoggingConstants').FUNNEL_LOGGING_NAME,c('AdsCanvasEditorFunnelLoggingConstants').FUNNEL_LOGGING_TAGS.IS_EMPLOYEE);c('RichMediaEditorDataDispatcher').getCanvasPageData(c('RichMediaEditorStore').getCanvasPageId(),null,c('FunnelLogger'));},logGKExposures:function j(k){for(var l in c('AdsCanvasEditorFeature'))if(Object.prototype.hasOwnProperty.call(c('AdsCanvasEditorFeature'),l)){var m=c('AdsCanvasEditorFeature')[l];if(m&&c('AdsCanvasSV').ads_canvas_user_gks_to_log.indexOf(l)!=-1)c('FunnelLogger').addFunnelTag(c('AdsCanvasEditorFunnelLoggingConstants').FUNNEL_LOGGING_NAME,l);}if(k)k.map(function(n){c('FunnelLogger').addFunnelTag(c('AdsCanvasEditorFunnelLoggingConstants').FUNNEL_LOGGING_NAME,n);});},endFunnel:function j(){if(!h)return;h=false;c('FunnelLogger').addFunnelTag(c('AdsCanvasEditorFunnelLoggingConstants').FUNNEL_LOGGING_NAME,c('AdsCanvasEditorFunnelLoggingConstants').FUNNEL_LOGGING_TAGS.EDITOR_EXIT);c('FunnelLogger').endFunnel(c('AdsCanvasEditorFunnelLoggingConstants').FUNNEL_LOGGING_NAME);c('RichMediaEditorStore').setIsNotNewUser();},parseAndMergeFunnelTags:function j(){if(!c('AdsCanvasEditorFeature').canvas_editor_logging_tagset)return [];var k=new (c('Set'))(),l=c('RichMediaEditorStore').getCanvasTags();l.forEach(function(p){k.add(p);});var m=c('FunnelLogger').getFunnelInstance(c('AdsCanvasEditorFunnelLoggingConstants').FUNNEL_LOGGING_NAME),n=m?m.getTags():null;if(!n)return Array.from(k);for(var o in n)k.add(o);return Array.from(k);}};f.exports=i;}),null);
__d('AdsUnpublishedCanvasCloseConfirmDialog.react',['cx','fbt','LayerFadeOnHide','LayerHideOnEscape','React','XUIDialog.react','XUIDialogBody.react','XUIDialogFooter.react','XUIDialogButton.react','XUIDialogTitle.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$AdsUnpublishedCanvasCloseConfirmDialog1=function(){this.props.onCloseReset();this.props.onConfirm(this.props.dialogID);}.bind(this),o;}m.prototype.render=function(){return c('React').createElement(c('XUIDialog.react'),{behaviors:{LayerHideOnEscape:c('LayerHideOnEscape'),LayerFadeOnHide:c('LayerFadeOnHide')},shown:true,width:450},c('React').createElement(c('XUIDialogTitle.react'),{showCloseButton:true},i._("Unpublished Canvas")),c('React').createElement(c('XUIDialogBody.react'),null,i._("You won't be able to use this Canvas in an ad until you publish it. You can still access a saved draft in Pages -> Publishing Tools -> Canvas. Do you want to close this draft without publishing it?")),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',label:i._("Cancel"),onClick:this.props.onCancel}),c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',className:"_4jy1",label:i._("Confirm"),onClick:this.$AdsUnpublishedCanvasCloseConfirmDialog1})));};m.propTypes={dialogID:l.string.isRequired,onCancel:l.func.isRequired,onCloseReset:l.func.isRequired,onConfirm:l.func.isRequired};f.exports=m;}),null);
__d('RichMediaLoggingStoreUtils',['CanvasCreationWaterfallTypedLogger','RichMediaEditorDataDispatcher','RichMediaEditorStore'],(function a(b,c,d,e,f,g){'use strict';var h={logRichMediaCreationEventWithLogger:function i(j,k){j.setCanvasID(k?k:c('RichMediaEditorStore').getDocumentID()||null).setCanvasName(c('RichMediaEditorStore').getDocumentName()).setIsNewUser(c('RichMediaEditorStore').isNewUser()).setPageID(c('RichMediaEditorStore').getCanvasPageId()).setSource(c('RichMediaEditorStore').getCanvasSource());c('RichMediaEditorDataDispatcher').getCanvasPageData(c('RichMediaEditorStore').getCanvasPageId(),j);}};f.exports=h;}),null);
__d('AdsCanvasButtonsContainer.react',['AdsAccountStore','AdsCanvasButtons.react','AdsCanvasCloseConfirmDialog.react','AdsCanvasComposerDialogStore','AdsCanvasEditorFunnelLogging','AdsFluxContainer','AdsUnpublishedCanvasCloseConfirmDialog.react','BootloadOnRender.react','CanvasCreationEvent','CanvasCreationWaterfallTypedLogger','CanvasSource','DOM','FluxStore','JSResource','LazyComponent.react','React','ReactDOM','RichMediaEditorActions','RichMediaEditorStore','RichMediaLoggingStoreUtils','adsGKCheck','emptyFunction','AdsCanvasEditorEnums'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('AdsCanvasEditorEnums').SaveStateEnum;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$AdsCanvasButtonsContainer2=function(q,r,s,t,u){if(r&&r.is_published||s===j.SAVED&&!this.props.mustPublish){return true;}else if(s===j.SAVED){c('ReactDOM').render(c('React').createElement(c('AdsUnpublishedCanvasCloseConfirmDialog.react'),{dialogID:q,onCancel:c('emptyFunction'),onCloseReset:t,onConfirm:u}),c('DOM').create('div'));return false;}else{c('ReactDOM').render(c('React').createElement(c('AdsCanvasCloseConfirmDialog.react'),{dialogID:q,onCancel:c('emptyFunction'),onConfirm:u}),c('DOM').create('div'));return false;}}.bind(this),this.$AdsCanvasButtonsContainer1=function(q){c('AdsCanvasEditorFunnelLogging').startFunnel();c('AdsCanvasEditorFunnelLogging').logGKExposures(this.props.extraGKsToLog);c('RichMediaEditorActions').setDialogShown(q,true);}.bind(this),this.$AdsCanvasButtonsContainer5=function(q,r){c('RichMediaEditorActions').setDialogShown(q,r);if(r){c('AdsCanvasEditorFunnelLogging').startFunnel();c('AdsCanvasEditorFunnelLogging').logGKExposures(this.props.extraGKsToLog);}else{c('AdsCanvasEditorFunnelLogging').endFunnel();c('RichMediaLoggingStoreUtils').logRichMediaCreationEventWithLogger(new (c('CanvasCreationWaterfallTypedLogger'))().setEventName(c('CanvasCreationEvent').EDITOR_EXIT));}}.bind(this),m;}k.getStores=function(){return [c('AdsAccountStore'),c('AdsCanvasComposerDialogStore'),c('RichMediaEditorStore')];};k.calculateState=function(l,m){var n=c('AdsCanvasComposerDialogStore').getDialogShown('newCanvasDialog'),o=null,p=false;if(m.canvasID)p=c('AdsCanvasComposerDialogStore').getDialogShown(m.canvasID);if(m.canvasID)o=c('AdsCanvasComposerDialogStore').getDialogCanvas(m.canvasID);var q=c('AdsAccountStore').getSelectedAccountID();return {adAccountID:q,canvas:o,createDialogShown:n,editDialogShown:p,editState:c('RichMediaEditorStore').getDocumentEditState()};};k.prototype.render=function(){var l=this.state.canvas,m=c('adsGKCheck')('page_open_canvas_builder_new_tab')&&this.props.source!==c('CanvasSource').CREATIVE_STUDIO,n=l?c('React').createElement(c('AdsCanvasButtons.react'),{adAccountID:this.state.adAccountID,canOpenCanvasBuilderNewTab:m,canvas:l,disabled:!!this.props.disabled,pageID:this.props.pageID,source:this.props.source,onClick:this.$AdsCanvasButtonsContainer1,onClickCreate:this.props.onClickCreate||c('emptyFunction'),onClickPreview:this.props.onClickPreview||c('emptyFunction')}):c('React').createElement(c('AdsCanvasButtons.react'),{adAccountID:this.state.adAccountID,canOpenCanvasBuilderNewTab:m,disabled:!!this.props.disabled,pageID:this.props.pageID,source:this.props.source,onClick:this.$AdsCanvasButtonsContainer1,onClickCreate:this.props.onClickCreate||c('emptyFunction')}),o={accessToken:this.props.accessToken,businessID:this.props.businessID,canvasCapabilityConfig:this.props.canvasCapabilityConfig,createPostEnabled:false,editState:this.state.editState,extraGKsToLog:this.props.extraGKsToLog,mustPublish:this.props.mustPublish,pageID:this.props.pageID,source:this.props.source,onBeforeHideDialog:this.$AdsCanvasButtonsContainer2,onCloseReset:this.props.onCloseReset,onConfirmClose:this.$AdsCanvasButtonsContainer3,onDuplicateReload:this.props.onDuplicateReload,onReloadCanvas:this.$AdsCanvasButtonsContainer4,onSaveCanvasSuccess:this.props.onSaveCanvasSuccess,onToggle:this.$AdsCanvasButtonsContainer5},p=c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),babelHelpers['extends']({dialogID:'newCanvasDialog',dialogShown:this.state.createDialogShown},o)),loader:c('JSResource')('AdsCanvasComposerDialog.react').__setRef('AdsCanvasButtonsContainer.react'),placeholder:c('React').createElement('span',null)}),q=null;if(l)q=c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),babelHelpers['extends']({canvas:l,dialogID:l.id,dialogShown:this.state.editDialogShown},o)),loader:c('JSResource')('AdsCanvasComposerDialog.react').__setRef('AdsCanvasButtonsContainer.react'),placeholder:c('React').createElement('span',null)});return c('React').createElement('div',null,n,p,q);};k.prototype.$AdsCanvasButtonsContainer3=function(l){c('AdsCanvasEditorFunnelLogging').endFunnel();c('RichMediaLoggingStoreUtils').logRichMediaCreationEventWithLogger(new (c('CanvasCreationWaterfallTypedLogger'))().setEventName(c('CanvasCreationEvent').EDITOR_EXIT));c('RichMediaEditorActions').setDialogShown(l,false);};k.prototype.$AdsCanvasButtonsContainer4=function(l,m){c('RichMediaEditorActions').setDialogCanvas(m.id,m);if(l!==m.id){c('RichMediaEditorActions').setDialogShown(l,false);c('RichMediaEditorActions').setDialogShown(m.id,true);}};f.exports=c('AdsFluxContainer').create(k,{withProps:true});}),null);
__d('AdsCanvasLabel.react',['cx','fbt','AdsCanvasConstants','AdsLabeledField.react','Link.react','React','emptyFunction'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);}l.prototype.render=function(){var m=this.props.hideLearnMore?'':c('React').createElement(c('Link.react'),{href:c('AdsCanvasConstants').CANVAS_LEARN_MORE_LINK,target:'_blank',onClick:this.props.onClickLearnMore||c('emptyFunction')},i._("Learn more"),'.'),n=i._("Canvas is a full-screen experience that opens in mobile when people click your ad. {=Learn more}{supplement}",[i.param('=Learn more',m),i.param('supplement',this.props.supplement?this.props.supplement:'')]);return c('React').createElement(c('AdsLabeledField.react'),{helpText:n,label:i._("Canvas")});};f.exports=l;}),null);
__d('AdsCanvasTypeaheadActionTypes',['ImmutableObject','keyMirrorRecursive'],(function a(b,c,d,e,f,g){'use strict';var h=new (c('ImmutableObject'))(c('keyMirrorRecursive')({DOC_NAME:{LOADED:'',LOAD_ERROR:''},REFRESH_TYPEAHEAD:true},'AdsCanvasTypeahead'));f.exports=h;}),null);
__d('AdsCanvasCollectionsThumbnail',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record({element_id:undefined,element_crops:undefined});h=babelHelpers.inherits(k,j);i=h&&h.prototype;function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('AdsCanvasCollectionsUtils',['AdsAPIAdgroupRecordUtils','AdsCanvasAdUtils','AdsCanvasCollectionsThumbnail','AdImageSpecs','AdsImageLegacy','immutable'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').List,i={convertThumbnailsFromAPI:function j(k){return new h(k.collection_thumbnails.map(function(l){var m,n=l.photo,o=n.height,p=n.width,q=0,r=0;if(o>p){r=(o-p)/2;o=p;}else{q=(p-o)/2;p=o;}return new (c('AdsCanvasCollectionsThumbnail'))({element_id:l.id,element_crops:(m={},m[c('AdImageSpecs').CANVAS_COLLECTIONS.cropKey]=[[q,r],[q+p,r+o]],m)});}));},convertToLegacyImage:function j(k,l){return new (c('AdsImageLegacy'))({crops:l,height:k.height,id:k.id,url:k.src,width:k.width});},isCanvasCollectionEligible:function j(k){if(!k.elements)return false;var l=0;k.elements.map(function(m){if(m.element_type==='PHOTO'&&m.element&&m.element.photo){l++;}else if(m.element_type==='SLIDESHOW'&&m.element&&m.element.child_elements)m.element.child_elements.map(function(n){if(n.element&&n.element.photo)l++;});});return l>=4;},isCanvasCollectionAd:function j(k,l){var m=c('AdsAPIAdgroupRecordUtils').isCollectionsAd(k,l),n=c('AdsCanvasAdUtils').isCanvasDestinationEnabled(k);return m&&n;}};f.exports=i;}),null);
__d('AdsCanvasTypeaheadActions',['AdsActionTypes','AdsCanvasBuilderDispatcher','AdsCanvasCollectionsUtils','AdsCanvasTypeaheadActionTypes','AdsDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h={docNameResultsLoaded:function i(j,k,l,m){l=l.filter(function(n){if(!n.name)return false;if(m.onlyPublished&&!n.is_published)return false;if(m.onlyCollectionsEligible&&!c('AdsCanvasCollectionsUtils').isCanvasCollectionEligible(n))return false;return true;});c('AdsCanvasBuilderDispatcher').dispatch({pageID:j,filter:k,results:l,type:c('AdsCanvasTypeaheadActionTypes').DOC_NAME.LOADED});},docNameLoadError:function i(j,k,l){c('AdsCanvasBuilderDispatcher').dispatch({pageID:j,error:l,filter:k,type:c('AdsCanvasTypeaheadActionTypes').DOC_NAME.LOAD_ERROR});},refreshTypeahead:function i(j){c('AdsCanvasBuilderDispatcher').dispatch({pageID:j,type:c('AdsCanvasTypeaheadActionTypes').REFRESH_TYPEAHEAD});},setPageCanvasSearchSource:function i(j,k){c('AdsDispatcher').handleUpdateFromViewAction({pageID:j,searchSource:k,type:c('AdsActionTypes').CANVAS.SET_SEARCH_SOURCE});},unpublishedCanvasDocUpdated:function i(){c('AdsDispatcher').handleUpdateFromViewAction({type:c('AdsActionTypes').CANVAS.UNPUBLISHED_DOC_UPDATED,timestamp:Date.now()});},setCanvasDocSelectedEntry:function i(j,k){c('AdsDispatcher').handleUpdateFromViewAction({canvasID:j,selectedDocEntry:k,type:c('AdsActionTypes').CANVAS.DOC_ID.SELECTED});},setCanvasUnpublishedDoc:function i(j){c('AdsDispatcher').handleUpdateFromViewAction({unpublishedCanvas:j,type:c('AdsActionTypes').CANVAS.UNPUBLISHED_DOC.SET});},resetCanvasUnpublishedDoc:function i(){c('AdsDispatcher').handleUpdateFromViewAction({type:c('AdsActionTypes').CANVAS.UNPUBLISHED_DOC.RESET});},canvasDocIDResultsLoaded:function i(j,k,l){c('AdsDispatcher').handleUpdateFromViewAction({canvasID:j,canvas:k,entry:l,type:c('AdsActionTypes').CANVAS.DOC_ID.LOADED});},canvasDocIDLoadError:function i(j,k){c('AdsDispatcher').handleUpdateFromViewAction({canvasID:j,error:k,type:c('AdsActionTypes').CANVAS.DOC_ID.LOAD_ERROR});}};f.exports=h;}),null);
__d('CanvasDataUtils',['adsGKCheck'],(function a(b,c,d,e,f,g){'use strict';var h=['bottom_padding','element_type','id','name','top_padding'],i={getFieldsForPagesCanvasList:function j(){return ['id','name','background_color','is_published','update_time','element_payload','elements{'+'element{'+'child_elements{element{photo{source}}},'+'photo{images}'+'},'+'name,'+'element_type'+'}','body_elements','canvas_link','last_editor','store_url','linked_documents','style_list','tags','property_list'];},getFieldsForButtonElement:function j(){return [].concat(h,['action','button_color','button_style','deep_link','font_family','font_size','line_height','rich_text','text_alignment','text_color']);},getFieldsForCarouselElement:function j(){return [].concat(h,['child_elements{'+this.getFieldsForPhotoElement().join()+'}','style']);},getFieldsForElementType:function j(){return ['element_type'];},getFieldsForFooterElement:function j(){return [].concat(h,['child_elements{'+this.getFieldsForButtonElement().join()+'}']);},getFieldsForHeaderElement:function j(){return [].concat(h,['background_color','child_elements{'+this.getFieldsForPhotoElement().join()+'}']);},getFieldsForPhotoElement:function j(){return [].concat(h,['action','deep_link','photo{'+'height,'+'id,'+'source,'+'width'+'}','style']);},getFieldsForProductSetElement:function j(){return [].concat(h,['max_products','product_catalog_id','product_set_id']);},getFieldsForStoreLocatorElement:function j(){return [].concat(h,['header_background_color','page_id','typeface']);},getFieldsForTextElement:function j(){return [].concat(h,['background_color','font_family','font_size','line_height','rich_text','text_alignment','text_color']);},getFieldsForVideoElement:function j(){return [].concat(h,['video{'+'id,'+'thumbnails{'+'height,'+'is_preferred,'+'uri,'+'width'+'}'+'}','style']);},isNewDocument:function j(k){return isNaN(k.getID());},isNewElement:function j(k){return isNaN(k.getID());}};f.exports=i;}),null);
__d('AdsCanvasTypeaheadDataManager',['AdsCanvasConstants','AdsCanvasTypeaheadActions','AdsGraphAPI','CanvasDataUtils','GraphSort'],(function a(b,c,d,e,f,g){'use strict';h.prototype.searchCanvasDoc=function(i,j,k,l){c('AdsGraphAPI').get(f.id).object('page',j).edge('rich_media_documents').get({access_token:i,fields:c('CanvasDataUtils').getFieldsForPagesCanvasList(),filtering:k.toAPI(),limit:c('AdsCanvasConstants').TYPE_AHEAD_LIMIT,sort:'name'+c('GraphSort').DESC,summary:true}).done(function(m){c('AdsCanvasTypeaheadActions').docNameResultsLoaded(j,k,m.data,l);},function(m){return c('AdsCanvasTypeaheadActions').docNameLoadError(j,k,m);});};function h(){}f.exports=new h();}),null);
__d('AdsCanvasTypeaheadSearchableEntry',['fbt','SearchableEntry'],(function a(b,c,d,e,f,g,h){'use strict';var i={createForCanvasDoc:function j(k){var l=k.is_published?h._("Finished"):h._("Draft");return new (c('SearchableEntry'))({auxiliaryData:k,subtitle:l,title:k.name,uniqueID:k.id});}};f.exports=i;}),null);
__d('AdsCanvasTypeaheadStore',['AdsCanvasBuilderDispatcher','AdsCanvasTypeaheadActionTypes','AdsCanvasTypeaheadDataManager','AdsCanvasTypeaheadSearchableEntry','AdsGenericFilter','AdsGenericFilterField','AdsGenericFilterFieldType','AdsGenericFilterOperator','AdsGenericFilterSet','FluxStore','LoadObject','LFUCache','ReactDispatcher_DEPRECATED','SearchableEntry'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=new (c('AdsGenericFilterField'))('name',c('AdsGenericFilterFieldType').STRING);h=babelHelpers.inherits(k,c('FluxStore'));i=h&&h.prototype;function k(l){i.constructor.call(this,l);this.$AdsCanvasTypeaheadStore1=new (c('LFUCache'))();}k.prototype.__onDispatch=function(l){switch(l.type){case c('AdsCanvasTypeaheadActionTypes').DOC_NAME.LOADED:return this.__handleResultsLoaded(l.pageID,l.filter,l.results,function(m){return c('AdsCanvasTypeaheadSearchableEntry').createForCanvasDoc(m);});case c('AdsCanvasTypeaheadActionTypes').DOC_NAME.LOAD_ERROR:return this.__handleError(l.pageID,l.filter,l.error);case c('AdsCanvasTypeaheadActionTypes').REFRESH_TYPEAHEAD:return this.$AdsCanvasTypeaheadStore2(l.pageID);}};k.prototype.searchDocByName=function(l,m,n,o){var p=new (c('AdsGenericFilterSet'))([new (c('AdsGenericFilter'))(j,c('AdsGenericFilterOperator').CONTAIN,l||'')]),q=this.$AdsCanvasTypeaheadStore3(m,p),r=this.$AdsCanvasTypeaheadStore1.get(q);if(!r){r=c('LoadObject').loading();this.$AdsCanvasTypeaheadStore1.set(q,r);c('AdsCanvasTypeaheadDataManager').searchCanvasDoc(n,m,p,o);}return r;};k.prototype.__handleError=function(l,m,n){var o=this.$AdsCanvasTypeaheadStore3(l,m);this.$AdsCanvasTypeaheadStore1.set(o,c('LoadObject').empty().setError(n));};k.prototype.__handleResultsLoaded=function(l,m,n,o){var p=this.$AdsCanvasTypeaheadStore3(l,m),q=n.map(o,this);this.$AdsCanvasTypeaheadStore1.set(p,c('LoadObject').empty().setValue(q));this.__emitChange();};k.prototype.$AdsCanvasTypeaheadStore2=function(l){var m=new (c('AdsGenericFilterSet'))([new (c('AdsGenericFilter'))(j,c('AdsGenericFilterOperator').CONTAIN,'')]),n=this.$AdsCanvasTypeaheadStore3(l,m),o=this.$AdsCanvasTypeaheadStore1.get(n);if(o)this.$AdsCanvasTypeaheadStore1.set(n,null);};k.prototype.$AdsCanvasTypeaheadStore3=function(l,m){return l+'-'+m.toString();};f.exports=new k(c('AdsCanvasBuilderDispatcher'));}),null);
__d('AdsCanvasSearchSource',['AdsCanvasTypeaheadStore','AdsFluxStoreSearchSource'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={onlyPublished:false,onlyCollectionsEligible:false};h=babelHelpers.inherits(k,c('AdsFluxStoreSearchSource'));i=h&&h.prototype;function k(l){var m=babelHelpers['extends']({},j,l.searchFilters),n=babelHelpers['extends']({getAllForEmptyQuery:true},l,{queryRequests:[{store:c('AdsCanvasTypeaheadStore'),getData:function o(p){return c('AdsCanvasTypeaheadStore').searchDocByName(p,l.pageID,l.accessToken,m);}}]});i.constructor.call(this,n);}f.exports=k;}),null);
__d('AdsCanvasTypeahead.react',['cx','AdsCanvasButtonsContainer.react','AdsCanvasLabel.react','AdsCanvasWebdriverIDs','ContextualLayerHideOnScrollOut','ContextualLayerUpdateOnScroll','Grid.react','React','XUITypeahead.react','XUITypeaheadView.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('Grid.react').GridItem;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m){j.constructor.call(this,m);this.$AdsCanvasTypeahead8=function(event){this.props.onQueryChange&&this.props.onQueryChange();this.setState({queryString:event.target.value});}.bind(this);this.$AdsCanvasTypeahead7=function(){this.$AdsCanvasTypeahead2(this.props.selectedEntry);}.bind(this);this.$AdsCanvasTypeahead9=function(){var n=this.props.selectedEntry;this.setState({queryString:n?n.getTitle():''});}.bind(this);this.$AdsCanvasTypeahead10=function(n){if(this.props.onEntrySelect)this.props.onEntrySelect(n,this.props.blockerArgs);this.setState({queryString:n.getTitle()});}.bind(this);this.state={queryString:this.$AdsCanvasTypeahead1(m.selectedEntry)};}l.prototype.componentWillReceiveProps=function(m){if(m.selectedEntry!==this.props.selectedEntry)this.$AdsCanvasTypeahead2(m.selectedEntry);};l.prototype.render=function(){var m=this.$AdsCanvasTypeahead3(),n=this.props.shouldHideCanvasCreateButton?c('React').createElement('div',{className:"_39gc"},m):c('React').createElement(c('Grid.react'),{className:"_39gb",cols:2},c('React').createElement(k,{className:"_39gc"},m),c('React').createElement(k,null,this.$AdsCanvasTypeahead4()));return c('React').createElement('div',{'data-testid':c('AdsCanvasWebdriverIDs').ADS_CANVAS_TYPEAHEAD},this.$AdsCanvasTypeahead5(),n);};l.prototype.$AdsCanvasTypeahead3=function(){return c('React').createElement(c('XUITypeahead.react'),{autoHighlight:this.$AdsCanvasTypeahead6(),className:!!this.props.disabled?"_4i0b":'',disabled:this.props.disabled,focusedOnInit:this.props.focusedOnInit,placeholder:this.props.placeholder,presenter:{ViewRenderer:c('XUITypeaheadView.react'),useLayer:true,layerBehaviors:{ContextualLayerHideOnScrollOut:c('ContextualLayerHideOnScrollOut'),ContextualLayerUpdateOnScroll:c('ContextualLayerUpdateOnScroll')}},queryString:this.state.queryString,ref:'typeahead',searchSource:this.props.searchSource,searchSourceOptions:this.props.searchSourceOptions,showEntriesOnFocus:true,tallInput:true,textInputDataTestID:c('AdsCanvasWebdriverIDs').ADS_CANVAS_TYPEAHEAD_INPUT,xuiError:this.props.error,xuiErrorPosition:'above',onBlur:this.$AdsCanvasTypeahead7,onChange:this.$AdsCanvasTypeahead8,onFocus:this.$AdsCanvasTypeahead9,onSelectAttempt:this.$AdsCanvasTypeahead10});};l.prototype.$AdsCanvasTypeahead4=function(){if(this.props.shouldHideCanvasCreateButton)return null;return c('React').createElement(c('AdsCanvasButtonsContainer.react'),{accessToken:this.props.accessToken,businessID:this.props.businessID,canvasCapabilityConfig:this.props.canvasCapabilityConfig,canvasID:this.props.canvasID,disabled:this.props.disabled,extraGKsToLog:this.props.extraGKsToLog,mustPublish:this.props.mustPublish,pageID:this.props.pageID,source:this.props.source,onClickCreate:this.props.onClickCreate,onClickPreview:this.props.onClickPreview,onCloseReset:this.props.onCloseReset,onDuplicateReload:this.props.onDuplicateReload,onSaveCanvasSuccess:this.props.onSaveCanvasSuccess});};l.prototype.$AdsCanvasTypeahead5=function(){if(this.props.hideHelpText)return null;return c('React').createElement(c('AdsCanvasLabel.react'),{supplement:this.props.labelSupplement,onClickLearnMore:this.props.onClickLearnMore});};l.prototype.$AdsCanvasTypeahead6=function(){return !!this.state.queryString;};l.prototype.$AdsCanvasTypeahead1=function(m){return m?m.getTitle():'';};l.prototype.$AdsCanvasTypeahead2=function(m){this.setState({queryString:this.$AdsCanvasTypeahead1(m)});};f.exports=l;}),null);
__d('AudienceManagerEngagementVideoSelectionError.react',['cx','ix','BUIAdoptionXUIGrayText.react','CenteredContainer.react','Image.react','Link.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);}l.prototype.$AudienceManagerEngagementVideoSelectionError1=function(){if(!this.props.subtitleLabel)return null;return c('React').createElement(c('BUIAdoptionXUIGrayText.react'),{display:'block',shade:'light'},this.props.subtitleLabel);};l.prototype.$AudienceManagerEngagementVideoSelectionError2=function(){if(!this.props.actionLabel)return null;if(!this.props.onActionClick)return c('React').createElement(c('BUIAdoptionXUIGrayText.react'),{display:'block',shade:'light'},this.props.actionLabel);return c('React').createElement(c('Link.react'),{onClick:this.props.onActionClick},c('React').createElement('div',{display:'block'},this.props.actionLabel));};l.prototype.render=function(){return c('React').createElement(c('CenteredContainer.react'),{horizontal:true,vertical:true},c('React').createElement(c('Image.react'),{src:i("76143")}),c('React').createElement(c('BUIAdoptionXUIGrayText.react'),{className:"_3-8x",display:'block',shade:'light',weight:'bold'},this.props.mainLabel),this.$AudienceManagerEngagementVideoSelectionError1(),this.$AudienceManagerEngagementVideoSelectionError2());};f.exports=l;}),null);
__d('AdsNumberInput.react',['cx','fbt','AdsTextInput.react','React','intlNumUtils','joinClasses','mergeDeep'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={focused:false,formatError:false},this.$AdsNumberInput1=function(){this.setState({focused:false,formatError:false});}.bind(this),this.$AdsNumberInput2=function(s){var t=this.$AdsNumberInput5(s);if(t>=0)s=s.substring(0,t);this.props.onChange(c('intlNumUtils').parseNumber(s));}.bind(this),this.$AdsNumberInput3=function(){this.setState({focused:true});}.bind(this),this.$AdsNumberInput4=function(s){var t=this.$AdsNumberInput5(s),u=t>=0;this.setState({formatError:u});}.bind(this),this.$AdsNumberInput5=function(s){return s.search(/[^0-9\,\.\ ]/);},o;}m.prototype.render=function(){var n=this.props.errors||{};if(this.state.formatError)n=c('mergeDeep')(n,{NON_NUMERIC_INPUT:i._("This input can only contain numbers")});var o=this.props.value;if(o!=null)o=c('intlNumUtils').formatNumber(o);if(o&&!this.state.focused){var p=this.props.prefix||'',q=this.props.suffix||'';o=p+o+q;}var r="_x62";return c('React').createElement(c('AdsTextInput.react'),babelHelpers['extends']({},this.props,{className:c('joinClasses')(this.props.className,r),errors:n,value:o,onBlur:this.$AdsNumberInput1,onChange:this.$AdsNumberInput2,onFocus:this.$AdsNumberInput3,onImmediateChange:this.$AdsNumberInput4}));};m.propTypes={errors:l.object,prefix:l.string,suffix:l.string,value:l.number,onChange:l.func.isRequired};f.exports=m;}),null);
__d('DistrictTargetingUtils',['fbt'],(function a(b,c,d,e,f,g,h){'use strict';var i={getComposerNUXContent:function j(){return h._("New! Set the visibility of any post so that only people in your district can see it on your Page.");}};f.exports=i;}),null);
__d('IssueModuleConsts',[],(function a(b,c,d,e,f,g){'use strict';var h={ADD:'new',MATCH:'match',OTHER:'other'},i={INITIAL:'initial',READY:'ready',UPLOADING:'uploading',UPLOADED:'uploaded',POSTING:'posting',POSTED:'posted',ERROR:'error'},j={HEIGHT:160,WIDTH:280};f.exports={TOPIC_OPTION_TYPE:h,VIDEO_UPLOAD_STAGE:i,VIDEO_DIMENSION:j};}),null);
__d('IssueModuleStringUtils',['fbt','IssueModuleConsts','SearchableEntry'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('IssueModuleConsts').TOPIC_OPTION_TYPE,j={getCancelButtonLabelFBT:function k(){return h._("Cancel");},getSaveButtonLabelFBT:function k(){return h._("Save");},getEditButtonTooltipFBT:function k(){return h._("Edit");},getUserGuideLinkFBT:function k(){return h._("See tips for writing issue positions.");},getCreationDialogTitleFBT:function k(){return h._("Create Issue Position");},getEditDialogTitleFBT:function k(){return h._("Edit Issue Position");},getIssueLabelFBT:function k(){return h._("Issue");},getTopicLabelFBT:function k(){return h._("Topic");},getTopicPlaceholder:function k(){return h._("Search for topic...");},getTextLabelFBT:function k(){return h._("Position");},getAddVideoButtonLabelFBT:function k(){return h._("Add Video");},getAddVideoLinkLabelFBT:function k(){return h._("Change");},getCancelVideoUploadLabelFBT:function k(){return h._("Cancel");},getRemoveVideoLabelFBT:function k(){return h._("Remove");},getVideoLabelFBT:function k(){return h._("Video (Optional)");},getVideoTooltipFBT:function k(l){return h._({"*":"{max video length in second} seconds max","268435456":"1 second max"},[h.plural(l,'max video length in second')]);},getTopicOptionDivider:function k(){return h._("Other topics");},getAddNewTopicTypeaheadItem:function k(l){return h._("Add {topic}...",[h.param('topic',l)]);},getStancePlaceholder:function k(l){if(l){var m=l.getType()===i.ADD?l.getSubtitle():l.getTitle();return h._("What's your position on {topic}? Be as specific as possible about what action you plan to take.",[h.param('topic',m)]);}return h._("What's your position? Be as specific as possible about what action you plan to take.");},getInvalidVideoFileDialogTitle:function k(){return h._("Invalid video");},getUnsupportedFileTypeDialogBody:function k(){return h._("Only 1 video file is supported!");},getVideoEncodingProgressText:function k(){return h._("Adding video...");},getInvalidVideoLengthDialogTitle:function k(){return h._("Invalid video length");},getInvalidVideoLengthDialogBody:function k(){return h._("Video is too long.");},getEditOpinionMenu:function k(){return h._("Edit");},getDeleteOpinionMenu:function k(){return h._("Delete");},getReportOpinionMenu:function k(){return h._("Report");},getPermalinkOpinionMenu:function k(){return h._("Permalink");},getRemoveOpinionDialogTitle:function k(){return h._("Delete Issue Position");},getRemoveOpinionDialogBody:function k(){return h._("Are you sure you want to delete this issue position?");},getErrorDialogTitle:function k(){return h._("Error");},getErrorDialogBody:function k(){return h._("Something is wrong, please try again later.");},getCloseEditDialogTitle:function k(){return h._("Discard Changes");},getCloseEditDialogBody:function k(){return h._("Are you sure you want to discard your changes?");},getPreviewUnitTitle:function k(){return h._("PREVIEW");},getCreationStoryOptionLabel:function k(){return h._("Also publish as a post");},getMultilingualExplanation:function k(l){return h._("You must enter your issue position in {language} . You can also publish your position in other languages. People will see your position in their set language if you've entered it in that language.",[h.param('language',l)]);},getMultilingualPlaceholder:function k(l){return h._("Enter your issue position in {language} ...",[h.param('language',l)]);},getTipsHeader:function k(){return h._("Tips:");},getPopularTopicTip:function k(l,m,n){return h._({"*":"Popular in {issue name}: {number} politicians have created a position on {topic}.","268435456":"Popular in {issue name}: 1 politician have created a position on {topic}."},[h.param('issue name',l),h.plural(n,'number'),h.param('topic',m)]);},getPopularTopicUpsell:function k(l){return h._("Add your position on {topic}",[h.param('topic',l)]);},getNoIssueSelected:function k(){return h._("Choose Issue");},getIssueManagerDialogTitle:function k(){return h._("Add Issues");},getIssueManagerDialogDescription:function k(){return h._("Choose top-level issues to build your platform. You can add positions for each issue next.");},getIssueManagerDialogSelectedIssuesTitle:function k(){return h._("YOUR PLATFORM");},getCustomIssueTitle:function k(){return h._("Custom");},getCustomIssuePlaceholder:function k(){return h._("Enter issue name...");},getDeselectIssueWarningTitle:function k(){return h._("Remove Issues and Delete Positions?");},getDeselectIssueWarningContent:function k(){return h._("Removing an issue will also delete any positions for that issue.");},getDeselectIssueWarningAction:function k(){return h._("Remove");},getInteractionAction:function k(){return h._("Share");},getInteractionUnitTooltip:function k(l){return h._("Starting {date} your issues can be shared in posts.",[h.param('date',l)]);},getSentimentInteractionAction:function k(){return h._("Share why you agree or disagree");},getSentimentAgreeAction:function k(){return h._("I agree because...");},getSentimentDisagreeAction:function k(){return h._("I disagree because...");},getTaggerNux:function k(){return h._("Tag issues that appear in your post.");}};f.exports=j;}),null);
__d('CommerceCurrencyInputUtils',['Currency'],(function a(b,c,d,e,f,g){'use strict';var h=100,i={convertPEFormatToPBFormat:function j(k,l){var m=k;if(m){var n=c('Currency').getOffset(l);m=n>0?m*n/h:m;}return m;},convertPBFormatToPEFormat:function j(k,l){var m=k;if(m){var n=c('Currency').getOffset(l);m=n>0?m*h/n:m;}return m;}};f.exports=i;}),null);
__d('PageCommerceStripeRedirectConfirmationDialog.react',['cx','fbt','React','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogFooter.react','XUIDialogHeader.react','XUIDialogHeaderTitle.react','XUIText.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=500;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={dialogShown:false},this.show=function(){this.setState({dialogShown:true});}.bind(this),this.hide=function(){this.setState({dialogShown:false});}.bind(this),p;}n.prototype.render=function(){if(!this.state.dialogShown)return null;return c('React').createElement(c('XUIDialog.react'),{width:m,onToggle:function(o){return this.setState({dialogShown:o});}.bind(this),shown:this.state.dialogShown},c('React').createElement(c('XUIDialogHeader.react'),null,c('React').createElement(c('XUIDialogHeaderTitle.react'),null,i._("You Have Pending Orders"))),c('React').createElement(c('XUIDialogBody.react'),{className:"_2ph_"},c('React').createElement(c('XUIText.react'),null,i._("Your shop has orders that haven't been shipped yet. If you connect to a different Stripe account, you'll no longer be able to receive payment for those orders. Consider completing and shipping your pending orders before changing the Stripe account for your shop."))),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{label:i._("Change Stripe Account"),use:'default',onClick:this.props.onContinue}),c('React').createElement(c('XUIDialogButton.react'),{label:i._("Cancel"),use:'confirm',onClick:this.hide})));};n.propTypes={onContinue:l.func.isRequired};f.exports=n;}),null);
__d("XCommerceSelfServeHasPendingOrdersQueryController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/commerce\/self-serve\/has-pending-orders\/",{page_id:{type:"Int",required:true}});}),null);
__d("XStripeOnboardingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/payment\/stripeconnect\/onboarding\/",{page_id:{type:"Int",required:true},payment_type:{type:"Enum",required:true,enumType:1}});}),null);
__d('CommerceStripeConnectLink.react',['cx','AsyncRequest','DOM','DTSG','Link.react','PageCommerceStripeRedirectConfirmationDialog.react','React','ReactDOM','XStripeOnboardingController','XCommerceSelfServeHasPendingOrdersQueryController','XUIText.react','PaymentsTypeEnum'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$CommerceStripeConnectLink1=function(r){var s=c('XCommerceSelfServeHasPendingOrdersQueryController').getURIBuilder().setInt('page_id',this.props.pageID).getURI();new (c('AsyncRequest'))().setURI(s).setHandler(function(t){var u=t.payload.has_pending_orders;if(u){var v=c('ReactDOM').render(c('React').createElement(c('PageCommerceStripeRedirectConfirmationDialog.react'),{onContinue:function w(){return r();}}),c('DOM').create('div'));v.show();}else r();}).send();}.bind(this),n;}l.prototype.render=function(){'use strict';var m=c('XStripeOnboardingController').getURIBuilder().setInt('page_id',this.props.pageID).setEnum('payment_type',c('PaymentsTypeEnum').BOF).getURI();return c('React').createElement('span',null,c('React').createElement('form',{className:"hidden_elem",action:m,method:'post',ref:'connectStripeForm',target:'_blank'},c('React').createElement('input',{type:'hidden',name:'fb_dtsg',value:c('DTSG').getToken()})),c('React').createElement(c('Link.react'),{onClick:this.$CommerceStripeConnectLink1.bind(this,function(){return this.refs.connectStripeForm.submit();}.bind(this))},c('React').createElement(c('XUIText.react'),{size:'small'},this.props.content)));};l.propTypes={confirmationURI:k.string,content:k.node.isRequired,pageID:k.string.isRequired};f.exports=l;}),null);
__d('CommerceExceptionHandlerMixin.react',['fbt','AsyncRequest','CommerceErrorCode','CommerceErrorNotice.react','CommerceStripeConnectLink.react','React','URI','XCommerceResponse'],(function a(b,c,d,e,f,g,h){'use strict';var i={getInitialState:function j(){return {xResponse:null};},sendAsync:function j(k,l,m,n){new (c('AsyncRequest'))(k).setData(l||{}).setHandler(function(o){var p=new (c('XCommerceResponse'))(o.payload);this.setState({xResponse:p});if(!p.hasErrors()){m&&m(o);}else n&&n(o);}.bind(this)).setErrorHandler(function(o){this.setGeneralError(c('CommerceErrorCode').COMMERCE__GENERIC_EXCEPTION);n&&n(o);}.bind(this)).send();},setGeneralError:function j(k){var l=this.state.xResponse?this.state.xResponse:new (c('XCommerceResponse'))({});l.setGeneralError(k);this.setState({xResponse:l});},addFieldError:function j(k,l){var m=this.state.xResponse?this.state.xResponse:new (c('XCommerceResponse'))({});m.addFieldError(k,l);this.setState({xResponse:m});},_getFullErrorMessage:function j(k){if(!k)return null;if(k.code.toString()===c('CommerceErrorCode').COMMERCE__STRIPE_DEFERRED_ACCOUNT_EMAIL_USED.code.toString()){var l=h._("connect your shop with an existing account");return h._("A Stripe account with this email address already exists. Please use a different email address or {connect to a different Stripe account link}.",[h.param('connect to a different Stripe account link',c('React').createElement(c('CommerceStripeConnectLink.react'),{pageID:this.props.pageID,content:l}))]);}return k.title+': '+k.message;},hasErrors:function j(){return !!this.state.xResponse&&this.state.xResponse.hasErrors();},hasGeneralError:function j(){return !!this.state.xResponse&&this.state.xResponse.hasGeneralError();},hasFieldErrors:function j(){return !!this.state.xResponse&&this.state.xResponse.hasFieldErrors();},renderAllErrors:function j(){var k=this.state.xResponse,l=[];if(this.hasFieldErrors()){var m=k.getFieldErrors();m.forEach(function(o){return l.push(o);});}if(this.hasGeneralError())l.push(k.getGeneralError());var n=l.map(function(o){return this._getFullErrorMessage(o);}.bind(this));return this.renderErrorMessages(n);},renderGeneralError:function j(){if(this.hasGeneralError()){return this.renderErrorMessages([this.getGeneralErrorMessage()]);}else return null;},renderErrorMessages:function j(k){if(k.length===0){return null;}else{var l=c('React').createElement('ul',null,k.map(function(m,n){return c('React').createElement('li',{key:n},m);}));return c('React').createElement(c('CommerceErrorNotice.react'),{error:l});}},getGeneralErrorMessage:function j(){if(this.hasGeneralError()){var k=this.state.xResponse.getGeneralError();return this._getFullErrorMessage(k);}else return null;},getFieldErrorMessage:function j(k){if(!this.hasFieldErrors())return null;return this._getFullErrorMessage(this.state.xResponse.getFieldErrors()[k]);}};f.exports=i;}),null);
__d('BOFSellerLogger',['BanzaiLogger','Event'],(function a(b,c,d,e,f,g){'use strict';var h='BOFSellerLoggerConfig',i={log:function j(k,l,m){m.event=k;m.seller_profile_id=l;c('BanzaiLogger').log(h,m);},initClickListener:function j(k,l,m,n){c('Event').listen(k,'click',function(){return this.log(l,m,n);}.bind(this));}};f.exports=i;}),null);
__d('ProductTaggingTranslations',['fbt'],(function a(b,c,d,e,f,g,h){'use strict';var i={getAddProductTitle:function j(k){return k?h._("Add Product"):h._("New Product");},getAddProductSubtitle:function j(k){return k?h._("Tag and add to your shop."):h._("Tag a new product in your posts.");}};f.exports=i;}),null);
__d('CommerceSelfServeProductTaxRatesTable.react',['ix','cx','fbt','invariant','xuiglyph','AdsNumberInput.react','CommerceUSAStates','Image.react','React','SUIAtlasTheme','SUICheckboxInput.react','SUITextInput.react','XUIButton.react','XUITable.react'],(function a(b,c,d,e,f,g,h,i,j,k,l){var m,n,o=c('React').PropTypes;m=babelHelpers.inherits(p,c('React').Component);n=m&&m.prototype;function p(){var q,r;'use strict';for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=n.constructor).call.apply(q,[this].concat(t)),this.state={newRateLocationError:false,newTaxRateLocation:'',newTaxRatePercentage:0,newIsAppliedToShipping:false,showNewRateRow:false},this.$CommerceSelfServeProductTaxRatesTable1=function(v,w){return c('React').createElement('tr',{key:'tax_rate_'+v},c('React').createElement('td',null,c('React').createElement('span',null,v)),c('React').createElement('td',null,c('React').createElement(c('AdsNumberInput.react'),{value:this.$CommerceSelfServeProductTaxRatesTable3(w.tax_rate,3),suffix:'%',className:"_2263",onChange:function(x){if(x!==null){x=this.$CommerceSelfServeProductTaxRatesTable4(x,3);this.$CommerceSelfServeProductTaxRatesTable5(v,x,w.is_applied_to_shipping);}}.bind(this)})),c('React').createElement('td',null,c('React').createElement(c('SUICheckboxInput.react'),{label:w.is_applied_to_shipping?j._("Yes"):j._("No"),onChange:function(x){this.$CommerceSelfServeProductTaxRatesTable5(v,w.tax_rate,x);}.bind(this),theme:c('SUIAtlasTheme'),value:w.is_applied_to_shipping})),c('React').createElement('td',{className:"_5rpt"},c('React').createElement(c('Image.react'),{className:"_ksy _3-9b",src:h("88982"),onClick:function(){this.$CommerceSelfServeProductTaxRatesTable6(v);}.bind(this)})));}.bind(this),this.$CommerceSelfServeProductTaxRatesTable2=function(){return c('React').createElement('tr',{key:'new_tax_rate_row'},c('React').createElement('td',null,c('React').createElement(c('SUITextInput.react'),{className:"_2263",onChange:function(v){this.setState({newTaxRateLocation:v.toUpperCase()});}.bind(this),theme:c('SUIAtlasTheme'),value:this.state.newTaxRateLocation})),c('React').createElement('td',null,c('React').createElement(c('AdsNumberInput.react'),{value:this.$CommerceSelfServeProductTaxRatesTable3(this.state.newTaxRatePercentage,3),suffix:'%',className:"_2263",onChange:function(v){if(v!==null){v=this.$CommerceSelfServeProductTaxRatesTable4(v,3);this.setState({newTaxRatePercentage:v});}}.bind(this)})),c('React').createElement('td',null,c('React').createElement(c('SUICheckboxInput.react'),{label:this.state.newIsAppliedToShipping?j._("Yes"):j._("No"),onChange:function(v){this.setState({newIsAppliedToShipping:v});}.bind(this),theme:c('SUIAtlasTheme'),value:this.state.newIsAppliedToShipping})),c('React').createElement('td',{className:"_5rpt"},c('React').createElement(c('XUIButton.react'),{label:j._("Confirm"),use:'confirm',disabled:!this.$CommerceSelfServeProductTaxRatesTable7(this.state.newTaxRateLocation),onClick:this.$CommerceSelfServeProductTaxRatesTable8})));}.bind(this),this.$CommerceSelfServeProductTaxRatesTable6=function(v){var w=this.$CommerceSelfServeProductTaxRatesTable9(v),x=this.props.taxRates;delete x[w][v];this.props.onChangeTaxRates(x);}.bind(this),this.$CommerceSelfServeProductTaxRatesTable5=function(v,w,x){var y=this.$CommerceSelfServeProductTaxRatesTable9(v),z=this.props.taxRates;z[y][v]={tax_rate:w,is_applied_to_shipping:x};this.props.onChangeTaxRates(z);}.bind(this),this.$CommerceSelfServeProductTaxRatesTable8=function(){var v=this.state.newTaxRateLocation;this.$CommerceSelfServeProductTaxRatesTable5(v,this.state.newTaxRatePercentage,this.state.newIsAppliedToShipping);this.setState({newTaxRatePercentage:0,newTaxRateLocation:'',newIsAppliedToShipping:false});}.bind(this),this.$CommerceSelfServeProductTaxRatesTable9=function(v){this.$CommerceSelfServeProductTaxRatesTable7(v)||k(0);if(this.$CommerceSelfServeProductTaxRatesTable10(v)){return 'zip_code';}else return 'state_abbr';}.bind(this),this.$CommerceSelfServeProductTaxRatesTable3=function(v,w){var x=Math.round(v*Math.pow(10,w+2));return x/Math.pow(10,w);},this.$CommerceSelfServeProductTaxRatesTable4=function(v,w){var x=Math.round(v*Math.pow(10,w));return x/Math.pow(10,w+2);},this.$CommerceSelfServeProductTaxRatesTable7=function(v){return this.$CommerceSelfServeProductTaxRatesTable10(v)||this.$CommerceSelfServeProductTaxRatesTable11(v);}.bind(this),this.$CommerceSelfServeProductTaxRatesTable10=function(v){var w=/^[0-9]{5}$/;return v.match(w)!==null;},this.$CommerceSelfServeProductTaxRatesTable11=function(v){var w='STATE_';return w+v in c('CommerceUSAStates');},r;}p.prototype.render=function(){'use strict';var q=[];for(var r in this.props.taxRates){var s=this.props.taxRates[r];for(var t in s)q[q.length]=this.$CommerceSelfServeProductTaxRatesTable1(t,s[t]);}q[q.length]=this.$CommerceSelfServeProductTaxRatesTable2();return c('React').createElement('div',null,c('React').createElement(c('XUITable.react'),{outerBorder:true},c('React').createElement('thead',null,c('React').createElement('tr',null,c('React').createElement('th',null,j._("Location")),c('React').createElement('th',null,j._("Tax Rate")),c('React').createElement('th',null,j._("Apply tax to shipping cost?")),c('React').createElement('th',null))),c('React').createElement('tbody',null,q)));};p.propTypes={taxRates:o.object.isRequired,onChangeTaxRates:o.func.isRequired};f.exports=p;}),null);
__d('FBNumberInput.react',['Input','React','intlNumUtils','joinClasses','debounce'],(function a(b,c,d,e,f,g){var h,i,j=200,k=c('React').PropTypes;h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;function l(){'use strict';i.constructor.call(this);this.$FBNumberInput1=c('debounce')(function(m){var n=this.$FBNumberInput2(c('Input').getValue(m));if(n===this.$FBNumberInput3(n))this.props.onValueChange(n);}.bind(this),j);this.$FBNumberInput4=function(m){return this.props.formatNumber?c('intlNumUtils').formatNumberWithThousandDelimiters(m,0):''+m;}.bind(this);this.$FBNumberInput2=function(m){var n=c('intlNumUtils').parseNumber(m);if(this.props.onlyIntegers)n=Math.trunc(n);return n;}.bind(this);this.$FBNumberInput3=function(m){if(m!==null){m=this.props.nonnegative?Math.abs(m):m;if(this.props.minValue!=null&&m<this.props.minValue){m=this.props.minValue;}else if(this.props.maxValue!=null&&m>this.props.maxValue)m=this.props.maxValue;}else if(this.props.defaultValue!=null)m=this.props.defaultValue;return m;}.bind(this);this.$FBNumberInput5=function(event){this.setState({focused:false});var m=this.$FBNumberInput3(this.$FBNumberInput2(c('Input').getValue(event.target))),n=m!==null?this.$FBNumberInput4(m):'';c('Input').setValue(event.target,n);if(this.props.triggerCallbackOnChange)this.$FBNumberInput1.reset();this.props.onValueChange(m);}.bind(this);this.$FBNumberInput6=function(event){this.setState({focused:true});}.bind(this);this.$FBNumberInput7=function(event){this.$FBNumberInput1(event.target);}.bind(this);this.state={focused:false};}l.prototype.render=function(){'use strict';var m=this.props,n=m.value,o=m.className,p=babelHelpers.objectWithoutProperties(m,['value','className']);if(n)n=this.$FBNumberInput4(n);return c('React').createElement('input',babelHelpers['extends']({},p,{className:c('joinClasses')(o,'inputtext'),type:'text',defaultValue:n,value:this.state.focused?undefined:n,onBlur:this.$FBNumberInput5,onFocus:this.$FBNumberInput6,onChange:this.props.triggerCallbackOnChange?this.$FBNumberInput7:p.onChange}));};l.propTypes={nonnegative:k.bool,onValueChange:k.func.isRequired,value:k.number,defaultValue:k.number,minValue:k.number,maxValue:k.number,placeholder:k.string,formatNumber:k.bool,onlyIntegers:k.bool,triggerCallbackOnChange:k.bool};f.exports=l;}),null);
__d('BUIFormButton.react',['invariant','BUIForm.react','React','XUIButton.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){var l=this.props,m=l.density,n=babelHelpers.objectWithoutProperties(l,['density']),o=void 0;switch(m){case 'breathy':case 'svelt':o='xlarge';break;case 'snug':o='large';break;case 'taut':o='medium';break;default:}return c('React').createElement(c('XUIButton.react'),babelHelpers['extends']({},n,{size:o}));};function k(){i.apply(this,arguments);}k.propTypes=babelHelpers['extends']({},c('XUIButton.react').propTypes,{density:c('BUIForm.react').propTypes.density});f.exports=k;}),null);
__d('CountryCodeMap',[],(function a(b,c,d,e,f,g){var h={US:'United States',CA:'Canada',GB:'United Kingdom',AR:'Argentina',AU:'Australia',AT:'Austria',BE:'Belgium',BR:'Brazil',CL:'Chile',CN:'China',CO:'Colombia',HR:'Croatia',DK:'Denmark',DO:'Dominican Republic',EG:'Egypt',FI:'Finland',FR:'France',DE:'Germany',GR:'Greece',HK:'Hong Kong',IN:'India',ID:'Indonesia',IE:'Ireland',IL:'Israel',IT:'Italy',JP:'Japan',JO:'Jordan',KW:'Kuwait',LB:'Lebanon',MY:'Malaysia',MX:'Mexico',NL:'Netherlands',NZ:'New Zealand',NG:'Nigeria',NO:'Norway',PK:'Pakistan',PA:'Panama',PE:'Peru',PH:'Philippines',PL:'Poland',RU:'Russia',SA:'Saudi Arabia',RS:'Serbia',SG:'Singapore',ZA:'South Africa',KR:'South Korea',ES:'Spain',SE:'Sweden',CH:'Switzerland',TW:'Taiwan',TH:'Thailand',TR:'Turkey',AE:'United Arab Emirates',VE:'Venezuela',PT:'Portugal',LU:'Luxembourg',BG:'Bulgaria',CZ:'Czech Republic',SI:'Slovenia',IS:'Iceland',SK:'Slovakia',LT:'Lithuania',TT:'Trinidad and Tobago',BD:'Bangladesh',LK:'Sri Lanka',KE:'Kenya',HU:'Hungary',MA:'Morocco',CY:'Cyprus',JM:'Jamaica',EC:'Ecuador',RO:'Romania',BO:'Bolivia',GT:'Guatemala',CR:'Costa Rica',QA:'Qatar',SV:'El Salvador',HN:'Honduras',NI:'Nicaragua',PY:'Paraguay',UY:'Uruguay',PR:'Puerto Rico',BA:'Bosnia and Herzegovina',PS:'Palestine',TN:'Tunisia',BH:'Bahrain',VN:'Vietnam',GH:'Ghana',MU:'Mauritius',UA:'Ukraine',MT:'Malta',BS:'The Bahamas',MV:'Maldives',OM:'Oman',MK:'Macedonia',LV:'Latvia',EE:'Estonia',IQ:'Iraq',DZ:'Algeria',AL:'Albania',NP:'Nepal',MO:'Macau',ME:'Montenegro',SN:'Senegal',GE:'Georgia',BN:'Brunei',UG:'Uganda',GP:'Guadeloupe',BB:'Barbados',AZ:'Azerbaijan',TZ:'Tanzania',LY:'Libya',MQ:'Martinique',CM:'Cameroon',BW:'Botswana',ET:'Ethiopia',KZ:'Kazakhstan',NA:'Namibia',MG:'Madagascar',NC:'New Caledonia',MD:'Moldova',FJ:'Fiji',BY:'Belarus',JE:'Jersey',GU:'Guam',YE:'Yemen',ZM:'Zambia',IM:'Isle Of Man',HT:'Haiti',KH:'Cambodia',AW:'Aruba',PF:'French Polynesia',AF:'Afghanistan',BM:'Bermuda',GY:'Guyana',AM:'Armenia',MW:'Malawi',AG:'Antigua',RW:'Rwanda',GG:'Guernsey',GM:'The Gambia',FO:'Faroe Islands',LC:'St. Lucia',KY:'Cayman Islands',BJ:'Benin',AD:'Andorra',GD:'Grenada',VI:'US Virgin Islands',BZ:'Belize',VC:'Saint Vincent and the Grenadines',MN:'Mongolia',MZ:'Mozambique',ML:'Mali',AO:'Angola',GF:'French Guiana',UZ:'Uzbekistan',DJ:'Djibouti',BF:'Burkina Faso',MC:'Monaco',TG:'Togo',GL:'Greenland',GA:'Gabon',GI:'Gibraltar',CD:'Democratic Republic of the Congo',KG:'Kyrgyzstan',PG:'Papua New Guinea',BT:'Bhutan',KN:'Saint Kitts and Nevis',SZ:'Swaziland',LS:'Lesotho',LA:'Laos',LI:'Liechtenstein',MP:'Northern Mariana Islands',SR:'Suriname',SC:'Seychelles',VG:'British Virgin Islands',TC:'Turks and Caicos Islands',DM:'Dominica',MR:'Mauritania',AX:'Aland Islands',SM:'San Marino',SL:'Sierra Leone',NE:'Niger',CG:'Republic of the Congo',AI:'Anguilla',YT:'Mayotte',CV:'Cape Verde',GN:'Guinea',TM:'Turkmenistan',BI:'Burundi',TJ:'Tajikistan',VU:'Vanuatu',SB:'Solomon Islands',ER:'Eritrea',WS:'Samoa',AS:'American Samoa',FK:'Falkland Islands',GQ:'Equatorial Guinea',TO:'Tonga',KM:'Comoros',PW:'Palau',FM:'Federated States of Micronesia',CF:'Central African Republic',SO:'Somalia',MH:'Marshall Islands',VA:'Vatican City',TD:'Chad',KI:'Kiribati',ST:'Sao Tome and Principe',TV:'Tuvalu',NR:'Nauru',RE:'R\u00e9union',LR:'Liberia',ZW:'Zimbabwe',CI:'C\u00f4te d\'Ivoire',MM:'Myanmar'};f.exports=h;}),null);
__d('TokenizerExampleSearchSource',['AbstractSearchSource','CountryCodeMap','SearchableEntry','filterObject','forEachObject'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('AbstractSearchSource'));i=h&&h.prototype;j.prototype.searchImpl=function(k,l,m){'use strict';var n=[];m=m||{};if(k){var o=k.toLowerCase(),p=c('filterObject')(c('CountryCodeMap'),function(r){return r.toLowerCase().startsWith(o);}),q=0;c('forEachObject')(p,function(r,s){return n.push(new (c('SearchableEntry'))({order:q++,photo:'/images/mobile/glyph/book_blue_s.png',subtitle:r,title:r,uniqueID:s}));});}l(n,k);};function j(){'use strict';h.apply(this,arguments);}f.exports=j;}),null);
__d('FreeformSearchSource',['AbstractSearchSource','RegexMatchSearchSource','SearchableEntry'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('AbstractSearchSource'));i=h&&h.prototype;function j(k,l,m){'use strict';i.constructor.call(this);this.$FreeformSearchSource1=k;this.$FreeformSearchSource2=new (c('RegexMatchSearchSource'))('\\S+');this.$FreeformSearchSource3=l;this.$FreeformSearchSource4=m;}j.prototype.getBootstrappedEntries=function(k){'use strict';return typeof this.$FreeformSearchSource1.getBootstrappedEntries==='function'?this.$FreeformSearchSource1.getBootstrappedEntries(k):null;};j.prototype.bootstrapImpl=function(k){'use strict';this.$FreeformSearchSource1.bootstrapImpl(k);};j.prototype.validateQuery=function(k){'use strict';return k.length>=this.$FreeformSearchSource4;};j.prototype.searchImpl=function(k,l,m){'use strict';this.$FreeformSearchSource2.searchImpl(k,function(n,o){var p=[];if(n.length===1&&this.validateQuery(o)){p=[new (c('SearchableEntry'))({uniqueID:n[0].getUniqueID(),title:this.$FreeformSearchSource3(n[0].getTitle().trim())})];l(p,k);}this.$FreeformSearchSource1.searchImpl(k,function(q,r){if(q.length>0)l(q.concat(p),r);},m);}.bind(this),m);};f.exports=j;}),null);
__d('AutoPager.react',['DOM','Event','OnVisible','Parent','React','ReactDOM','SubscriptionsHandler','throttle'],(function a(b,c,d,e,f,g){var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;'use strict';for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.getViewportListener=function(){if(!this.onEnterViewportListener)this.onEnterViewportListener=new (c('OnVisible'))(c('ReactDOM').findDOMNode(this),function(){return this.props.onVisible();}.bind(this),false,this.props.onEnterBuffer,false,this.scrollableArea);return this.onEnterViewportListener;}.bind(this),this.onScroll=function(){this.getViewportListener().reset();}.bind(this),m;}k.prototype.componentDidMount=function(){'use strict';if(this.props.scrollableAreaClass){this.scrollableArea=c('Parent').byClass(c('ReactDOM').findDOMNode(this),this.props.scrollableAreaClass);var l=c('DOM').find(this.scrollableArea,'.uiScrollableAreaWrap');}else l=window;this.subscriptions=new (c('SubscriptionsHandler'))();this.subscriptions.addSubscriptions(c('Event').listen(l,'scroll',c('throttle')(this.onScroll,100)));};k.prototype.componentWillUnmount=function(){'use strict';this.getViewportListener().remove();this.subscriptions.release();};k.prototype.render=function(){'use strict';return c('React').createElement('div',{className:this.props.className});};k.propTypes={className:j.string,onEnterBuffer:j.number.isRequired,onVisible:j.func.isRequired,scrollableAreaClass:j.string};f.exports=k;}),null);
__d('DistrictTargetingTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:DistrictTargetingLoggerConfig',this.$DistrictTargetingTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:DistrictTargetingLoggerConfig',this.$DistrictTargetingTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$DistrictTargetingTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$DistrictTargetingTypedLogger1=babelHelpers['extends']({},this.$DistrictTargetingTypedLogger1,j);return this;};h.prototype.setDistrictID=function(j){this.$DistrictTargetingTypedLogger1.district_id=j;return this;};h.prototype.setEvent=function(j){this.$DistrictTargetingTypedLogger1.event=j;return this;};h.prototype.setPageID=function(j){this.$DistrictTargetingTypedLogger1.page_id=j;return this;};h.prototype.setPostID=function(j){this.$DistrictTargetingTypedLogger1.post_id=j;return this;};h.prototype.setVC=function(j){this.$DistrictTargetingTypedLogger1.vc=j;return this;};var i={district_id:true,event:true,page_id:true,post_id:true,vc:true};f.exports=h;}),null);
__d('AdsMessengerLinkUtils',['AdsAccountCapabilities','AdsAccountUtils','AdsAPIAdgroupRecordUtils','AdsAPIObjectives','AdsCallToActionTypes','AdsUnifiedCreativeAPIFields','AdsUnifiedCreativeAPIFieldUtils','MessagingRelatedLinkType','adsGKCheck','nullthrows'],(function a(b,c,d,e,f,g){var h='((([Hh]ttp[s]?:(\\/\\/))(www\\.)?)|www\\.|[^-\\da-z]|^)m\\.me(\\/|\\/\\/|\\/\\/\\/)[\\w\\d\\S]+',i='((([Hh]ttp[s]?:(\\/\\/))(www\\.)?)|www\\.|[^-\\da-z]|^)telegram\\.me(\\/|\\/\\/|\\/\\/\\/)[\\w\\d\\S]+',j='((([Hh]ttp[s]?:(\\/\\/))(www\\.)?)|www\\.|[^-\\da-z]|^)line\\.me(\\/|\\/\\/|\\/\\/\\/)[\\w\\d\\S]+',k='([^-\\da-z]|^)wechat([^-\\da-z])',l='([^-\\da-z]|^)whatsapp([^-\\da-z])',m={getMessagingRelatedLinkTypes:function n(o){if(!o)return [];o=o.toLowerCase();var p=[];if(o.match(new RegExp(h)))p.push(c('MessagingRelatedLinkType').MME_LINK);if(c('adsGKCheck')('detect_messaging_related_links_in_text')){if(o.match(new RegExp(i)))p.push(c('MessagingRelatedLinkType').TELEGRAM_LINK);if(o.match(new RegExp(j)))p.push(c('MessagingRelatedLinkType').LINE_LINK);if(o.match(new RegExp(k)))p.push(c('MessagingRelatedLinkType').WECHAT_LINK);if(o.match(new RegExp(l)))p.push(c('MessagingRelatedLinkType').WHATSAPP_LINK);}return p;},hasMessagingRelatedLinkInText:function n(o){return m.getMessagingRelatedLinkTypes(o).length>0;},hasMessengerLinkInText:function n(o){var p=h,q=new RegExp(p);return o?!!o.toLowerCase().match(q):false;},addMessageCTAForMessagingLinkInText:function n(o,p,q,r,s){if(!c('AdsAccountUtils').hasCapabilityFromList(o.capabilities,c('AdsAccountCapabilities').ADS_VIDEO_VIEW_MME_DEFAULT_MESSAGE_CTA))return p;var t=c('AdsAPIAdgroupRecordUtils').getCallToActionType(p,c('nullthrows')(r));if(!!t||!m.hasMessagingRelatedLinkInText(q))return p;if(s!==c('AdsAPIObjectives').VIDEO_VIEWS)return p;p=p.setIn(c('AdsUnifiedCreativeAPIFieldUtils').getFieldPath(p,c('nullthrows')(r),c('AdsUnifiedCreativeAPIFields').callToActionType),c('AdsCallToActionTypes').TYPES.MESSAGE_PAGE.name);var u=c('AdsAPIAdgroupRecordUtils').getPageID(p,c('nullthrows')(r));return p.setIn(c('AdsUnifiedCreativeAPIFieldUtils').getFieldPath(p,c('nullthrows')(r),c('AdsUnifiedCreativeAPIFields').linkURL),m.getShortMessengerLinkWithPageID(u));},getShortMessengerLinkWithPageID:function n(o){return 'https://m.me/'+(o||'');}};f.exports=m;}),null);
__d('AsyncUploadQueue',['AsyncUploadBase'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('AsyncUploadBase'));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this,k);this._pending=[];this._waiting=[];}j.prototype.enqueue=function(k,l,m){'use strict';return this._add(this._waiting.push.bind(this._waiting),k,l,m);};j.prototype.prepend=function(k,l,m){'use strict';return this._add(this._waiting.unshift.bind(this._waiting),k,l,m);};j.prototype._add=function(k,l,m,n){'use strict';var o=babelHelpers['extends']({},this._data,n),p=this._createFileUpload(l,m,o);k(p);this._processQueue();return p;};j.prototype.dequeue=function(k){'use strict';this._abort(k);};f.exports=j;}),null);
__d('Waiter',[],(function a(b,c,d,e,f,g){function h(i){'use strict';this.$Waiter1=i;this.$Waiter2=0;this.$Waiter3=false;}h.prototype.wait=function(i){'use strict';var j=this,k=false;this.$Waiter4();return function(){if(k)return;for(var l=arguments.length,m=Array(l),n=0;n<l;n++)m[n]=arguments[n];i&&i.apply(this,m);j.$Waiter5();k=true;};};h.prototype.go=function(){'use strict';this.$Waiter3=true;this.$Waiter6();return this;};h.prototype.$Waiter4=function(){'use strict';this.$Waiter2++;};h.prototype.$Waiter6=function(){'use strict';if(!this.$Waiter2&&this.$Waiter3)this.$Waiter1();};h.prototype.$Waiter5=function(){'use strict';this.$Waiter2--;this.$Waiter6();};f.exports=h;}),null);
__d('ReactComposerBoostedPostLazyButton.react',['Bootloader','React','ReactDOM'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.componentDidMount=function(){'use strict';c('Bootloader').loadModules(["BoostedPostDialogButton.react"],function(k){c('ReactDOM').render(c('React').createElement(k,this.props),c('ReactDOM').findDOMNode(this.refs.boostButtonContainer));}.bind(this),'ReactComposerBoostedPostLazyButton.react');};j.prototype.render=function(){'use strict';return c('React').createElement('span',{ref:'boostButtonContainer'});};function j(){'use strict';h.apply(this,arguments);}f.exports=j;}),null);
__d('ReactComposerPagesBootloader',['Bootloader'],(function a(b,c,d,e,f,g){'use strict';var h={statusAttachment:function i(j){c('Bootloader').loadModules(["ReactComposerStatusAttachmentContainer.react","PagesComposerPostButton.react"],j,'ReactComposerPagesBootloader');},mediaAttachment:function i(j){c('Bootloader').loadModules(["ReactComposerMediaAttachmentContainer.react","PagesComposerPostButton.react"],j,'ReactComposerPagesBootloader');},qandaAttachment:function i(j){c('Bootloader').loadModules(["ReactComposerQAndAAttachmentContainer.react","PagesComposerPostButton.react"],j,'ReactComposerPagesBootloader');},questionAttachment:function i(j){c('Bootloader').loadModules(["ReactComposerQuestionAttachmentContainer.react","PagesComposerPostButton.react"],j,'ReactComposerPagesBootloader');},extraAttachment:function i(j){c('Bootloader').loadModules(["PagesComposerExtraAttachmentContainer.react","PagesComposerPostButton.react"],j,'ReactComposerPagesBootloader');},ctaAttachment:function i(j){c('Bootloader').loadModules(["ReactComposerCTAAttachmentContainer.react","PagesComposerPostButton.react"],j,'ReactComposerPagesBootloader');}};f.exports=h;}),null);
__d('ReactComposerPagesStore',['Bootloader','ReactComposerActionStore','ReactComposerMediaConfig','ReactComposerPostUtils','ReactComposerTaggerType','PagesComposerActionsTypes','PagesComposerUnpublishedPostsStore','dotAccess','formatDate'],(function a(b,c,d,e,f,g){var h,i,j={instagramCrossPosting:false};h=babelHelpers.inherits(k,c('ReactComposerActionStore'));i=h&&h.prototype;function k(){'use strict';var l;i.constructor.call(this,function(){return Object.assign({},j);},function(m){switch(m.type){case c('PagesComposerActionsTypes').INSTAGRAM_CROSS_POSTING:l&&l.$ReactComposerPagesStore1(m);break;}});l=this;}k.prototype.__onPostStarted=function(l){'use strict';var m=c('PagesComposerUnpublishedPostsStore').getIsDraft(l.composerID),n=Object.assign({},l.config);n.contextInfo=Object.assign({},n.contextInfo||{});n.contextInfo.draft=m;var o=c('PagesComposerUnpublishedPostsStore').getScheduledPublishTime(l.composerID);if(o){var p=c('formatDate')(o,'m/d/Y',{skipPatternLocalization:true}),q=60*(60*o.getHours()+o.getMinutes());n.contextInfo.scheduled=true;n.contextInfo.future_date=p;n.contextInfo.future_time=q;n.contextInfo.scheduled_publish_time=o.getTime()/1000;}var r=c('PagesComposerUnpublishedPostsStore').getBackdateConfig(l.composerID);if(r){n.contextInfo.backdated_date={year:r.year,month:r.month,day:r.day};n.contextInfo.hide_from_newsfeed=r.hideFromNewsFeed;}var s=c('PagesComposerUnpublishedPostsStore').getStopFeedDistributionTime(l.composerID);if(s){n.contextInfo.stopFeedDistributionDateFormatted=c('formatDate')(s,'m/d/Y',{skipPatternLocalization:true});n.contextInfo.stopFeedDistributionTimeFormatted=60*(60*s.getHours()+s.getMinutes());}var t=c('PagesComposerUnpublishedPostsStore').getIsAdsPost(l.composerID);if(t)n.contextInfo.is_ad_post=1;var u=this.getComposerData(l.composerID).instagramCrossPosting;if(u)n.contextInfo.instagramCrossPosting=true;var v=l.config.taggersConfig?l.config.taggersConfig[c('ReactComposerTaggerType').TARGETING]:null,w=v?c('dotAccess')(v,'feedTargetingGK'):false;c('ReactComposerPostUtils').post({actorID:l.actorID,composerConfig:n,composerID:l.composerID,composerType:l.composerType,targetID:l.targetID,onPostSuccess:l.onPostSuccess,useHints:w});};k.prototype.__onPostSucceeded=function(l){'use strict';var m=this.validateAction(l,'composerID');c('Bootloader').loadModules(["ReactComposerPagesSurvey"],function(n){return n.onPostSucceeded(m);},'ReactComposerPagesStore');};k.prototype.__canPost=function(l){'use strict';return !c('ReactComposerPostUtils').isPostButtonDisabled(l.composerID,c('ReactComposerMediaConfig').photo.limit);};k.prototype.$ReactComposerPagesStore1=function(l){'use strict';var m=this.getComposerData(l.composerID);m.instagramCrossPosting=l.enabled;};f.exports=new k();}),null);
__d("XPagesExtraAttachmentBootstrapController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/react_composer\/pages\/extra\/bootstrap\/",{});}),null);
__d('PagesComposerExtraLazyAttachment.react',['ReactComposerAttachmentType','ReactComposerLoadableAttachmentBodyMixin','ReactComposerBootloaderPropTypes','ActorURI','React','XPagesExtraAttachmentBootstrapController'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'PagesComposerExtraLazyAttachment',mixins:[c('ReactComposerLoadableAttachmentBodyMixin')],propTypes:{bootloader:c('ReactComposerBootloaderPropTypes').isRequired},statics:{attachmentID:c('ReactComposerAttachmentType').PAGES_EXTRA},bootload:function j(k){this.props.bootloader.extraAttachment(k);},getBootstrapURI:function j(){var k=c('XPagesExtraAttachmentBootstrapController').getURIBuilder().getURI();return c('ActorURI').create(k,this.context.actorID);}});f.exports=i;}),null);
__d("XReactComposerCTAAttachmentBootstrapController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/react_composer\/cta\/bootstrap\/",{composer_id:{type:"String",required:true},composer_type:{type:"Enum",required:true,enumType:1},target_id:{type:"Int",required:true},cta_type:{type:"String",required:true}});}),null);
__d('ReactComposerCTALazyAttachment.react',['ReactComposerAttachmentType','ReactComposerBootloaderPropTypes','ReactComposerLoadableAttachmentBodyMixin','ActorURI','Bootloader','React','XReactComposerCTAAttachmentBootstrapController'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerCTALazyAttachment',mixins:[c('ReactComposerLoadableAttachmentBodyMixin')],statics:{attachmentID:c('ReactComposerAttachmentType').CTA},propTypes:{additionalFooterActions:h.arrayOf(h.element),bootloader:c('ReactComposerBootloaderPropTypes')},bootload:function j(k){if(this.props.bootloader&&this.props.bootloader.ctaAttachment){this.props.bootloader.ctaAttachment(k);}else c('Bootloader').loadModules(["ReactComposerCTAAttachmentContainer.react"],k,'ReactComposerCTALazyAttachment.react');},getBootstrapURI:function j(){var k=this.props.config.attachmentsConfig,l=k[c('ReactComposerAttachmentType').PAGES_EXTRA],m=l.attachments[c('ReactComposerAttachmentType').CTA],n=c('XReactComposerCTAAttachmentBootstrapController').getURIBuilder().setString('composer_id',this.context.composerID).setEnum('composer_type',this.context.composerType).setInt('target_id',this.context.targetID).setString('cta_type',m.ctaType).getURI();return c('ActorURI').create(n,this.context.actorID);}});f.exports=i;}),null);
__d('ReactComposerCallLazyAttachment.react',['ReactComposerAttachmentType','ReactComposerBootloaderPropTypes','ReactComposerLoadableAttachmentBodyMixin','AdsCallToActionTypes','ActorURI','Bootloader','React','XReactComposerCTAAttachmentBootstrapController'],(function a(b,c,d,e,f,g){var h=c('React').createClass({displayName:'ReactComposerCallLazyAttachment',mixins:[c('ReactComposerLoadableAttachmentBodyMixin')],statics:{attachmentID:c('ReactComposerAttachmentType').CALL},propTypes:{bootloader:c('ReactComposerBootloaderPropTypes')},bootload:function i(j){if(this.props.bootloader&&this.props.bootloader.ctaAttachment){this.props.bootloader.ctaAttachment(j);}else c('Bootloader').loadModules(["ReactComposerCTAAttachmentContainer.react"],j,'ReactComposerCallLazyAttachment.react');},getBootstrapURI:function i(){var j=c('XReactComposerCTAAttachmentBootstrapController').getURIBuilder().setString('composer_id',this.context.composerID).setEnum('composer_type',this.context.composerType).setInt('target_id',this.context.targetID).setString('cta_type',c('AdsCallToActionTypes').TYPES.CALL_NOW.name).getURI();return c('ActorURI').create(j,this.context.actorID);}});f.exports=h;}),null);
__d('ReactComposerGetDirectionsLazyAttachment.react',['ReactComposerAttachmentType','ReactComposerBootloaderPropTypes','ReactComposerLoadableAttachmentBodyMixin','AdsCallToActionTypes','ActorURI','Bootloader','React','XReactComposerCTAAttachmentBootstrapController'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerGetDirectionsLazyAttachment',mixins:[c('ReactComposerLoadableAttachmentBodyMixin')],statics:{attachmentID:c('ReactComposerAttachmentType').GET_DIRECTIONS},propTypes:{additionalFooterActions:h.arrayOf(h.element),bootloader:c('ReactComposerBootloaderPropTypes')},bootload:function j(k){if(this.props.bootloader&&this.props.bootloader.ctaAttachment){this.props.bootloader.ctaAttachment(k);}else c('Bootloader').loadModules(["ReactComposerCTAAttachmentContainer.react"],k,'ReactComposerGetDirectionsLazyAttachment.react');},getBootstrapURI:function j(){var k=c('XReactComposerCTAAttachmentBootstrapController').getURIBuilder().setString('composer_id',this.context.composerID).setEnum('composer_type',this.context.composerType).setInt('target_id',this.context.targetID).setString('cta_type',c('AdsCallToActionTypes').TYPES.GET_DIRECTIONS.name).getURI();return c('ActorURI').create(k,this.context.actorID);}});f.exports=i;}),null);
__d('ReactComposerIssueTaggerButton.react',['fbt','cx','ReactComposerLoggingName','ReactComposerTaggerActions','ReactComposerTaggerButtonMixin','ReactComposerTaggerStore','ReactComposerTaggerType','IssueModuleStringUtils','React','SimpleNUXMessage','SimpleNUXMessageTypes','XUIAmbientNUX.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=c('React').createClass({displayName:'ReactComposerIssueTaggerButton',mixins:[c('ReactComposerTaggerButtonMixin')],statics:{loggingName:c('ReactComposerLoggingName').ISSUE_TAGGER,taggerID:c('ReactComposerTaggerType').ISSUE_TAG},propTypes:{autoSelect:j.bool},getNUX:function l(){if(!this.state.showNUX||!this.state.contextRef)return null;var m=c('IssueModuleStringUtils').getTaggerNux();return c('React').createElement(c('XUIAmbientNUX.react'),{alignment:'center',contextRef:function(){return this.state.contextRef;}.bind(this),onCloseButtonClick:this._hideNUX,position:'below',shown:true,width:'auto'},m);},getTitle:function l(){return h._("Tag an issue");},getTooltip:function l(){return h._("Tag an issue");},getClassName:function l(){return "_22ma";},getRef:function l(){return 'fbReactComposerIssueTaggerButton';},componentDidMount:function l(){this.setState({contextRef:this.refs.fbReactComposerIssueTaggerButton});if(this.props.autoSelect){var m=c('ReactComposerTaggerStore').getSelectedTagger(this.context.composerID);if(m!==c('ReactComposerTaggerType').ISSUE_TAG)this._onSelect();}},_hideNUX:function l(){c('SimpleNUXMessage').markMessageSeenByUser(c('SimpleNUXMessageTypes').CIVIC_ENGAGEMENT_ISSUE_TAGGER);c('ReactComposerTaggerActions').handleSetTaggerShowNUX(this.context.composerID,c('ReactComposerTaggerType').ISSUE_TAG,false);this.setState({showNUX:false});}});f.exports=k;}),null);
__d('ReactComposerIssueTaggerComponent.react',['cx','fbt','ReactComposerTaggerPresenter','ReactComposerTaggerViewStyles','Grid.react','React','SearchableEntry','TokenizerExampleSearchSource','XUITokenizer.react','XUITokenizerToken.react','emptyFunction'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('Grid.react').GridItem,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$ReactComposerIssueTaggerComponent2=function(t){this.$ReactComposerIssueTaggerComponent5(t);}.bind(this),this.$ReactComposerIssueTaggerComponent3=function(t){var u=this.props.taggerData,v=u.indexOf(t);if(v==-1)return;u.splice(v,1);this.props.onSelect&&this.props.onSelect(u);}.bind(this),p;}n.prototype.render=function(){return c('React').createElement(c('Grid.react'),{cols:2,className:"_5esl",role:'presentation'},c('React').createElement(l,{key:'label',className:"_5esm",role:'presentation'},i._("Issues")),c('React').createElement(l,{key:'tokenizer',className:"_5esw",role:'presentation'},c('React').createElement('div',null,c('React').createElement(c('XUITokenizer.react'),babelHelpers['extends']({},this.props,{className:"_5esx _ysh _4fmg",entries:this.props.taggerData,focusAfterSelection:false,focusedOnInit:this.props.autoFocus,onAddEntryAttempt:this.$ReactComposerIssueTaggerComponent2,onRemoveEntryAttempt:this.$ReactComposerIssueTaggerComponent3,placeholder:this.props.placeholder,presenter:this.$ReactComposerIssueTaggerComponent4(),ref:function(o){return this.$ReactComposerIssueTaggerComponent1=o;}.bind(this),searchSource:this.props.taggerSource,showEntriesOnFocus:true})))));};n.prototype.$ReactComposerIssueTaggerComponent5=function(o){var p=this.props.taggerData;p.push(o);this.props.onSelect&&this.props.onSelect(p);};n.prototype.$ReactComposerIssueTaggerComponent4=function(){var o={};o.taggerViewStyle=c('ReactComposerTaggerViewStyles').DEFAULT;o.taggerListClassName="_ysi";return Object.assign({},c('ReactComposerTaggerPresenter'),{extraRendererProps:o,sortEntries:this.$ReactComposerIssueTaggerComponent6,TokenRenderer:c('XUITokenizerToken.react')});};n.prototype.$ReactComposerIssueTaggerComponent6=function(o,p,q){o.sort(function(r,s){return r.getTitle().localeCompare(s.getTitle());});return o;};n.propTypes={autoFocus:m.bool,onSelect:m.func,pageIDs:m.arrayOf(m.string).isRequired,placeholder:m.string,productTaggerType:m.string.isRequired,reactComposerID:m.string.isRequired,taggerSource:m.object,taggerData:m.arrayOf(m.object).isRequired};n.defaultProps={autoFocus:true,onSelect:c('emptyFunction'),placeholder:i._("Type issue to tag it in your post"),taggerData:[],taggerSource:new (c('TokenizerExampleSearchSource'))()};f.exports=n;}),null);
__d("XIssueTypeaheadTaggerSearchSourceController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/issue_module\/typeahead\/searchsource\/",{page_id:{type:"FBID"}});}),null);
__d('ReactComposerIssueTaggerContainer.react',['AsyncRequest','ReactComposerLoggingName','ReactComposerIssueTaggerComponent.react','ReactComposerTaggerActions','ReactComposerTaggerContainerMixin','ReactComposerTaggerType','React','SearchableEntry','StaticSearchSource','SubscriptionsHandler','XIssueTypeaheadTaggerSearchSourceController'],(function a(b,c,d,e,f,g){var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerIssueTaggerContainer',_subscriptions:undefined,mixins:[c('ReactComposerTaggerContainerMixin')()],statics:{taggerID:c('ReactComposerTaggerType').ISSUE_TAG,loggingName:c('ReactComposerLoggingName').ISSUE_TAGGER,taggerComponent:c('ReactComposerIssueTaggerComponent.react')},propTypes:{pageIDs:h.arrayOf(h.string).isRequired,reactComposerID:h.string.isRequired,showAddIssue:h.bool,viewer:h.string.isRequired},getInitialState:function j(){return {reachEstimate:null,searchSource:null};},componentWillMount:function j(){this._updateIssuesSearchSource();},componentWillUnmount:function j(){this._subscriptions&&this._subscriptions.release();},_updateIssuesSearchSource:function j(){var k=this.state.searchSource;if(k===null){var l=c('XIssueTypeaheadTaggerSearchSourceController').getURIBuilder().setFBID('page_id',this.props.pageIDs[0]).getURI();new (c('AsyncRequest'))(l).setMethod('POST').setHandler(function(m){var n=m.payload,o=n.map(function(q){return new (c('SearchableEntry'))({uniqueID:q.uniqueID,title:q.title});}),p=new (c('StaticSearchSource'))(o);this.setState({searchSource:p});k=p;c('ReactComposerTaggerActions').setTaggerSource(this.context.composerID,c('ReactComposerTaggerType').ISSUE_TAG,k);}.bind(this)).send();}}});f.exports=i;}),null);
__d('ReactComposerMessageLazyAttachment.react',['ReactComposerAttachmentType','ReactComposerBootloaderPropTypes','ReactComposerLoadableAttachmentBodyMixin','AdsCallToActionTypes','ActorURI','Bootloader','React','XReactComposerCTAAttachmentBootstrapController'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerMessageLazyAttachment',mixins:[c('ReactComposerLoadableAttachmentBodyMixin')],statics:{attachmentID:c('ReactComposerAttachmentType').MESSAGE},propTypes:{additionalFooterActions:h.arrayOf(h.element),bootloader:c('ReactComposerBootloaderPropTypes')},bootload:function j(k){if(this.props.bootloader&&this.props.bootloader.ctaAttachment){this.props.bootloader.ctaAttachment(k);}else c('Bootloader').loadModules(["ReactComposerCTAAttachmentContainer.react"],k,'ReactComposerMessageLazyAttachment.react');},getBootstrapURI:function j(){var k=c('XReactComposerCTAAttachmentBootstrapController').getURIBuilder().setString('composer_id',this.context.composerID).setEnum('composer_type',this.context.composerType).setInt('target_id',this.context.targetID).setString('cta_type',c('AdsCallToActionTypes').TYPES.MESSAGE_PAGE.name).getURI();return c('ActorURI').create(k,this.context.actorID);}});f.exports=i;}),null);
__d('ReactTargetingTaggerStore.react',['ReactComposerStoreBase','ReactComposerTaggerActionType','ReactComposerTaggerType'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){var l={};l[c('ReactComposerTaggerType').TARGETING]={};return {taggersData:l,taggersSource:{}};},function(l){if(l.type===c('ReactComposerTaggerActionType').SET_TAGGER_DATA)k&&k.$ReactTargetingTaggerStore1(l);});k=this;}j.prototype.getTaggerData=function(k,l){'use strict';return this.getComposerData(k).taggersData[l];};j.prototype.$ReactTargetingTaggerStore1=function(k){'use strict';var l=this.getComposerData(k.composerID),m=Array.isArray(k.taggerData)?k.taggerData.slice():Object.assign({},k.taggerData);l.taggersData[k.taggerID]=m;this.emitChange(k.composerID);};f.exports=new j();}),null);
__d("XPagesGetTargetingMetadataController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/targeting\/metadata\/",{page_id:{type:"Int",required:true},target_spec:{type:"String",required:true}});}),null);
__d('ReactComposerTargetingUtils',['fbt','AsyncRequest','ReactComposerTaggerActions','ReactComposerTaggerStore','ReactComposerTaggerType','ReactTargetingTaggerStore.react','XPagesGetTargetingMetadataController','XUIText.react','React','curry','intlList'],(function a(b,c,d,e,f,g,h){var i={fetchMetadata:function j(k,l,m){var n=c('XPagesGetTargetingMetadataController').getURIBuilder().setInt('page_id',l).setString('target_spec',JSON.stringify(k)).getURI();new (c('AsyncRequest'))().setURI(n).setHandler(c('curry')(this._onFetchMetadataHandler,m)).send();},_onFetchMetadataHandler:function j(k,l){var m=l.payload,n=m.sentences.map(function(o){return c('React').createElement('span',null,h._("{content_label} {children}",[h.param('content_label',c('React').createElement(c('XUIText.react'),{weight:'bold'},o.content)),h.param('children',c('intlList')(o.children,c('intlList').CONJUNCTIONS.OR))]));});k(JSON.parse(m.target_spec),c('React').createElement('span',null,c('intlList')(n,c('intlList').CONJUNCTIONS.NONE)),m.reach_estimate);},getDataFromComposerTaggerStore:function j(k){return c('ReactComposerTaggerStore').getTaggerData(k,c('ReactComposerTaggerType').TARGETING);},getDataFromTargetingTaggerStore:function j(k){return c('ReactTargetingTaggerStore.react').getTaggerData(k,c('ReactComposerTaggerType').TARGETING);},setData:function j(k,l){var m={},n=['targeting','gating','hints','targetingSentences','gatingSentences','reachEstimate'];n.map(function(o){if(l[o])m[o]=l[o];});c('ReactComposerTaggerActions').setTaggerDataWithoutLogging(k,c('ReactComposerTaggerType').TARGETING,m);}};f.exports=i;}),null);
__d('PagesComposerAudiences.react',['cx','fbt','BanzaiODS','BootloadedComponent.react','ReactComposerContextMixin','JSResource','LayerFadeOnHide','Link.react','React','ReactComposerTaggerStore','ReactComposerTargetingUtils','ReactTargetingTaggerStore.react','TargetingSpecStore','XUIDialog.react','XUIDialogBody.react','XUIDialogCancelButton.react','XUIDialogFooter.react','XUIDialogSaveButton.react','XUISpinner.react','XUIText.react','areEqual','isEmpty'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=587,l=c('React').createClass({displayName:'PagesComposerAudiences',mixins:[c('ReactComposerContextMixin')],propTypes:{shown:j.bool.isRequired,onToggle:j.func.isRequired,onSave:j.func.isRequired,rootElement:j.object,callbackDataStatus:j.func,callbackSelectionStatus:j.func,saveData:j.func,initialActiveKey:j.string,canSeeCompleteList:j.bool,useTargetingAsFilter:j.bool,canSeeDemographicOptions:j.bool,feedTargetingShowReachGK:j.bool,hideFeedTargeting:j.bool,useFromLegacyComposer:j.bool,shouldShowRestrictionTabNux:j.bool,shouldHideLeftFooter:j.bool,allowExclusionsWithoutInclusions:j.bool},getStores:function m(){if(this.props.useFromLegacyComposer)return [c('ReactTargetingTaggerStore.react')];return [c('ReactComposerTaggerStore')];},getInitialState:function m(){return {fetching:false,targeting:this.getInitialSavedData('targeting'),gating:this.getInitialSavedData('gating'),hints:this.getInitialSavedData('hints'),targetingSentences:this.getInitialSavedData('targetingSentences'),gatingSentences:this.getInitialSavedData('gatingSentences'),reachEstimate:this.getInitialReachEstimate()};},componentWillMount:function m(){if(this.props.callbackSelectionStatus)this.props.callbackSelectionStatus(true);},componentWillUnmount:function m(){if(this.props.callbackSelectionStatus)this.props.callbackSelectionStatus(false);},componentDidMount:function m(){c('BanzaiODS').bumpEntityKey('ui_audience_targeting','dialog_open');},_onSave:function m(){var n={};Object.assign(n,this.state);if(!c('isEmpty')(n.targeting))n.targeting=this.convertConnectionsToInterestsFromApiToTargetingSpec(c('TargetingSpecStore').getTargetingApiSpec());if(!c('isEmpty')(n.gating))n.gating=c('TargetingSpecStore').getTargetingApiSpec();if(this.props.useFromLegacyComposer){this._onSaveLegacy(n);}else this._onSaveStore(n);this.props.onSave();},_onSaveStore:function m(n){c('ReactComposerTargetingUtils').setData(this.context.composerID,n);},_isDefaultSpec:function m(n){return c('areEqual')(n,{age_max:65,age_min:13});},_onSaveLegacy:function m(n){if(this.props.callbackDataStatus)this.props.callbackDataStatus(n.gating&&!c('isEmpty')(n.gating)&&!this._isDefaultSpec(n.gating)||n.targeting&&!c('isEmpty')(n.targeting)&&!this._isDefaultSpec(n.targeting)||n.hints&&!c('isEmpty')(n.hints)&&!this._isDefaultSpec(n.hints));c('ReactComposerTargetingUtils').setData(this.context.targetID,n);},_onTargetingChange:function m(n){if(!this.props.useTargetingAsFilter){delete n.age_min;delete n.age_max;}if(c('areEqual')(this.state.targeting,n)||c('areEqual')(this.state.hints,n))return;this.setState({fetching:true});var o=this.props.useTargetingAsFilter?n:Object.assign({},n,this.state.gating);c('ReactComposerTargetingUtils').fetchMetadata(o,this.context.targetID,this._onTargetingChangeHandler);},_onTargetingChangeHandler:function m(n,o,p){if(this.props.useTargetingAsFilter){this.setState({fetching:false,targeting:n,targetingSentences:o,reachEstimate:p});}else this.setState({fetching:false,hints:n,targetingSentences:o});},_onGatingChange:function m(n){if(c('areEqual')(this.state.gating,n))return;this.setState({fetching:true});var o=this.props.useTargetingAsFilter?n:Object.assign({},n,this.state.hints);c('ReactComposerTargetingUtils').fetchMetadata(o,this.context.targetID,this._onGatingChangeHandler);},_onGatingChangeHandler:function m(n,o){if(this.props.useTargetingAsFilter){this.setState({fetching:false,gating:n,gatingSentences:o});}else this.setState({fetching:false,gating:n,targetingSentences:o});},convertConnectionsToInterestsFromApiToTargetingSpec:function m(n){if(n&&n.connections&&!n.fan_of){n.fan_of=n.connections;delete n.connections;}return n;},convertInterestsToConnectionsFromTargetingSpecToApi:function m(n){if(n&&n.fan_of&&!n.connections){n.connections=n.fan_of;delete n.fan_of;}return n;},getInitialSavedData:function m(n){var o={};if(this.props.useFromLegacyComposer){o=this.getSavedSpec(n,this.context.targetID);}else o=this.getSavedSpec(n,this.context.composerID);return this.convertInterestsToConnectionsFromTargetingSpecToApi(o);},getSavedSpec:function m(n,o){if(this.props.useFromLegacyComposer){var p=c('ReactComposerTargetingUtils').getDataFromTargetingTaggerStore(o);}else p=c('ReactComposerTargetingUtils').getDataFromComposerTaggerStore(o);return p==null?null:p[n];},getInitialReachEstimate:function m(){if(!this.props.useTargetingAsFilter){return null;}else{var n=c('ReactComposerTargetingUtils').getDataFromComposerTaggerStore(this.context.composerID);return n==null?null:n.reachEstimate;}},renderReachEstimate:function m(){if(!this.state.reachEstimate)return null;var n=this.state.reachEstimate===20?i._("0-20"):this.state.reachEstimate,o=i._("Reach estimate for news feed targeting: {estimate_number}",[i.param('estimate_number',n)]);return c('React').createElement(c('XUIText.react'),null,o);},renderHelpLink:function m(){var n=i._("Have a Question?"),o='https://www.facebook.com/facebookmedia/get-started/'+'audience-optimization/',p=c('React').createElement(c('Link.react'),{href:o,target:'_blank'},i._("Read our Guidelines."));return c('React').createElement('div',{className:"_3xrd"},c('React').createElement(c('XUIText.react'),null,n),' ',p);},renderFooterLeftContent:function m(){if(this.props.shouldHideLeftFooter)return null;if(!this.props.useTargetingAsFilter)return this.renderHelpLink();return this.renderReachEstimate();},render:function m(){var n=c('React').createElement('div',{className:"_1220"},c('React').createElement(c('XUISpinner.react'),null)),o=this.props.useTargetingAsFilter?this.state.targeting:this.state.hints;return c('React').createElement(c('XUIDialog.react'),{shown:this.props.shown,behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},layerHideOnBlur:false,onToggle:this.props.onToggle,width:k},c('React').createElement(c('XUIDialogBody.react'),null,c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('PagesComposerAudiencesBody.react').__setRef('PagesComposerAudiences.react'),bootloadPlaceholder:n,initialTargetingSpec:o,initialGatingSpec:this.state.gating,onTargetingChange:this._onTargetingChange,onGatingChange:this._onGatingChange,initialActiveKey:this.props.initialActiveKey,canSeeCompleteList:this.props.canSeeCompleteList,useTargetingAsFilter:this.props.useTargetingAsFilter,canSeeDemographicOptions:this.props.canSeeDemographicOptions,feedTargetingShowReachGK:this.props.feedTargetingShowReachGK,hideFeedTargeting:this.props.hideFeedTargeting,shouldShowRestrictionTabNux:this.props.shouldShowRestrictionTabNux,allowExclusionsWithoutInclusions:this.props.allowExclusionsWithoutInclusions})),c('React').createElement(c('XUIDialogFooter.react'),{leftContent:this.renderFooterLeftContent()},c('React').createElement(c('XUIDialogCancelButton.react'),{use:'default'}),c('React').createElement(c('XUIDialogSaveButton.react'),{className:"_2uyv",use:'confirm',action:'confirm',disabled:this.state.fetching,onClick:this._onSave})));}});f.exports=l;}),null);
__d('ReactComposerPoliticalInfoUtils',['ReactComposerTaggerActions','ReactComposerTaggerStore','ReactComposerTaggerType'],(function a(b,c,d,e,f,g){var h={getPoliticalDistrict:function i(j){var k=arguments.length<=1||arguments[1]===undefined?null:arguments[1],l=c('ReactComposerTaggerStore').getTaggerData(j,c('ReactComposerTaggerType').POLITICAL_INFO);if(k&&(!l||!l.politicalDistrict))l=c('ReactComposerTaggerStore').getTaggerData(k,c('ReactComposerTaggerType').POLITICAL_INFO);return l?l.politicalDistrict:null;},clear:function i(j,k){this.setData(j,k,{});},setData:function i(j,k,l){c('ReactComposerTaggerActions').setTaggerDataWithoutLogging(j,c('ReactComposerTaggerType').POLITICAL_INFO,l);if(k)c('ReactComposerTaggerActions').setTaggerDataWithoutLogging(k,c('ReactComposerTaggerType').POLITICAL_INFO,l);}};f.exports=h;}),null);
__d('ReactComposerPagesPrivacySelector.react',['cx','fbt','ix','ReactComposerContextMixin','Image.react','PagesComposerAudiences.react','PopoverMenu.react','ReactComponentWithPureRenderMixin','React','ReactComposerTargetingUtils','ReactComposerPoliticalInfoUtils','ReactLayeredComponentMixin_DEPRECATED','ReactSelectorUtils','SimpleNUXMessage','SimpleNUXMessageTypes','Tooltip.react','XUIAmbientNUX.react','XUIGrayText.react','ReactXUIMenu','XUIMenuSeparator.react','XUIMenuStaticItem.react','XUISelector.react','XUISelectorButton.react','DistrictTargetingUtils','DistrictTargetingTypedLogger','PagesComposerAudiencesConstants'],(function a(b,c,d,e,f,g,h,i,j){var k=c('ReactXUIMenu').SelectableMenu,l=c('XUISelector.react').Option,m=c('PagesComposerAudiencesConstants').TABS,n=j("76588"),o=j("76586"),p='everyone',q='custom',r='political_district_',s=c('React').PropTypes,t=c('React').createClass({displayName:'ReactComposerPagesPrivacySelector',mixins:[c('ReactComposerContextMixin'),c('ReactComponentWithPureRenderMixin'),c('ReactLayeredComponentMixin_DEPRECATED')],propTypes:{gatingSentences:s.object,useReactPrivacyDialogForLegacy:s.bool,isVideoDialog:s.bool,useTargetingAsFilter:s.bool,targetingEnabled:s.bool,defaultDemographicsList:s.array,shouldShowDistrictTargetingNux:s.bool},getInitialState:function u(){var v=this.props.defaultDemographicsList&&this.props.defaultDemographicsList.length>0,w=c('SimpleNUXMessage').hasUserSeenMessage(c('SimpleNUXMessageTypes').POLITICAL_DISTRICT_TARGETING_COMPOSER_OPTION);return {dialogShown:false,showDistrictTargetingNux:v&&!w&&this.props.shouldShowDistrictTargetingNux,gatingSentences:this.props.gatingSentences};},_getSelectedValue:function u(){var v=this.context.composerID,w=c('ReactComposerPoliticalInfoUtils').getPoliticalDistrict(v);if(w){return this._getDistrictTargetingOptionName(w);}else if(this.state.gatingSentences){return q;}else return p;},_getSelectorButton:function u(){var v=this.state.gatingSentences?o:n;return c('React').createElement(c('XUISelectorButton.react'),{image:c('React').createElement(c('Image.react'),{src:v}),suppressed:true});},_getDistrictTargetingOptionName:function u(v){return r.concat(v);},_getMenuItems:function u(){var v=[],w=this.props.defaultDemographicsList;if(w&&w.length>0){v.push(c('React').createElement(c('XUIMenuSeparator.react'),null));w.forEach(function(y){var z=y.targeting_spec.political_district;v.push(c('React').createElement(l,{icon:c('React').createElement(c('Image.react'),{src:o}),value:this._getDistrictTargetingOptionName(z),onclick:function(){return this._onSelectDefaultDemographic(y);}.bind(this)},y.name));}.bind(this));}var x=[];if(this.props.targetingEnabled)x.push(c('React').createElement(c('XUIMenuSeparator.react'),null),c('React').createElement(c('XUIMenuStaticItem.react'),null,c('React').createElement(c('XUIGrayText.react'),{shade:'light'},i._("Limit Audience By:"))),c('React').createElement(l,{icon:c('React').createElement(c('Image.react'),{src:o}),value:q,onclick:function(){this._onToggle(true);this._onClearPrivacy();}.bind(this)},i._("Demographics")));return [c('React').createElement(l,{icon:c('React').createElement(c('Image.react'),{src:n}),value:p,onclick:this._onClearPrivacy},i._("Public"))].concat(v).concat(x);},_onToggle:function u(v){setTimeout(function(){return this.setState({dialogShown:v});}.bind(this),0);},_updateGatingData:function u(v,w){var x=c('ReactComposerTargetingUtils').getDataFromComposerTaggerStore(this.context.composerID),y=Object.assign({},x);y.gating=v;y.gatingSentences=w;this.setState({gatingSentences:w});c('ReactComposerTargetingUtils').setData(this.context.composerID,y);},_onSelectDefaultDemographic:function u(v){this._updateGatingData(null,c('React').createElement('span',null,v.name));},_onClearPrivacy:function u(){this._updateGatingData(null,null);},renderLayers:function u(){if(!this.state.dialogShown)return {};return c('React').createElement(c('PagesComposerAudiences.react'),{shown:this.state.dialogShown,onToggle:this._onToggle,onSave:function(){return this._onToggle(false);}.bind(this),initialActiveKey:m.GATING,useFromLegacyComposer:this.props.isVideoDialog,useTargetingAsFilter:this.props.useTargetingAsFilter});},render:function u(){var v=this._getSelectedValue(),w=c('ReactSelectorUtils').processMenuItems(this._getMenuItems(),v),x=c('React').createElement(k,{value:v,onItemClick:function(event,y){return this._onMenuItemClick(event,y);}.bind(this)},w.items);return c('React').createElement(c('Tooltip.react'),{tooltip:this.state.gatingSentences},c('React').createElement('div',{className:"_5dd8"},c('React').createElement(c('PopoverMenu.react'),{menu:x},this._getSelectorButton()),this._renderDistrictTargetingNux()));},_renderDistrictTargetingNux:function u(){return c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:function(){return this;}.bind(this),position:'above',shown:this.state.showDistrictTargetingNux,onCloseButtonClick:function(){c('SimpleNUXMessage').markMessageSeenByUser(c('SimpleNUXMessageTypes').POLITICAL_DISTRICT_TARGETING_COMPOSER_OPTION);this.setState({showDistrictTargetingNux:false});}.bind(this),offsetX:14,key:'districtTargetingNUX'},c('DistrictTargetingUtils').getComposerNUXContent());},_onMenuItemClick:function u(event,v){var w=v.item.getValue(),x=false;if(w&&w.startsWith(r)){x=true;var y=w.replace(r,'');c('ReactComposerPoliticalInfoUtils').setData(this.context.composerID,this.context.targetID,{isDistrictTargeting:x,politicalDistrict:y});new (c('DistrictTargetingTypedLogger'))().setEvent('audience_option_select').setPageID(this.context.targetID).setDistrictID(y).log();}else c('ReactComposerPoliticalInfoUtils').clear(this.context.composerID,this.context.targetID);}});f.exports=t;}),null);
__d('ReactComposerPagesPrivacyContainer.react',['fbt','ix','cx','ReactComposerPagesPrivacySelector.react','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerTaggerStore','ReactComposerTaggerType','ReactComponentWithPureRenderMixin','React','Image.react','Tooltip.react'],(function a(b,c,d,e,f,g,h,i,j){var k=i("76589"),l=c('React').PropTypes,m=c('React').createClass({displayName:'ReactComposerPagesPrivacyContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerTaggerStore'))],propTypes:{lockToPrivacy:l.string,useTargetingAsFilter:l.bool,targetingEnabled:l.bool,defaultDemographicsList:l.array,shouldShowDistrictTargetingNux:l.bool},statics:{calculateState:function n(o,p){var q=c('ReactComposerTaggerStore').getTaggerData(o,c('ReactComposerTaggerType').TARGETING)||{};return {gatingSentences:q.gatingSentences};}},render:function n(){if(this.props.lockToPrivacy){return this._renderLockedIcon();}else return this._renderSelector();},_renderSelector:function n(){return c('React').createElement(c('ReactComposerPagesPrivacySelector.react'),{gatingSentences:this.state.gatingSentences,useTargetingAsFilter:this.props.useTargetingAsFilter,targetingEnabled:this.props.targetingEnabled,defaultDemographicsList:this.props.defaultDemographicsList,shouldShowDistrictTargetingNux:this.props.shouldShowDistrictTargetingNux});},_renderLockedIcon:function n(){switch(this.props.lockToPrivacy){case 'everyone':return c('React').createElement('div',{className:"_3jv0"},c('React').createElement(c('Tooltip.react'),{tooltip:h._("Everyone can see posts on this public page")},c('React').createElement('div',{className:"_3jv1"},c('React').createElement(c('Image.react'),{src:k}))));default:return null;}}});f.exports=m;}),null);
__d('ReactComposerProductTaggerButton.react',['fbt','cx','AsyncRequest','CommerceProductTaggerType','CommerceSelfServeNUXType','ReactComposerLoggingName','ReactComposerTaggerActions','ReactComposerTaggerButtonMixin','ReactComposerTaggerType','React','XCommerceSelfServeMerchantNUXSeenController','XUIAmbientNUX.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=c('React').createClass({displayName:'ReactComposerProductTaggerButton',mixins:[c('ReactComposerTaggerButtonMixin')],statics:{loggingName:c('ReactComposerLoggingName').PRODUCT_TAGGER,taggerID:c('ReactComposerTaggerType').PRODUCT},propTypes:{nuxType:j.string.isRequired,productTaggerType:j.string.isRequired},getTitle:function l(){return h._("Tag a product");},getNUX:function l(){if(!this.state.showNUX||!this.state.contextRef)return null;var m=this.props.productTaggerType===c('CommerceProductTaggerType').SHOP_PAGE?h._("Tag products from your shop in your post"):h._("Tag products in your post");return c('React').createElement(c('XUIAmbientNUX.react'),{alignment:'center',contextRef:function(){return this.state.contextRef;}.bind(this),onCloseButtonClick:this._hideNUX,position:'below',shown:true,width:'auto'},m);},getTooltip:function l(){return h._("Tag a product");},getClassName:function l(){return "_22ma";},getRef:function l(){return 'fbReactComposerProductTaggerButton';},componentDidMount:function l(){this.setState({contextRef:this.refs.fbReactComposerProductTaggerButton});},_hideNUX:function l(){c('ReactComposerTaggerActions').handleSetTaggerShowNUX(this.context.composerID,c('ReactComposerTaggerType').PRODUCT,false);var m=c('XCommerceSelfServeMerchantNUXSeenController').getURIBuilder().setInt('page_id',this.context.actorID).setEnum('nux_type',this.props.nuxType).getURI();new (c('AsyncRequest'))(m).send();}});f.exports=k;}),null);
__d('CommerceCurrencySelector.react',['CurrencyConfig','CommerceB2CUnsupportedCurrencies','React','XUISingleSelector.react'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('XUISingleSelector.react').Option,k=c('React').PropTypes,l=200,m='FBZ';h=babelHelpers.inherits(n,c('React').Component);i=h&&h.prototype;n.prototype.render=function(){var o=this.$CommerceCurrencySelector1(),p=this.props.selectedCurrency;o=o.filter(function(r){return !this.$CommerceCurrencySelector2(r.iso);}.bind(this));if(this.$CommerceCurrencySelector2(p))p='USD';var q=o.map(function(r){return c('React').createElement(j,{key:r.iso,value:r.iso},r.name);});return c('React').createElement(c('XUISingleSelector.react'),{maxheight:l,value:p,onChange:this.props.onChange},q);};n.prototype.$CommerceCurrencySelector2=function(o){return Object.values(c('CommerceB2CUnsupportedCurrencies')).indexOf(o)!==-1;};n.prototype.$CommerceCurrencySelector1=function(){var o=c('CurrencyConfig').allCurrenciesByCode,p=Object.keys(o);return p.map(function(q){return o[q];}).filter(function(q){return q.iso!==m&&q.name!==null;}).sort(function(q,r){return q.name.localeCompare(r.name);});};function n(){h.apply(this,arguments);}n.propTypes={onChange:k.func.isRequired,selectedCurrency:k.string.isRequired,selectedPaymentProvider:k.number};f.exports=n;}),null);
__d('CommerceInventoryToggle.react',['cx','fbt','React','AdsHelpLink.react','FBToggleSwitch.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=c('React').createClass({displayName:'CommerceInventoryToggle',propTypes:{disabled:j.bool.isRequired,inventory:j.number.isRequired,setInventoryInfo:j.func},render:function l(){var m=this.props.inventory>0?i._("In Stock"):i._("Out of Stock");return c('React').createElement('div',{className:"_3-95"},c('React').createElement('div',{className:"_2pim"},c('React').createElement(c('FBToggleSwitch.react'),{disabled:this.props.disabled,animate:true,checked:this.props.inventory>0,onToggle:this.props.setInventoryInfo}),c('React').createElement('span',{className:"_3jn"},m,c('React').createElement(c('AdsHelpLink.react'),{width:350,position:'above'},i._("Mark this product as in stock or out of stock")))));}});f.exports=k;}),null);
__d('PageCommerceProductVariantPage.react',['ix','cx','fbt','glyph','invariant','AccessibleTableParts.react','AdsCurrencyInput.react','AdsHelpLink.react','CommerceInventoryAvailabilityOptions','CommerceInventoryToggle.react','CommerceProductVariantType','CommerceSelfServeSection','CommerceUI','DummySearchSource','FreeformSearchSource','Image.react','Layout.react','Link.react','NumberInput.atlas','CommerceCurrencyInputUtils','React','SearchableEntry','XUISingleSelector.react','XUITable.react','XUITokenizer.react','isEmpty'],(function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';var m=c('React').PropTypes,n=c('AccessibleTableParts.react').BodyRow,o=c('AccessibleTableParts.react').HeadRow,p=c('Layout.react').Column,q=c('Layout.react').FillColumn,r=c('XUISingleSelector.react').Option,s=c('React').createClass({displayName:'PageCommerceProductVariantPage',propTypes:{currencyCode:m.string.isRequired,defaultVariantPrice:m.number,getPriceError:m.func.isRequired,isOnSale:m.bool.isRequired,inventoryType:m.string.isRequired,setVariantInfo:m.func.isRequired,variants:m.arrayOf(m.shape({label:m.string,options:m.arrayOf(m.string)})).isRequired,variantItems:m.objectOf(m.shape({properties:m.object,price:m.number.isRequired,salePrice:m.number.isRequired,inventory:m.number,productID:m.number})).isRequired},_cachedItems:{},_deepClone:function t(u){return JSON.parse(JSON.stringify(u));},getInitialState:function t(){this._cachedItems=this._deepClone(this.props.variantItems);return {searchSource:new (c('FreeformSearchSource'))(new (c('DummySearchSource'))(),function(u){return u;},0)};},render:function t(){var u=null;if(this.props.variants.length<c('CommerceUI').MAX_VARIANTS)u=c('React').createElement(c('Link.react'),{onClick:this._addNewVariantInput},j._("Add Variant"));return c('React').createElement('div',{className:"_3-8j"},c('React').createElement('div',{ref:'variant_input_list'},this.props.variants.map(function(v,w){return this._getVariantInput(v,w,this._getVariantLabels());}.bind(this))),u,this._getVariantsTable());},_getVariantInput:function t(u,v,w){return c('React').createElement('div',{key:'variant'+v,className:"_3-95"},c('React').createElement(c('Layout.react'),null,c('React').createElement(p,null,this._getVariantOptions(u,v,w)),c('React').createElement(q,{className:"_2pis"},c('React').createElement(c('XUITokenizer.react'),{entries:this._getTokenizerEntries(u),searchSource:this.state.searchSource,onRemoveEntryAttempt:this._onRemoveVariantOptionAttempt.bind(this,u,v),onAddEntryAttempt:this._onAddVariantOptionAttempt.bind(this,u,v),tokenizeQueryString:this._tokenizeQueryString.bind(this,u,v),selectOnBlur:true})),c('React').createElement(p,null,c('React').createElement(c('Image.react'),{className:"_11dw",onClick:this._removeVariant.bind(this,u,v),src:h("101449")}))));},_getVariantsTable:function t(){if(c('isEmpty')(this.props.variants))return null;var u=[];for(var v in this.props.variantItems){var w=this.props.variantItems[v],x=w.properties,y=[];this.props.variants.forEach(function(ca,da){var ea=x&&x[ca.label]?x[ca.label]:'';y.push(c('React').createElement('td',{className:"_2ncv",key:da},ea));});y.push(c('React').createElement('td',{width:'50',key:v+'inventory'},this._getInventoryInput(v,w.inventory)));var z=c('CommerceCurrencyInputUtils').convertPEFormatToPBFormat(w.price,this.props.currencyCode),aa=c('CommerceCurrencyInputUtils').convertPEFormatToPBFormat(w.salePrice,this.props.currencyCode);y.push(c('React').createElement('td',{width:'50',key:v+'price'},c('React').createElement(c('AdsCurrencyInput.react'),{currency:this.props.currencyCode,onDataUpdate:this._updateVariantPrice.bind(this,v),value:z!==null?z:0,xuiError:this.props.getPriceError(w.price)})));if(this.props.isOnSale)y.push(c('React').createElement('td',{width:'50',key:v+'salePrice'},c('React').createElement(c('AdsCurrencyInput.react'),{currency:this.props.currencyCode,onDataUpdate:this._updateVariantSalePrice.bind(this,v),value:aa!==null?aa:0,xuiError:this.props.getPriceError(w.salePrice)})));u.push(c('React').createElement(n,{key:v},y));}var ba=[];this.props.variants.forEach(function(ca,da){ba.push(c('React').createElement('th',{key:ca.label+da},this._getVariantLabelDescription(String(ca.label))));}.bind(this));ba.push(c('React').createElement('th',{key:'inventory'},j._("Inventory")));ba.push(c('React').createElement('th',{key:'price'},j._("Price")));if(this.props.isOnSale)ba.push(c('React').createElement('th',{key:'salePrice'},j._("Sale Price"),c('React').createElement(c('AdsHelpLink.react'),{width:350,position:'below'},j._("You can disable individual \"Sale Prices\" by setting them equal to regular \"Prices\"."))));return c('React').createElement(c('XUITable.react'),{outerBorder:true,className:"_2ncw"},c('React').createElement('thead',null,c('React').createElement(o,null,ba)),c('React').createElement('tbody',null,u));},_updateVariantPrice:function t(u,v){var w=c('CommerceCurrencyInputUtils').convertPBFormatToPEFormat(v,this.props.currencyCode);this._updateVariantItem(u,'price',w);},_getInventoryInput:function t(u,v){return this.props.inventoryType===c('CommerceSelfServeSection').IN_STOCK_TOGGLE?c('React').createElement(c('CommerceInventoryToggle.react'),{disabled:false,inventory:v!==null?v:0,setInventoryInfo:function(w){var x=w?c('CommerceInventoryAvailabilityOptions').INVENTORY_IN_STOCK:c('CommerceInventoryAvailabilityOptions').INVENTORY_OUT_OF_STOCK;this._updateVariantItem(u,'inventory',x);}.bind(this)}):c('React').createElement(c('NumberInput.atlas'),{isZeroValidValue:true,name:'inventory',nonnegative:true,value:v,formatNumber:false,onValueUpdated:this._updateVariantItem.bind(this,u,'inventory')});},_updateVariantSalePrice:function t(u,v){var w=c('CommerceCurrencyInputUtils').convertPBFormatToPEFormat(v,this.props.currencyCode);this._updateVariantItem(u,'salePrice',w);},_updateVariantItem:function t(u,v,w){var x=this.props.variantItems;x[u][v]=w;this._cachedItems[u][v]=w;this.props.setVariantInfo({variantItems:x});},_getVariantItems:function t(u){var v={};if(u.length===0)return v;this._getVariantCombos(u.slice(0)).forEach(function(w){var x=[];for(var y in w)x.push(y+w[y]);x.sort();var z=JSON.stringify(x);if(z in this._cachedItems){v[z]=this._deepClone(this._cachedItems[z]);}else{v[z]={properties:w,price:this.props.defaultVariantPrice,salePrice:this.props.defaultVariantPrice,inventory:0};this._cachedItems[z]=this._deepClone(v[z]);}}.bind(this));return v;},_getVariantCombos:function t(u){if(u.length===0)return [{}];var v=[],w=u.shift(),x=this._getVariantCombos(u.slice(0));if(w.options.length==0)return x;w.options.forEach(function(y){x.forEach(function(z){var aa=Object.assign({},z);aa[w.label]=y;v.push(aa);});});return v;},_getTokenizerEntries:function t(u){return u.options.map(function(v){return new (c('SearchableEntry'))({uniqueID:v,title:v});});},_onRemoveVariantOptionAttempt:function t(u,v,w){var x=w.getTitle().trim(),y=u.options.indexOf(x);if(y>=0)u.options.splice(y,1);this._updateVariant(u,v);},_onAddVariantOptionAttempt:function t(u,v,w){var x=w.getTitle().trim();if(u.options.indexOf(x)>=0||x.length===0)return;u.options.push(x);this._updateVariant(u,v);},_updateVariant:function t(u,v){var w=this.props.variants;w[v]=u;var x=this._getVariantItems(w);this.props.setVariantInfo({variants:w,variantItems:x});},_tokenizeQueryString:function t(u,v,w){if(!w||!w.includes(','))return null;var x=w.split(',').filter(function(z){return z!=='';}),y=x.pop();x.map(function(z){this._onAddVariantOptionAttempt(u,v,new (c('SearchableEntry'))({uniqueID:z,title:z}));}.bind(this));return new (c('SearchableEntry'))({uniqueID:y,title:y});},_addNewVariantInput:function t(){var u=this.props.variants;u.push(this._getDefaultVariant());this.props.setVariantInfo({variants:u,variantItems:this._getVariantItems(u)});},_removeVariant:function t(u,v){var w=this.props.variants;w.splice(v,1);this.props.setVariantInfo({variants:w,variantItems:this._getVariantItems(w)});},_getVariantLabels:function t(){return this.props.variants.map(function(u){return String(u.label);});},_getDefaultVariant:function t(){var u=this._getVariantLabels(),v=void 0;for(var w in c('CommerceProductVariantType')){var x=c('CommerceProductVariantType')[w];if(u.indexOf(x)===-1){v=x;break;}}return {label:v,options:[]};},_getVariantOptions:function t(u,v,w){var x=[];for(var y in c('CommerceProductVariantType')){var z=c('CommerceProductVariantType')[y];if(u.label!==z&&w.indexOf(z)!==-1)continue;x.push(c('React').createElement(r,{key:y+v,value:z},this._getVariantLabelDescription(z)));}return c('React').createElement(c('XUISingleSelector.react'),{className:"_11dy",onChange:this._onSelectorChange.bind(this,u,v),value:u.label,size:'large'},x);},_getVariantLabelDescription:function t(u){var v=u.toUpperCase();Object.prototype.hasOwnProperty.call(c('CommerceProductVariantType'),v)||l(0);switch(c('CommerceProductVariantType')[v]){case c('CommerceProductVariantType').SIZE:return j._("Size");case c('CommerceProductVariantType').COLOR:return j._("Color");case c('CommerceProductVariantType').MATERIAL:return j._("Material");case c('CommerceProductVariantType').LENGTH:return j._("Length");case c('CommerceProductVariantType').FIT:return j._("Fit");case c('CommerceProductVariantType').WIDTH:return j._("Width");case c('CommerceProductVariantType').SCENT:return j._("Scent");case c('CommerceProductVariantType').FLAVOR:return j._("Flavor");case c('CommerceProductVariantType').MODEL:return j._("Model");case c('CommerceProductVariantType').FORMAT:return j._("Format");case c('CommerceProductVariantType').PLATFORM:return j._("Platform");case c('CommerceProductVariantType').EDITION:return j._("Edition");default:return u;}},_onSelectorChange:function t(u,v,w){var x=this.props.variants;x[v].label=w.value;this.props.setVariantInfo({variants:x,variantItems:this._getVariantItems(x)});u.label=w.value;this._updateVariant(u,v);}});f.exports=s;}),null);
__d('PageContentTabDispatcher',['Dispatcher_DEPRECATED','PageContentTabConstants'],(function a(b,c,d,e,f,g){var h,i,j=c('PageContentTabConstants').ACTION_TYPES,k=c('PageContentTabConstants').PAYLOAD_SOURCES,l=c('PageContentTabConstants').TABS;h=babelHelpers.inherits(m,c('Dispatcher_DEPRECATED'));i=h&&h.prototype;m.prototype.handleServerResponse=function(n){'use strict';this.dispatch({action:n,payloadSource:k.SERVER});};m.prototype.handleViewAction=function(n){'use strict';this.dispatch({action:n,payloadSource:k.VIEW_ACTION});};m.prototype.handleInitialization=function(n,o,p,q){'use strict';if(n.externalURI)return;this.dispatch({action:{posts:{key:o,data:p},actionType:j.ADD_POSTS,tab:n,pageID:q},payloadSource:k.SERVER});};m.prototype.handlePostRemoved=function(n,o,p){'use strict';if(p){this.dispatch({payloadSource:k.VIEW_ACTION,action:{actionType:j.REMOVE_POST,postID:o,tab:p,pageID:n}});}else Object.keys(l).forEach(function(q){return this.dispatch({payloadSource:k.VIEW_ACTION,action:{actionType:j.REMOVE_POST,postID:o,tab:q,pageID:n}});}.bind(this),this);};m.prototype.handlePostsRemoved=function(n,o,p){'use strict';if(p){this.dispatch({payloadSource:k.VIEW_ACTION,action:{actionType:j.REMOVE_POSTS,postIDs:o,tab:p,pageID:n}});}else Object.keys(l).forEach(function(q){return this.dispatch({payloadSource:k.VIEW_ACTION,action:{actionType:j.REMOVE_POSTS,postIDs:o,tab:q,pageID:n}});}.bind(this));};m.prototype.handlePageInitialization=function(n){'use strict';this.dispatch({payloadSource:k.SERVER,action:{page:n,actionType:j.INIT_PAGE}});};m.prototype.handlePostCreated=function(n,o,p){'use strict';this.dispatch({payloadSource:k.VIEW_ACTION,action:{tab:n,actionType:j.CREATE_POST,post:o,pageID:p}});};m.prototype.handlePostsCreated=function(n,o,p){'use strict';this.dispatch({payloadSource:k.VIEW_ACTION,action:{tab:n,actionType:j.CREATE_POSTS,posts:o,pageID:p}});};m.prototype.handlePostChanged=function(n,o,p,q){'use strict';this.dispatch({payloadSource:k.SERVER,action:{actionType:j.EDIT_POSTS,isViewedUpdated:q,posts:[n],tab:o,pageID:p}});};m.prototype.handlePostsChanged=function(n,o,p,q){'use strict';this.dispatch({payloadSource:k.SERVER,action:{actionType:j.EDIT_POSTS,isViewedUpdated:q,posts:n,tab:o,pageID:p}});};m.prototype.handleStaleContentNoticeStatus=function(n,o,p){'use strict';this.dispatch({payloadSource:k.VIEW_ACTION,action:{tab:o,actionType:j.UPDATE_STALE_CONTENT_NOTICE,status:p,pageID:n}});};m.prototype.handleFilterStatus=function(n,o,p){'use strict';this.dispatch({payloadSource:k.VIEW_ACTION,action:{tab:o,actionType:j.UPDATE_FILTER_STATUS,status:p,pageID:n}});};m.prototype.handleSetCustomTabState=function(n,o,p){'use strict';this.dispatch({payloadSource:k.VIEW_ACTION,action:{tab:n,actionType:j.SET_CUSTOM_TAB_STATE,customTabState:o,pageID:p}});};m.prototype.handleError=function(n,o,p){'use strict';this.dispatch({payloadSource:k.SERVER,action:{tab:n,actionType:j.ERROR,error:o,pageID:p}});};m.prototype.handlePagingChanged=function(n,o,p,q){'use strict';this.dispatch({payloadSource:k.VIEW_ACTION,action:{tab:o,pageID:n,actionType:j.PAGING_CHANGED,currentPage:q,queryKey:p}});};m.prototype.handleQueryKeyChanged=function(n,o,p){'use strict';this.dispatch({payloadSource:k.VIEW_ACTION,action:{tab:o,actionType:j.QUERY_KEY_CHANGED,pageID:n,queryKey:p}});};m.prototype.handleQueryChanged=function(n,o,p){'use strict';this.dispatch({payloadSource:k.VIEW_ACTION,action:{tab:o,actionType:j.QUERY_CHANGED,pageID:n,query:p}});};m.prototype.handleFilterChanged=function(n,o,p){'use strict';this.dispatch({payloadSource:k.VIEW_ACTION,action:{tab:o,actionType:j.FILTER_CHANGED,pageID:n,filter:p}});};m.prototype.handleSortChanged=function(n,o,p){'use strict';this.dispatch({payloadSource:k.VIEW_ACTION,action:{tab:o,actionType:j.SORT_CHANGED,pageID:n,sort:p}});};m.prototype.handleBringPostToTop=function(n,o,p){'use strict';this.dispatch({payloadSource:k.VIEW_ACTION,action:{tab:n,actionType:j.BRING_POST_TO_TOP,post:o,pageID:p}});};m.prototype.handleSetVideoListID=function(n,o,p){'use strict';this.dispatch({payloadSource:k.VIEW_ACTION,action:{tab:o,actionType:j.SET_VIDEO_LIST_ID,pageID:n,videoListID:p}});};m.prototype.handleSetVideoListHeaderInfo=function(n,o){'use strict';this.dispatch({payloadSource:k.VIEW_ACTION,action:{tab:n,actionType:j.SET_VIDEO_LIST_HEADER_INFO,headerInfo:o}});};m.prototype.handleRequestVideoListHeaderInfo=function(n){'use strict';this.dispatch({payloadSource:k.VIEW_ACTION,action:{tab:n,actionType:j.REQUEST_VIDEO_LIST_HEADER_INFO}});};function m(){'use strict';h.apply(this,arguments);}f.exports=new m();}),null);
__d('ComputerPanelActionState',['keyMirror'],(function a(b,c,d,e,f,g){var h=c('keyMirror')({NEUTRAL:null,DROP:null});f.exports=h;}),null);
__d('DragDropFilePicker',['DragDropTarget','mixin','ArbiterMixin','FilePickerEvent','FileSelectionContainer','createArrayFromMixed','SelectionSource'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k,l){'use strict';i.constructor.call(this);this.$DragDropFilePicker1=new (c('DragDropTarget'))(k);if(l.onDocumentDragEnterCallback)this.$DragDropFilePicker1.setOnDocumentDragEnterCallback(l.onDocumentDragEnterCallback);if(l.onDocumentDragLeaveCallback)this.$DragDropFilePicker1.setOnDocumentDragLeaveCallback(l.onDocumentDragLeaveCallback);if(l.onDragEnterCallback)this.$DragDropFilePicker1.setOnDragEnterCallback(l.onDragEnterCallback);if(l.onDragLeaveCallback)this.$DragDropFilePicker1.setOnDragLeaveCallback(l.onDragLeaveCallback);this.$DragDropFilePicker1.setOnFilesDropCallback(function(m){var n=c('createArrayFromMixed')(m).filter(function(o){return !l.isFileValid||l.isFileValid(o);}).map(function(o){return new (c('FileSelectionContainer'))(o);});if(n.length>0){this.inform(c('FilePickerEvent').SELECTED,{sender:this,source:c('SelectionSource').FILE,selections:n});}else l.onDocumentDragLeaveCallback.call(null);}.bind(this));this.$DragDropFilePicker1.enable();}j.prototype.disable=function(){'use strict';this.$DragDropFilePicker1.disable();};f.exports=j;}),null);
__d('OmnipickerHTML5FilePickerFactory',['fbt','HTML5FilePicker','PUWApplications','PUWMethods','PUWUploaders'],(function a(b,c,d,e,f,g,h){var i={create:function j(k){return new (c('HTML5FilePicker'))(k,{accept:'image/*',fallbackFunction:function l(){},multiple:true,qn:'todo',waterfallApp:c('PUWApplications').WEB_OMNIPICKER,waterfallUploader:c('PUWUploaders').HTML5,waterfallMethod:c('PUWMethods').FILE_SELECTOR,title:h._("Choose files to upload")});}};f.exports=i;}),null);
__d('OmnipickerDispatcher',['Dispatcher_DEPRECATED'],(function a(b,c,d,e,f,g){'use strict';f.exports=new (c('Dispatcher_DEPRECATED'))();}),null);
__d('OmnipickerActions',['OmnipickerDispatcher','clamp','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({APP_INITIALIZED:null,FILE_PICKER_SELECT_STARTED:null,FILE_PICKER_SELECTED:null,FILE_PICKER_SELECT_CANCELED:null,EXISTING_PHOTOS_FETCHED:null,PANEL_INITIALIZED:null,PHOTO_SELECTED_OPTIMISTICALLY:null,PHOTO_SOURCE_SELECTED:null,RESIZE_FAILED:null,RESIZE_STARTED:null,RESIZE_SUCCEEDED:null,SELECTION_CHANGED:null,UPLOAD_CANCELED:null,UPLOAD_FAILED:null,UPLOAD_FINISHED:null,UPLOAD_PROGRESSED:null,UPLOAD_QUEUED:null,UPLOAD_STARTED:null}),i={types:h,appInitialized:function j(k,l,m){c('OmnipickerDispatcher').dispatch({type:h.APP_INITIALIZED,appID:k,logger:l,initialSource:m});},panelInitialized:function j(k,l){c('OmnipickerDispatcher').dispatch({type:h.PANEL_INITIALIZED,appID:k,source:l});},photoSourceSelected:function j(k,l){c('OmnipickerDispatcher').dispatch({type:h.PHOTO_SOURCE_SELECTED,appID:k,source:l});},filePickerSelectStarted:function j(k,l,m){c('OmnipickerDispatcher').dispatch({type:h.FILE_PICKER_SELECT_STARTED,appID:k,method:l,ref:m});},filePickerSelected:function j(k,l,m){c('OmnipickerDispatcher').dispatch({type:h.FILE_PICKER_SELECTED,appID:k,method:l,ref:m});},filePickerSelectCancelled:function j(k,l,m){c('OmnipickerDispatcher').dispatch({type:h.FILE_PICKER_SELECT_CANCELED,appID:k,method:l,ref:m});},resizeFailed:function j(k,l,m,n){c('OmnipickerDispatcher').dispatch({type:h.RESIZE_FAILED,appID:k,dt:l,bytes:m,errorCode:n});},resizeStarted:function j(k){c('OmnipickerDispatcher').dispatch({type:h.RESIZE_STARTED,appID:k});},resizeSucceeded:function j(k,l,m,n,o){c('OmnipickerDispatcher').dispatch({type:h.RESIZE_SUCCEEDED,appID:k,dt:l,bytes:m,originalSize:n,customTags:o});},uploadQueued:function j(k,l,m){c('OmnipickerDispatcher').dispatch({type:h.UPLOAD_QUEUED,appID:k,source:l,ids:m.map(function(n){return n.getSelectionContainerID();}),volume:m.length});},selectionChanged:function j(k,l,m,n){c('OmnipickerDispatcher').dispatch({type:h.SELECTION_CHANGED,appID:k,source:l,id:m,checked:n});},uploadStart:function j(k,l,m,n){c('OmnipickerDispatcher').dispatch({type:h.UPLOAD_STARTED,appID:k,source:l,id:m,bytes:n});},uploadProgress:function j(k,l,m,n){var o=c('clamp')(n.bytesTransferred/n.file.size*100,0,100);c('OmnipickerDispatcher').dispatch({type:h.UPLOAD_PROGRESSED,appID:k,source:l,id:m,progress:o});},uploadDone:function j(k,l,m,n,o,p){c('OmnipickerDispatcher').dispatch({type:h.UPLOAD_FINISHED,appID:k,source:l,id:m,src:n,fbid:o,retriesNeeded:p});},uploadFailed:function j(k,l,m,n,o){c('OmnipickerDispatcher').dispatch({type:h.UPLOAD_FAILED,appID:k,source:l,id:m,retriesNeeded:n,errorCode:o});},existingPhotosFetched:function j(k,l,m){c('OmnipickerDispatcher').dispatch({type:h.EXISTING_PHOTOS_FETCHED,appID:k,photos:m.map(function(n){return {source:l,id:n.id,src:n.image.uri};})});},optimisticSelect:function j(k,l,m){c('OmnipickerDispatcher').dispatch({type:h.PHOTO_SELECTED_OPTIMISTICALLY,appID:k,source:l,id:m});},cancelUpload:function j(k,l,m){c('OmnipickerDispatcher').dispatch({type:h.UPLOAD_CANCELED,appID:k,source:l,id:m});}};f.exports=i;}),null);
__d('OmnipickerUploadController',['OmnipickerActions','SelectionSource'],(function a(b,c,d,e,f,g){'use strict';function h(){this.$OmnipickerUploadController1={};}h.prototype.registerOmnipicker=function(i){this.$OmnipickerUploadController1[i]={};};h.prototype.registerAdapter=function(i,j,k){this.$OmnipickerUploadController1[i][k]=j;var l=c('SelectionSource').toPhotoSourceType(k);j.subscribe('maxReached',function(){});j.subscribe('resize_start',this.$OmnipickerUploadController2.bind(this,i));j.subscribe('resize_done',this.$OmnipickerUploadController3.bind(this,i));j.subscribe('resize_hires_start',function(){});j.subscribe('upload_start',this.$OmnipickerUploadController4.bind(this,i,l));j.subscribe('upload_progress',this.$OmnipickerUploadController5.bind(this,i,l));j.subscribe('upload_done',this.$OmnipickerUploadController6.bind(this,i,l));j.subscribe('upload_failed',this.$OmnipickerUploadController7.bind(this,i,l));j.subscribe('finished',function(){});};h.prototype.uploadSelections=function(i,j,k,l){if(!k.every(function(o){return o.getSource()==j;}))throw new Error("Selections' source must be "+j);var m=this.$OmnipickerUploadController1[i][j],n=c('SelectionSource').toPhotoSourceType(j);if(!m){k.forEach(function(o){var p=o.getExistingImageID(),q=o.getSrc();c('OmnipickerActions').uploadDone(i,n,p,q,p,0);});return;}if(!k[0].hasPlaceholderUI())c('OmnipickerActions').uploadQueued(i,n,k);m.uploadSelections(k,l);};h.prototype.cancelUpload=function(i,j,k){c('OmnipickerActions').cancelUpload(i,j,k);};h.prototype.$OmnipickerUploadController2=function(i,event,j){c('OmnipickerActions').resizeStarted(i);};h.prototype.$OmnipickerUploadController3=function(i,event,j){var k=j.scubaData.scuba_ints,l=k.timeResizing||k.dt,m=k.resizedSize;if(j.error){c('OmnipickerActions').resizeFailed(i,l,m,j.error.message);}else c('OmnipickerActions').resizeSucceeded(i,l,m,k.originalSize,{skipped_resizing:j.scubaData.scuba_tags.skippedResizing});};h.prototype.$OmnipickerUploadController4=function(i,j,event,k){c('OmnipickerActions').uploadStart(i,j,k.uploadID,k.size);};h.prototype.$OmnipickerUploadController5=function(i,j,event,k){c('OmnipickerActions').uploadProgress(i,j,k.uploadID,k);};h.prototype.$OmnipickerUploadController6=function(i,j,event,k){c('OmnipickerActions').uploadDone(i,j,k.uploadID,k.response.src,k.response.fbid,k.retriesNeeded);};h.prototype.$OmnipickerUploadController7=function(i,j,event,k){c('OmnipickerActions').uploadFailed(i,j,k.uploadID,k.retriesNeeded,k.response_error);};f.exports=new h();}),null);
__d('OmnipickerUploadSession',['FilePickerEvent','OmnipickerActions','OmnipickerUploadController','PhotoSourceTypes','SubscriptionsHandler'],(function a(b,c,d,e,f,g){'use strict';function h(){this.$OmnipickerUploadSession1={};}h.prototype.registerOmnipicker=function(i){this.$OmnipickerUploadSession1[i]={pickersData:[]};};h.prototype.addPicker=function(i,j,k,l){var m=new (c('SubscriptionsHandler'))();m.addSubscriptions(j.subscribe(c('FilePickerEvent').SELECT_START,function(n,o){c('OmnipickerActions').filePickerSelectStarted(i,l,k);}),j.subscribe(c('FilePickerEvent').SELECTED,function(n,o){if(o.selections&&o.selections.length>0){c('OmnipickerActions').filePickerSelected(i,l,k);var p=o.selections[0].getSource();c('OmnipickerUploadController').uploadSelections(i,p,o.selections);}}),j.subscribe(c('FilePickerEvent').SELECT_CANCELED,function(n,o){c('OmnipickerActions').filePickerSelectCancelled(i,l,k);}));this.$OmnipickerUploadSession1[i].pickersData.push({picker:j,subscriptions:m});};h.prototype.removePicker=function(i,j){var k=this.$OmnipickerUploadSession1[i].pickersData;k.forEach(function(l,m){if(l.picker===j){l.subscriptions.release();k.splice(m,1);}});};h.prototype.cancelUpload=function(i,j,k){if(j!==c('PhotoSourceTypes').COMPUTER)throw new Error('Can only cancel '+c('PhotoSourceTypes').COMPUTER+' uploads. '+'Actual source: '+j);c('OmnipickerUploadController').cancelUpload(i,j,k);};f.exports=new h();}),null);
__d('HTML5FilePickerButton.react',['fbt','OmnipickerHTML5FilePickerFactory','OmnipickerUploadSession','React','ReactDOM','PhotoSourceTypes','PUWMethods','XUIButton.react'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.componentDidMount=function(){'use strict';this.picker=c('OmnipickerHTML5FilePickerFactory').create(c('ReactDOM').findDOMNode(this.refs.fileButton));c('OmnipickerUploadSession').addPicker(this.props.appID,this.picker,c('PhotoSourceTypes').COMPUTER,c('PUWMethods').FILE_SELECTOR);};l.prototype.componentWillUnmount=function(){'use strict';c('OmnipickerUploadSession').removePicker(this.props.appID,this.picker);};l.prototype.render=function(){'use strict';var m=h._("Select Files");return c('React').createElement(c('XUIButton.react'),{ref:'fileButton',href:'#',size:'xlarge',label:m});};function l(){'use strict';i.apply(this,arguments);}l.propTypes={appID:k.string.isRequired};f.exports=l;}),null);
__d('DragDropInstructions.react',['cx','fbt','ComputerPanelActionState','HTML5FilePickerButton.react','React'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;'use strict';for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.renderInstructions=function(){switch(this.props.actionState){case c('ComputerPanelActionState').DROP:return c('React').createElement('div',null,c('React').createElement('div',{className:"_39ld"},c('React').createElement('div',{className:"_4zwj"})),c('React').createElement('div',{className:"_4zwc"},i._("Drop photos here")));case c('ComputerPanelActionState').NEUTRAL:return c('React').createElement('div',null,c('React').createElement('div',null,c('React').createElement('div',{className:"_39ld"},c('React').createElement('div',{className:"_4zwd"})),c('React').createElement('div',{className:"_4zwc"},i._("Drag photos here"))),c('React').createElement('div',{className:"_4zwi"},c('React').createElement('span',{className:"_4zwe"}),i._("or"),c('React').createElement('span',{className:"_4zwe"})),c('React').createElement('div',{className:"_4zwf"},c('React').createElement(c('HTML5FilePickerButton.react'),{appID:this.props.appID})));}}.bind(this),this.renderOverlay=function(){return c('React').createElement('div',{className:"_4zwg"},c('React').createElement('div',{className:"_4zwh"},this.renderInstructions()));}.bind(this),o;}m.prototype.render=function(){'use strict';if(this.props.isOverlay)return this.renderOverlay();return this.renderInstructions();};m.propTypes={actionState:l.oneOf(Object.keys(c('ComputerPanelActionState'))).isRequired,appID:l.string.isRequired,isOverlay:l.bool};f.exports=m;}),null);
__d('EmptyPanel.react',['cx','DragDropInstructions.react','React','ComputerPanelActionState'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){'use strict';var m="_2gyt"+(this.props.actionState===c('ComputerPanelActionState').NEUTRAL?' '+"_2gyu":'')+(this.props.actionState===c('ComputerPanelActionState').DROP?' '+"_2gyw":'');return c('React').createElement('div',{className:m},c('React').createElement('div',{className:"_2gyv"},c('React').createElement(c('DragDropInstructions.react'),{actionState:this.props.actionState,appID:this.props.appID})));};function l(){'use strict';i.apply(this,arguments);}l.propTypes={actionState:k.oneOf(Object.keys(c('ComputerPanelActionState'))).isRequired,appID:k.string.isRequired};f.exports=l;}),null);
__d('HTML5UploadAdapter',['AsyncUploadQueue','ArbiterMixin','PhotosUploadWaterfall','PhotosUploadWaterfallErrorCodes','PhotosUploadWaterfallMixin','PhotosMimeType','JpegResizer','SphericalImage','SphericalPhotoConfig','performanceNow','SphericalPhotoUploadHelper','URI'],(function a(b,c,d,e,f,g){'use strict';var h=c('SphericalPhotoUploadHelper').shouldResize360;function i(j){this._config=babelHelpers['extends']({maxRetries:0,retryTimeout:250,uri:null,qn:null,postParams:{}},j);this._uploads={};this._numProcessing=0;this._activeUploadCount=0;this._uploadQueue=new (c('AsyncUploadQueue'))(this._config.uri);this._uploadQueue.setAllowCrossOrigin(true);this._uploadQueue.setLimit(j.maxParallel);this._uploadQueue.subscribe('start',this._handleStart.bind(this));this._uploadQueue.subscribe('failure',this._handleFailure.bind(this));this._uploadQueue.subscribe('success',this._handleSuccess.bind(this));this._uploadQueue.subscribe('progress',this._handleProgress.bind(this));this._uploadQueue.subscribe('success_after_abort',this._handleCanceledPhotoUploadedAnyway.bind(this));if(c('JpegResizer').isSupported()){this._jpegResizer=new (c('JpegResizer'))(j.maxParallel);if(Object.prototype.hasOwnProperty.call(j,'useHighQuality'))this._jpegResizer.setHighQuality(j.useHighQuality);}this._uploadQueue.setPreprocessHandler(this._resizeUpload.bind(this));}Object.assign(i,{isSupported:function j(){return c('AsyncUploadQueue').isSupported()&&c('JpegResizer').isSupported();},MAX_WIDTH:2048,MAX_HEIGHT:2048});Object.assign(i.prototype,c('ArbiterMixin'),c('PhotosUploadWaterfallMixin'),{getUploaderApp:function j(){return c('PhotosUploadWaterfall').APP_HTML5;},getWaterfallID:function j(){return this._config.qn;},getWaterfallSource:function j(){return this._config.ref;},uploadFiles:function j(k,l){var m=function(o,p){o.sphericalImage=p;this._enqueueUpload(o,babelHelpers['extends']({},this._config.postParams,l));}.bind(this),n=function(o){var p=c('performanceNow')(),q=function(s){m(o,s);this.logWaterfallStep(c('PhotosUploadWaterfall').DONE_SPHERICAL_CHECK,{scuba_ints:{dt:c('performanceNow')()-p},projection_type:s.getProjectionType()});}.bind(this),r=function(s){m(o);this.logWaterfallStep(c('PhotosUploadWaterfall').FAIL_SPHERICAL_CHECK,{code:c('PhotosUploadWaterfallErrorCodes').SPHERICAL_CHECK_FAILED,scuba_ints:{dt:c('performanceNow')()-p}});}.bind(this);c('SphericalImage').createFromBlob(o).then(q)['catch'](r).done();}.bind(this);k.forEach(n);},uploadSelections:function j(k,l){var m=k.map(function(n){var o=n.getFile();o.uploadID=n.getSelectionContainerID();return o;});this.uploadFiles(m,l);},setHiRes:function j(k){if(Object.prototype.hasOwnProperty.call(this._config,'useHighQuality'))this._jpegResizer&&this._jpegResizer.setHighQuality(k);},setNumSelected:function j(k){},markDeleted:function j(k){},addPostParam:function j(k,l){this._config.postParams=this._config.postParams||{};this._config.postParams[k]=l;},cancelIndividualUpload:function j(k){var l=this._getUpload(k);if(l){this._uploadQueue.dequeue(l);this._removeUpload(l);}},cancelAllUploads:function j(){for(var k in this._uploads){var l=this._getUpload(k);this._uploadQueue.dequeue(l);this._removeUpload(l);}},getActiveUploadCount:function j(){return this._activeUploadCount;},_getUpload:function j(k){if(k&&this._uploads[k]){return this._uploads[k];}else return null;},_removeUpload:function j(k){if(!this._uploads[k.getFile().uploadID])return;delete this._uploads[k.getFile().uploadID];if(!k.isWaiting())this._activeUploadCount--;},_handleStart:function j(k,l){this._activeUploadCount++;this.inform('upload_start',{uploadID:l.getFile().uploadID,retry:!!l.getFile()._retryCount,file:l.getFile(),size:l.getFile().size});},_handleFailure:function j(k,l){var m=Math.pow(2,l.getFile()._retryCount);this._removeUpload(l);if(l.getFile()._retryCount++<this._config.maxRetries){setTimeout(this._enqueueUpload.bind(this,l.getFile(),babelHelpers['extends']({},this._config.postParams,{retry:l.getFile()._retryCount})),this._config.retryTimeout*m);this.logWaterfallStep(c('PhotosUploadWaterfall').RETRY_UPLOAD,{code:l.getResponse().getError()});this.inform('upload_retry',{uploadID:l.getFile().uploadID,file:l.getFile(),response:l.getResponse(),retry:l.getFile()._retryCount});}else this.inform('upload_failed',{uploadID:l.getFile().uploadID,file:l.getFile(),response:l.getResponse()});return false;},_handleSuccess:function j(k,l){this._removeUpload(l);var m=l.getResponse(),n=m.payload;if(n.metadata)n=n.metadata;this.inform('upload_done',{uploadID:l.getFile().uploadID,response:n[0],hiRes:true,retriesNeeded:l.getFile()._retryCount});},_handleProgress:function j(k,l){this.inform('upload_progress',{file:l.getFile(),uploadID:l.getFile().uploadID,bytesTransferred:l.getProgressEvent().loaded});},_resizeUpload:function j(k,l){var m=k.getFile();if(!c('PhotosMimeType').isJpeg(m.type))return l(k);this.inform('resize_start',{uploadID:m.uploadID,file:m});var n=c('performanceNow')(),o=function(t,u,v){if(t)this.logWaterfallStep(c('PhotosUploadWaterfall').CLIENT_ERROR,{code:c('PhotosUploadWaterfall').CERROR_RESIZING_FAILED,meta:{message:t.message}});var w=t||v;this.inform('resize_done',{uploadID:m.uploadID,scubaData:{scuba_tags:{skippedResizing:+w},scuba_ints:{timeResizing:c('performanceNow')()-n,originalSize:m.size,resizedSize:u&&u.size}},error:t});if(!w){u.uploadID=m.uploadID;u.name=m.name;k.setFile(u);}l(k);}.bind(this);if(m.sphericalImage&&m.sphericalImage.isSpherical()){var p=m.sphericalImage,q=p.getSize(),r=c('SphericalPhotoConfig').upload_size_limit,s=p.getProjectionType();if(this._jpegResizer&&h(s,q,r)){this._jpegResizer.resize360Blob(m,o,function(){},r);}else o(false,m,true);}else if(this._jpegResizer){this._jpegResizer.resizeBlob(m,o);}else o(false,m,true);},_handleCanceledPhotoUploadedAnyway:function j(k,l){this.inform('canceled_photo_uploaded',l.payload[0].fbid);},_enqueueUpload:function j(k,l){l=babelHelpers['extends']({},l,{uploader:'html5'});k._retryCount=k._retryCount||0;this._uploads[k.uploadID]=k._retryCount?this._uploadQueue.prepend(k.fileName,k,l):this._uploadQueue.enqueue(k.fileName,k,l);}});f.exports=i;}),null);
__d('OmnipickerPanelMixin.react',['PhotoSourceTypes','React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i={propTypes:{appID:h.string,photoData:h.object,sourceType:h.oneOf(Object.keys(c('PhotoSourceTypes'))),selectionSource:h.string.isRequired}};f.exports=i;}),null);
__d('OmnipickerPhotoUploadState',['keyMirror'],(function a(b,c,d,e,f,g){var h=c('keyMirror')({NOT_STARTED:null,UPLOADING:null,DONE:null,FAILED:null});f.exports=h;}),null);
__d('OmnipickerPhoto.react',['cx','fbt','Event','Image.react','OmnipickerActions','OmnipickerPhotoUploadState','OmnipickerUploadSession','PhotoSourceTypes','ProgressBar.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=20000;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={canCancel:false},this.onDragStart=function(event){c('Event').kill(event);},this.onMouseDown=function(){},this.onMouseUp=function(){var t=true;if(!this.props.checked&&this.props.onPhotoSelected)t=this.props.onPhotoSelected.call(null,this.props.id);if(t)c('OmnipickerActions').selectionChanged(this.props.appID,this.props.photoSourceType,this.props.id,!this.props.checked);}.bind(this),this.getImage=function(){if(!this.props.src)return null;return c('React').createElement(c('Image.react'),{src:this.props.src,className:"_2dh3"});}.bind(this),this.getSelection=function(){if(!this.props.checked)return null;return c('React').createElement('div',{className:"_2dh3 _1cyy"});}.bind(this),this.getCancelOverlay=function(){if(this.props.uploadState!==c('OmnipickerPhotoUploadState').UPLOADING||!this.state.canCancel)return null;return c('React').createElement('div',{className:"_5goe"},c('React').createElement('div',{className:"_5gof _1cu0",onClick:this.onCancel,role:'button',tabIndex:'0'},i._("Cancel Upload")));}.bind(this),this.getFailedOverlay=function(){if(this.props.uploadState!==c('OmnipickerPhotoUploadState').FAILED)return null;return c('React').createElement('div',{className:"_5goe"},c('React').createElement('div',{className:"_5gof"},i._("Upload Failed")));}.bind(this),this.getProgressBar=function(){if(!this.props.showUploadProgress||this.props.uploadState!==c('OmnipickerPhotoUploadState').UPLOADING)return null;var t=null;if(this.props.progress<100){t=c('React').createElement(c('ProgressBar.react'),{value:this.props.progress,min:0,max:100});}else t=c('React').createElement('div',{className:"_1t2c"});return c('React').createElement('div',{className:"_1cyx"},t);}.bind(this),this.onCancel=function(){c('OmnipickerUploadSession').cancelUpload(this.props.appID,this.props.photoSourceType,this.props.id);}.bind(this),this.setCancelTimeout=function(){this.cancelTimeout=setTimeout(function(){this.setState({canCancel:true});}.bind(this),m);}.bind(this),this.clearCancelTimeout=function(){if(this.cancelTimeout){clearTimeout(this.cancelTimeout);this.cancelTimeout=null;}}.bind(this),p;}n.prototype.componentDidMount=function(){if(this.props.supportsCancel&&this.props.uploadState===c('OmnipickerPhotoUploadState').UPLOADING)this.setCancelTimeout();};n.prototype.componentWillReceiveProps=function(o){if(this.props.supportsCancel){var p=this.props.uploadState!==o.uploadState||this.props.progress!==o.progress;if(p){this.clearCancelTimeout();if(o.uploadState===c('OmnipickerPhotoUploadState').UPLOADING)this.setCancelTimeout();}}};n.prototype.componentWillUnmount=function(){this.clearCancelTimeout();};n.prototype.render=function(){return c('React').createElement('div',{className:"_47pv",onDragStart:this.onDragStart,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp},this.getImage(),this.getSelection(),this.getCancelOverlay(),this.getFailedOverlay(),this.getProgressBar());};n.propTypes={appID:l.string.isRequired,checked:l.bool,id:l.string.isRequired,onPhotoSelected:l.func,photoSourceType:l.oneOf(Object.keys(c('PhotoSourceTypes'))).isRequired,progress:l.number,showUploadProgress:l.bool,src:l.string,supportsCancel:l.bool,uploadState:l.oneOf([c('OmnipickerPhotoUploadState').NOT_STARTED,c('OmnipickerPhotoUploadState').UPLOADING,c('OmnipickerPhotoUploadState').DONE,c('OmnipickerPhotoUploadState').FAILED]).isRequired};n.defaultProps={checked:false,progress:0,showUploadProgress:true,supportsCancel:false};f.exports=n;}),null);
__d('OmnipickerPhotoGrid.react',['cx','AutoPager.react','OmnipickerPhoto.react','PhotoSourceTypes','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=300;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.getPhotos=function(){return Object.keys(this.props.photos).map(function(s){var t=this.props.photos[s];return c('React').createElement(c('OmnipickerPhoto.react'),{appID:this.props.appID,checked:t.checked,id:t.id,key:t.id,onPhotoSelected:this.props.onPhotoSelected,photoSourceType:this.props.photoSourceType,progress:t.progress,showUploadProgress:this.props.showUploadProgress,src:t.src,supportsCancel:this.props.supportsCancel,uploadState:t.uploadState});}.bind(this));}.bind(this),this.getAutoPager=function(){if(!this.props.onScrollPositionThresholdReached)return null;return c('React').createElement(c('AutoPager.react'),{className:"_4qgs",onEnterBuffer:l,onVisible:this.props.onScrollPositionThresholdReached,scrollableAreaClass:"_xhf"});}.bind(this),o;}m.prototype.render=function(){return c('React').createElement('div',{className:"_xhf"},c('React').createElement('div',{className:"uiScrollableAreaWrap _1-nf"},this.getPhotos(),this.getAutoPager()));};m.propTypes={appID:k.string.isRequired,onPhotoSelected:k.func,onScrollPositionThresholdReached:k.func,photos:k.object.isRequired,photoSourceType:k.oneOf(Object.keys(c('PhotoSourceTypes'))).isRequired,showUploadProgress:k.bool,supportsCancel:k.bool};m.defaultProps={showUploadProgress:true,supportsCancel:false};f.exports=m;}),null);
__d('PhotoPanel.react',['cx','fbt','ComputerPanelActionState','DragDropInstructions.react','HTML5FilePickerButton.react','OmnipickerPhotoGrid.react','PhotoSourceTypes','React','ReactDOM','Scroll'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;'use strict';for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={photoCount:0},this.renderInstructions=function(){return c('React').createElement('div',{className:"_1-nd"},c('React').createElement('div',null,c('React').createElement('div',{className:"_4zwc"},i._("Drag more photos"))),c('React').createElement('div',{className:"_4zwi"},c('React').createElement('span',{className:"_4zwe"}),i._("or"),c('React').createElement('span',{className:"_4zwe"})),c('React').createElement('div',{className:"_4zwf"},c('React').createElement(c('HTML5FilePickerButton.react'),{appID:this.props.appID})));}.bind(this),this.renderDragAndDropInstructions=function(){if(this.props.actionState!==c('ComputerPanelActionState').NEUTRAL)return c('React').createElement(c('DragDropInstructions.react'),{actionState:this.props.actionState,appID:this.props.appID,isOverlay:true});}.bind(this),this.renderPhotoGrid=function(){return c('React').createElement(c('OmnipickerPhotoGrid.react'),{appID:this.props.appID,photos:this.props.photoData,photoSourceType:c('PhotoSourceTypes').COMPUTER,supportsCancel:true});}.bind(this),o;}m.prototype.componentWillReceiveProps=function(n){'use strict';var o=Object.keys(n.photoData).length;this.setState({photoCount:o});};m.prototype.componentDidUpdate=function(n,o){'use strict';if(this.state.photoCount>o.photoCount){var p=c('ReactDOM').findDOMNode(this.refs.pickerBox);c('Scroll').setTop(p,p.scrollHeight);}};m.prototype.render=function(){'use strict';return c('React').createElement('div',null,c('React').createElement('div',{className:"_1x-l"},c('React').createElement('div',{className:"_1-ne _1-nf",ref:'pickerBox'},this.renderPhotoGrid(),this.renderInstructions())),this.renderDragAndDropInstructions());};m.propTypes={actionState:l.oneOf(Object.keys(c('ComputerPanelActionState'))).isRequired,appID:l.string.isRequired,photoData:l.object.isRequired};f.exports=m;}),null);
__d('ComputerPanel.react',['ComputerPanelActionState','DragDropFilePicker','EmptyPanel.react','FilePickerEvent','HTML5UploadAdapter','React','OmnipickerConfig','OmnipickerPanelMixin.react','OmnipickerUploadSession','PhotosMimeType','PhotoPanel.react','PhotoSourceTypes','PUWMethods','PUWUploaders','SelectionSource'],(function a(b,c,d,e,f,g){var h=c('React').createClass({displayName:'ComputerPanel',mixins:[c('OmnipickerPanelMixin.react')],statics:{getAdapter:function i(j,k){var l=c('OmnipickerConfig').FILE_UPLOAD_URI;if(k&&k.fileUploadURI)l=k.fileUploadURI;return new (c('HTML5UploadAdapter'))({uri:l,maxRetries:c('OmnipickerConfig').HTML5_UPLOADER_MAX_RETRIES,maxParallel:c('OmnipickerConfig').HTML5_UPLOADER_MAX_PARALLEL,postParams:{},qn:j.getWaterfallID(),waterfallApp:j.getWaterfallAppName(),waterfallUploader:c('PUWUploaders').HTML5});}},getDefaultProps:function i(){return {selectionSource:c('SelectionSource').FILE,sourceType:c('PhotoSourceTypes').COMPUTER};},getInitialState:function i(){return {actionState:c('ComputerPanelActionState').NEUTRAL};},componentDidMount:function i(){this.picker=new (c('DragDropFilePicker'))(document.documentElement,{onDocumentDragEnterCallback:function(){this.setState({actionState:c('ComputerPanelActionState').DROP});}.bind(this),onDocumentDragLeaveCallback:function(){this.setState({actionState:c('ComputerPanelActionState').NEUTRAL});}.bind(this),isFileValid:function j(k){return c('PhotosMimeType').isImage(k.type);}});c('OmnipickerUploadSession').addPicker(this.props.appID,this.picker,c('PhotoSourceTypes').COMPUTER,c('PUWMethods').DRAGDROP);this.picker.subscribe(c('FilePickerEvent').SELECTED,this.onFilesDropped);},componentWillUnmount:function i(){this.picker.disable();c('OmnipickerUploadSession').removePicker(this.props.appID,this.picker);},onFilesDropped:function i(j){this.setState({actionState:c('ComputerPanelActionState').NEUTRAL});},renderEmptyPanel:function i(){return c('React').createElement(c('EmptyPanel.react'),{actionState:this.state.actionState,appID:this.props.appID});},renderPhotoPanel:function i(){return c('React').createElement(c('PhotoPanel.react'),{actionState:this.state.actionState,appID:this.props.appID,photoData:this.props.photoData});},render:function i(){var j=Object.keys(this.props.photoData).length,k=j===0?this.renderEmptyPanel():this.renderPhotoPanel();return c('React').createElement('div',null,k);}});f.exports=h;}),null);
__d('OmnipickerLoggerStore',['invariant','OmnipickerActions','FluxStore','OmnipickerDispatcher','PUWSteps'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('OmnipickerActions').types;i=babelHelpers.inherits(l,c('FluxStore'));j=i&&i.prototype;function l(m){j.constructor.call(this,m);this.$OmnipickerLoggerStore1={};}l.prototype.__onDispatch=function(m){if(m.type===k.APP_INITIALIZED){m.logger||h(0);this.$OmnipickerLoggerStore1[m.appID]=m.logger;return;}var n=this.$OmnipickerLoggerStore1[m.appID];n||h(0);switch(m.type){case k.FILE_PICKER_SELECT_STARTED:case k.FILE_PICKER_SELECTED:case k.FILE_PICKER_SELECT_CANCELED:this.$OmnipickerLoggerStore2(m,n);break;case k.RESIZE_STARTED:n.logStep(c('PUWSteps').CLIENT_UPLOAD_BEGIN);n.logStep(c('PUWSteps').CLIENT_PROCESS_BEGIN);break;case k.RESIZE_SUCCEEDED:n.logStep(c('PUWSteps').CLIENT_PROCESS_SUCCESS,{dt:m.dt,bytes:m.bytes,media_data_size:m.originalSize,custom_tags:m.customTags});break;case k.RESIZE_FAILED:n.logStep(c('PUWSteps').CLIENT_PROCESS_FAIL,{dt:m.dt,bytes:m.bytes,error_code:m.errorCode});break;case k.UPLOAD_STARTED:n.logStep(c('PUWSteps').CLIENT_TRANSFER_BEGIN,{bytes:m.bytes,ref:m.source});break;case k.UPLOAD_FINISHED:n.logStep(c('PUWSteps').CLIENT_TRANSFER_SUCCESS,{auto_retry_count:m.retriesNeeded,ref:m.source});n.logStep(c('PUWSteps').CLIENT_UPLOAD_SUCCESS,{fbid:m.fbid,ref:m.source});break;case k.UPLOAD_FAILED:n.logStep(c('PUWSteps').CLIENT_UPLOAD_FAIL,{auto_retry_count:m.retriesNeeded,error_code:m.errorCode,ref:m.source});break;case k.UPLOAD_QUEUED:n.logStep(c('PUWSteps').CLIENT_TRANSFER_BATCH_BEGIN,{ref:m.source,volume:m.volume});break;default:}};l.prototype.$OmnipickerLoggerStore2=function(m,n){var o=void 0;switch(m.type){case k.FILE_PICKER_SELECT_STARTED:o=c('PUWSteps').CLIENT_SELECT_BEGIN;break;case k.FILE_PICKER_SELECTED:o=c('PUWSteps').CLIENT_SELECT_SUCCESS;break;case k.FILE_PICKER_SELECT_CANCELED:o=c('PUWSteps').CLIENT_SELECT_CANCEL;break;default:h(0);}var p=m.method,q=m.ref;n.logStep(o,{method:p,ref:q});};f.exports=new l(c('OmnipickerDispatcher'));}),null);
__d('OmnipickerPanelList.react',['cx','ix','Image.react','OmnipickerActions','PhotoSourceTypes','React'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.componentWillMount=function(){'use strict';c('React').Children.forEach(this.props.children,function(n){if(!n)return;var o=this.props.appID;c('OmnipickerActions').panelInitialized(o,n.props.sourceType);}.bind(this));};m.prototype.render=function(){'use strict';var n=null;if(this.props.doneSelecting)n=c('React').createElement('div',{className:"_5e8d"},c('React').createElement('div',{className:"_5e8e"},c('React').createElement(c('Image.react'),{className:"_5e8o",src:i("95719")})));var o;if(this.props.children.length){o=this.props.children.find(function(p){if(!p)return false;return p.props.sourceType===this.props.selectedSourceType;}.bind(this));}else o=this.props.children;o=c('React').cloneElement(o,{photoData:this.props.photoData,appID:this.props.appID});return c('React').createElement('div',null,n,c('React').createElement('div',{className:"_5gfy"},o));};function m(){'use strict';j.apply(this,arguments);}m.propTypes={appID:l.string,photoData:l.object,doneSelecting:l.bool,selectedSourceType:l.oneOf(Object.keys(c('PhotoSourceTypes')))};f.exports=m;}),null);
__d('OmnipickerPhotoSourceStore',['OmnipickerActions','FluxStore','OmnipickerDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('OmnipickerActions').types;h=babelHelpers.inherits(k,c('FluxStore'));i=h&&h.prototype;function k(l){i.constructor.call(this,l);this.$OmnipickerPhotoSourceStore1={};}k.prototype.__onDispatch=function(l){switch(l.type){case j.APP_INITIALIZED:this.$OmnipickerPhotoSourceStore1[l.appID]={currentSource:l.initialSource};break;case j.PHOTO_SOURCE_SELECTED:this.$OmnipickerPhotoSourceStore1[l.appID].currentSource=l.source;this.__emitChange();break;default:return;}};k.prototype.getCurrentSource=function(l){return this.$OmnipickerPhotoSourceStore1[l].currentSource;};f.exports=new k(c('OmnipickerDispatcher'));}),null);
__d('OmnipickerPhotoStore',['invariant','OmnipickerActions','FluxStore','OmnipickerDispatcher','OmnipickerPhotoUploadState'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('OmnipickerActions').types;i=babelHelpers.inherits(l,c('FluxStore'));j=i&&i.prototype;function l(m){j.constructor.call(this,m);this.$OmnipickerPhotoStore1={};}l.prototype.__onDispatch=function(m){m.appID||h(0);var n=this.$OmnipickerPhotoStore1[m.appID];if(n){var o=n.deletedPhotos;if(o&&o[m.id])return;}switch(m.type){case k.APP_INITIALIZED:this.$OmnipickerPhotoStore2(m);return;case k.PANEL_INITIALIZED:this.$OmnipickerPhotoStore3(m);return;case k.EXISTING_PHOTOS_FETCHED:this.$OmnipickerPhotoStore4(m);break;case k.PHOTO_SELECTED_OPTIMISTICALLY:this.$OmnipickerPhotoStore5(m);break;case k.SELECTION_CHANGED:this.$OmnipickerPhotoStore6(m);break;case k.UPLOAD_CANCELED:this.$OmnipickerPhotoStore7(m);break;case k.UPLOAD_FAILED:this.$OmnipickerPhotoStore8(m);break;case k.UPLOAD_FINISHED:this.$OmnipickerPhotoStore9(m);break;case k.UPLOAD_PROGRESSED:this.$OmnipickerPhotoStore10(m);break;case k.UPLOAD_QUEUED:this.$OmnipickerPhotoStore11(m);break;case k.UPLOAD_STARTED:this.$OmnipickerPhotoStore12(m);break;default:return;}this.__emitChange();};l.prototype.getState=function(m){var n=this.$OmnipickerPhotoStore1[m];return {numPhotosSelected:this.$OmnipickerPhotoStore13(n).length,photosOptimisticallyUploading:n.photosOptimisticallyUploading,photosWaitingForUpload:n.photosWaitingForUpload,photoData:n.photos};};l.prototype.getSelectedPhotos=function(m){var n=this.$OmnipickerPhotoStore1[m];return this.$OmnipickerPhotoStore13(n,n.uploadOrder).filter(function(o){return o.fbid!=='';});};l.prototype.$OmnipickerPhotoStore13=function(m,n){var o=n||m.photos,p=[];Object.keys(m.photos).forEach(function(q){var r=Array.isArray(o[q])?o[q]:Object.keys(o[q]);r.forEach(function(s){var t=this.$OmnipickerPhotoStore14(m,q,s);if(t.checked)if(t)p.push(t);}.bind(this));}.bind(this));return p;};l.prototype.$OmnipickerPhotoStore14=function(m,n,o){var p=m.photos;p[n]||h(0);var q=p[n][o];q||h(0);return q;};l.prototype.$OmnipickerPhotoStore15=function(m){this.$OmnipickerPhotoStore16(m,['source','id']);return this.$OmnipickerPhotoStore14(this.$OmnipickerPhotoStore1[m.appID],m.source,m.id);};l.prototype.$OmnipickerPhotoStore17=function(m,n){Object.prototype.hasOwnProperty.call(m,n)||h(0);m[n]!==undefined&&m[n]!==null||h(0);};l.prototype.$OmnipickerPhotoStore16=function(m,n){n.push('appID');n.forEach(function(o){return this.$OmnipickerPhotoStore17(m,o);}.bind(this));};l.prototype.$OmnipickerPhotoStore18=function(m,n,o){var p=m.photos;p[n]||h(0);!p[n][o]||h(0);m.uploadOrder[n].push(o);return p[n][o]={id:o,checked:false,fbid:'',progress:0,src:'',uploadState:c('OmnipickerPhotoUploadState').NOT_STARTED};};l.prototype.$OmnipickerPhotoStore19=function(m,n){m.photosWaitingForUpload[n.id]=true;};l.prototype.$OmnipickerPhotoStore2=function(m){var n=m.appID;!this.$OmnipickerPhotoStore1[n]||h(0);this.$OmnipickerPhotoStore1[n]={deletedPhotos:{},photos:{},photosWaitingForUpload:{},photosOptimisticallyUploading:{},uploadOrder:{}};};l.prototype.$OmnipickerPhotoStore5=function(m){var n=this.$OmnipickerPhotoStore15(m);n.checked=true;var o=this.$OmnipickerPhotoStore1[m.appID];o.photosOptimisticallyUploading[m.id]=true;};l.prototype.$OmnipickerPhotoStore6=function(m){this.$OmnipickerPhotoStore16(m,['checked']);var n=this.$OmnipickerPhotoStore15(m);n.checked=m.checked;};l.prototype.$OmnipickerPhotoStore3=function(m){this.$OmnipickerPhotoStore16(m,['source']);var n=this.$OmnipickerPhotoStore1[m.appID];n.photos[m.source]={};n.uploadOrder[m.source]=[];};l.prototype.$OmnipickerPhotoStore20=function(m,n,o,p){if(p===c('OmnipickerPhotoUploadState').FAILED||m.photosOptimisticallyUploading[o])return;n.checked=true;};l.prototype.$OmnipickerPhotoStore21=function(m,n,o,p){n.uploadState=p;delete m.photosWaitingForUpload[o];delete m.photosOptimisticallyUploading[o];};l.prototype.$OmnipickerPhotoStore22=function(m,n,o){var p=n.id;delete m.photos[o][p];delete m.photosWaitingForUpload[p];delete m.photosOptimisticallyUploading[p];var q=m.uploadOrder[o].indexOf(p);m.uploadOrder[o].splice(q,1);m.deletedPhotos[p]=true;};l.prototype.$OmnipickerPhotoStore4=function(m){this.$OmnipickerPhotoStore17(m,'photos');var n=this.$OmnipickerPhotoStore1[m.appID];m.photos.forEach(function(o){var p=o.source,q=o.id,r=o.src,s=this.$OmnipickerPhotoStore18(n,p,q);s.src=r;}.bind(this));};l.prototype.$OmnipickerPhotoStore7=function(m){var n=this.$OmnipickerPhotoStore15(m);this.$OmnipickerPhotoStore22(this.$OmnipickerPhotoStore1[m.appID],n,m.source);};l.prototype.$OmnipickerPhotoStore8=function(m){var n=this.$OmnipickerPhotoStore1[m.appID];this.$OmnipickerPhotoStore21(n,this.$OmnipickerPhotoStore15(m),m.id,c('OmnipickerPhotoUploadState').FAILED);};l.prototype.$OmnipickerPhotoStore9=function(m){this.$OmnipickerPhotoStore16(m,['src','fbid']);var n=m.appID,o=m.id,p=m.src,q=m.fbid,r=this.$OmnipickerPhotoStore1[n],s=this.$OmnipickerPhotoStore15(m),t=c('OmnipickerPhotoUploadState').DONE;this.$OmnipickerPhotoStore20(r,s,o,t);this.$OmnipickerPhotoStore21(r,s,o,t);s.src=p;s.fbid=q;};l.prototype.$OmnipickerPhotoStore10=function(m){this.$OmnipickerPhotoStore17(m,'progress');var n=this.$OmnipickerPhotoStore15(m);n.progress=100;};l.prototype.$OmnipickerPhotoStore12=function(m){var n=this.$OmnipickerPhotoStore15(m);n.uploadState=c('OmnipickerPhotoUploadState').UPLOADING;};l.prototype.$OmnipickerPhotoStore11=function(m){this.$OmnipickerPhotoStore16(m,['source','ids']);var n=m.source,o=this.$OmnipickerPhotoStore1[m.appID],p=m.ids;p.forEach(function(q){return this.$OmnipickerPhotoStore19(o,this.$OmnipickerPhotoStore18(o,n,q));}.bind(this));};f.exports=new l(c('OmnipickerDispatcher'));}),null);
__d('OmnipickerWaterfallLogger',['PhotosUploadWaterfallXMixin','mixin'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('PhotosUploadWaterfallXMixin')));i=h&&h.prototype;function j(k,l){'use strict';i.constructor.call(this);this.$OmnipickerWaterfallLogger1=k;this.$OmnipickerWaterfallLogger2=l;}j.prototype.getWaterfallAppName=function(){'use strict';return this.$OmnipickerWaterfallLogger1;};j.prototype.getWaterfallID=function(){'use strict';return this.$OmnipickerWaterfallLogger2;};f.exports=j;}),null);
__d('Omnipicker.react',['invariant','ClientIDs','OmnipickerActions','OmnipickerPanelList.react','OmnipickerPhotoSourceStore','OmnipickerPhotoStore','OmnipickerUploadController','OmnipickerUploadSession','OmnipickerWaterfallLogger','React','SubscriptionsHandler','Waiter','OmnipickerLoggerStore'],(function a(b,c,d,e,f,g,h){var i,j;c('OmnipickerLoggerStore');c('OmnipickerPhotoSourceStore');c('OmnipickerPhotoStore');var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={numPhotosSelected:0,numPhotosUploading:0,photoData:{}},this.handlePhotosChangeEvent=function(){var r=c('OmnipickerPhotoStore').getState(this.state.appID),s=Object.keys(r.photosWaitingForUpload).length,t=Object.keys(r.photosOptimisticallyUploading).length;if(t>0){if(!this.$Omnipicker3)this.$Omnipicker3=this.$Omnipicker2.wait();}else if(this.$Omnipicker3){this.$Omnipicker3.call(this);this.$Omnipicker3=null;}this.setState({numPhotosSelected:r.numPhotosSelected,numPhotosUploading:s,photoData:r.photoData});this.props.onPhotosChange&&this.props.onPhotosChange(r.numPhotosSelected,s);}.bind(this),this.handleSourceChangeEvent=function(){this.setState({sourceType:c('OmnipickerPhotoSourceStore').getCurrentSource(this.state.appID)});}.bind(this),n;}l.prototype.componentWillMount=function(){'use strict';var m='Omnipicker_ID_'+c('ClientIDs').getNewClientID();c('OmnipickerUploadController').registerOmnipicker(m);c('OmnipickerUploadSession').registerOmnipicker(m);var n=[];c('React').Children.forEach(this.props.children,function(q){if(q.type===c('OmnipickerPanelList.react'))n.push(c('React').cloneElement(q,{appID:m}));});n.length===1||h(0);var o=n[0],p=null;c('React').Children.forEach(o.props.children,function(q){if(!q)return;if(!p||q.props.isSelected)p=q.props.sourceType;if(q.type.getAdapter)c('OmnipickerUploadController').registerAdapter(m,q.type.getAdapter(this.props.logger,q.props.config),q.props.selectionSource);}.bind(this));!!p||h(0);this.setState({appID:m,sourceType:p});c('OmnipickerActions').appInitialized(m,this.props.logger,p);};l.prototype.componentDidMount=function(){'use strict';this.$Omnipicker1=new (c('SubscriptionsHandler'))();this.$Omnipicker1.addSubscriptions(c('OmnipickerPhotoStore').addListener(this.handlePhotosChangeEvent),c('OmnipickerPhotoSourceStore').addListener(this.handleSourceChangeEvent));this.$Omnipicker2=new (c('Waiter'))(function(){this.props.onDoneSelecting(c('OmnipickerPhotoStore').getSelectedPhotos(this.state.appID),this.state.sourceType);}.bind(this));};l.prototype.componentWillUnmount=function(){'use strict';this.$Omnipicker1.release();};l.prototype.componentDidUpdate=function(){'use strict';if(this.props.doneSelecting)this.$Omnipicker2.go();};l.prototype.render=function(){'use strict';var m=c('React').Children.map(this.props.children,function(n){var o={selectedSourceType:this.state.sourceType,appID:this.state.appID};if(n.type===c('OmnipickerPanelList.react'))Object.assign(o,{photoData:this.state.photoData[this.state.sourceType]||{},doneSelecting:this.props.doneSelecting});return c('React').cloneElement(n,o);}.bind(this));return c('React').createElement('div',null,m);};l.propTypes={doneSelecting:k.bool.isRequired,logger:k.instanceOf(c('OmnipickerWaterfallLogger')).isRequired,onDoneSelecting:k.func.isRequired,onPhotosChange:k.func};l.defaultProps={doneSelecting:false};f.exports=l;}),null);
__d('OmnipickerSelector.react',['cx','OmnipickerActions','PhotoSourceTypes','React','joinClasses'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.onClick=function(){c('OmnipickerActions').photoSourceSelected(this.props.appID,this.props.sourceType);}.bind(this),n;}l.prototype.render=function(){'use strict';return c('React').createElement('li',{className:"_1ys7"},c('React').createElement('div',{className:"_1ys8"+(this.props.isSelected?' '+"selected":''),onClick:this.onClick,role:'button',tabIndex:'0'},c('React').createElement('div',{className:"_1ys9"},c('React').createElement('span',{className:c('joinClasses')("_1ysb",this.props.iconClass)}),c('React').createElement('span',{className:"_1ysc"},this.props.children))));};l.propTypes={appID:k.string.isRequired,iconClass:k.string.isRequired,isSelected:k.bool.isRequired,sourceType:k.oneOf(Object.keys(c('PhotoSourceTypes'))).isRequired};f.exports=l;}),null);
__d('OmnipickerComputerSelector.react',['cx','fbt','OmnipickerSelector.react','PhotoSourceTypes','React'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){'use strict';return c('React').createElement(c('OmnipickerSelector.react'),babelHelpers['extends']({iconClass:"_5o68"},this.props),this.props.labelText);};function m(){'use strict';j.apply(this,arguments);}m.propTypes={labelText:l.string};m.defaultProps={sourceType:c('PhotoSourceTypes').COMPUTER,labelText:i._("Computer")};f.exports=m;}),null);
__d('OmnipickerDialog.react',['cx','fbt','DOM','Event','Keys','Link.react','OmnipickerConfig','React','SubscriptionsHandler','XUICloseButton.react','XUIDialog.react','XUIDialogButton.react','XUIDialogFooter.react','XUIDialogTitle.react'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;'use strict';for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={doneSelecting:false,numPhotosSelected:0,numPhotosUploading:0,uploadProgress:0},this.getButtonLabel=function(){var s=this.state.numPhotosSelected;if(s===1)return i._("Use Photo");if(s>1)return i._("Use Photos ({number})",[i.param('number',s)]);return i._("Use Photos");}.bind(this),this.handleUsePhotos=function(){this.setState({doneSelecting:true});}.bind(this),this.handleKeyDownEvent=function(event){if(c('Event').getKeyCode(event)===c('Keys').ESC)this.props.onCancel();}.bind(this),this.handlePhotosChange=function(s,t){this.setState({numPhotosSelected:s,numPhotosUploading:t});}.bind(this),o;}m.prototype.componentDidMount=function(){'use strict';this.$OmnipickerDialog1=new (c('SubscriptionsHandler'))();this.$OmnipickerDialog1.addSubscriptions(c('Event').listen(document,'keydown',this.handleKeyDownEvent));};m.prototype.componentWillUnmount=function(){'use strict';this.$OmnipickerDialog1.release();};m.prototype.render=function(){'use strict';var n=this.state.doneSelecting||this.state.numPhotosSelected<1||this.state.numPhotosUploading>0,o=null;if(c('OmnipickerConfig').FEEDBACK_GROUP_PATH)o=c('React').createElement('div',{className:"_2srv"},c('React').createElement(c('Link.react'),{href:c('OmnipickerConfig').FEEDBACK_GROUP_PATH,target:'_blank'},'Omnipicker Feedback Group'));var p=c('React').Children.only(this.props.children);p=c('React').cloneElement(p,{onPhotosChange:this.handlePhotosChange,doneSelecting:this.state.doneSelecting});return c('React').createElement(c('XUIDialog.react'),{shown:true,layerHideOnBlur:false,width:c('OmnipickerConfig').DIALOG_WIDTH,key:'dialog'},c('React').createElement(c('XUIDialogTitle.react'),{showCloseButton:false},c('React').createElement('span',null,this.props.title),c('React').createElement(c('XUICloseButton.react'),{className:"_51-t",label:i._("Close"),onClick:this.props.onCancel})),p,c('React').createElement('div',{className:"_3bnc"},c('React').createElement(c('XUIDialogFooter.react'),{className:"_3bnd",leftContent:o},c('React').createElement(c('XUIDialogButton.react'),{action:'button',label:i._("Cancel"),onClick:this.props.onCancel,size:'xlarge'}),c('React').createElement(c('XUIDialogButton.react'),{className:"_3bne",use:'confirm',action:'confirm',size:'xlarge',disabled:n,label:this.getButtonLabel(),onClick:this.handleUsePhotos}))));};m.propTypes={onCancel:l.func.isRequired,title:l.string.isRequired};f.exports=m;}),null);
__d('OmnipickerDialogRenderer',['DOM','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';function h(i){this.$OmnipickerDialogRenderer1=i;this.$OmnipickerDialogRenderer2=i.props.$OmnipickerDialogRenderer2;if(!this.$OmnipickerDialogRenderer2){this.$OmnipickerDialogRenderer2=c('DOM').create('div');c('DOM').appendContent(document.body,this.$OmnipickerDialogRenderer2);}}h.prototype.show=function(){if(!this.$OmnipickerDialogRenderer2){this.$OmnipickerDialogRenderer2=c('DOM').create('div');c('DOM').appendContent(document.body,this.$OmnipickerDialogRenderer2);}c('ReactDOM').render(this.$OmnipickerDialogRenderer1,this.$OmnipickerDialogRenderer2);};h.prototype.hide=function(){c('ReactDOM').unmountComponentAtNode(this.$OmnipickerDialogRenderer2);c('DOM').remove(this.$OmnipickerDialogRenderer2);this.$OmnipickerDialogRenderer2=null;};h.prototype.isShowing=function(){return !!this.$OmnipickerDialogRenderer2;};f.exports=h;}),null);
__d('ExistingPhotoSelectionContainer',['BaseSelectionContainer'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('BaseSelectionContainer'));i=h&&h.prototype;function j(k,l,m){'use strict';i.constructor.call(this);this.$ExistingPhotoSelectionContainer1=k;this.$ExistingPhotoSelectionContainer2=l;this.$ExistingPhotoSelectionContainer3=m;}j.prototype.getExistingImageID=function(){'use strict';return this.$ExistingPhotoSelectionContainer1;};j.prototype.getSrc=function(){'use strict';return this.$ExistingPhotoSelectionContainer2;};j.prototype.getSource=function(){'use strict';return this.$ExistingPhotoSelectionContainer3;};j.prototype.hasPlaceholderUI=function(){'use strict';return true;};f.exports=j;}),null);
__d('ExistingPhotoPicker',['ArbiterMixin','mixin','FilePickerEvent','ExistingPhotoSelectionContainer'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this);this.$ExistingPhotoPicker1=k;}j.prototype.begin=function(){'use strict';this.inform(c('FilePickerEvent').BEGIN);};j.prototype.select=function(k,l){'use strict';this.inform(c('FilePickerEvent').SELECTED,{sender:this,selections:[new (c('ExistingPhotoSelectionContainer'))(k,l,this.$ExistingPhotoPicker1)]});};f.exports=j;}),null);
__d('OmnipickerExistingPhotosPanelMixin.react',['cx','invariant','ExistingPhotoPicker','OmnipickerActions','OmnipickerPanelMixin.react','OmnipickerPhotoGrid.react','OmnipickerUploadSession','PhotoStore','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k={mixins:[c('OmnipickerPanelMixin.react')],propTypes:{initBatchSize:j.number,pageBatchSize:j.number,puwMethod:j.string.isRequired,setID:j.string.isRequired},componentWillMount:function l(){typeof this.getViewState==='function'||i(0);this.picker=new (c('ExistingPhotoPicker'))(this.props.selectionSource);c('OmnipickerUploadSession').addPicker(this.props.appID,this.picker,this.props.sourceType,this.props.puwMethod);},componentDidMount:function l(){this.getViewState().initViewState();this.picker.begin();},componentWillUnmount:function l(){this.getViewState().destroy();c('OmnipickerUploadSession').removePicker(this.props.appID,this.picker);},render:function l(){return c('React').createElement('div',null,this.getThrobber(),this.getPhotoGrid());},onViewStateChanged:function l(m){c('OmnipickerActions').existingPhotosFetched(this.props.appID,this.props.sourceType,m.media.filter(function(n){return !this.props.photoData[n.id];}.bind(this)));},onPhotoSelected:function l(m){this.picker.select(m,this.props.photoData[m].src);return false;},getPhotoGrid:function l(){if(!c('PhotoStore').hasBeenCreated(this.props.setID))return null;var m=null;if(!c('PhotoStore').hasBeenCreated(this.props.setID)||c('PhotoStore').hasNextPage(this.props.setID))m=function(){this.getViewState().fetchMore();}.bind(this);return c('React').createElement(c('OmnipickerPhotoGrid.react'),{appID:this.props.appID,onPhotoSelected:this.onPhotoSelected,onScrollPositionThresholdReached:m,photos:this.props.photoData,photoSourceType:this.props.sourceType,showUploadProgress:false});},getThrobber:function l(){if(c('PhotoStore').hasBeenCreated(this.props.setID))return null;return c('React').createElement('div',{className:"_j0-"});}};f.exports=k;}),null);
__d('ScrollablePhotoViewStateCore',['emptyFunction','SubscriptionsHandler'],(function a(b,c,d,e,f,g){function h(i){'use strict';this.$ScrollablePhotoViewStateCore1=i.photoStore;this.$ScrollablePhotoViewStateCore2=i.viewer;this.$ScrollablePhotoViewStateCore3=i.setToken;this.$ScrollablePhotoViewStateCore4=i.updateCallback;this.$ScrollablePhotoViewStateCore5=i.subscribeUpdatePhotos;this.$ScrollablePhotoViewStateCore6=i.fetchInitData;this.$ScrollablePhotoViewStateCore7=i.initBatchSize;this.$ScrollablePhotoViewStateCore8=i.pageBatchSize;this.$ScrollablePhotoViewStateCore9=new (c('SubscriptionsHandler'))();}h.prototype.initViewState=function(){'use strict';this.$ScrollablePhotoViewStateCore9.addSubscriptions(this.$ScrollablePhotoViewStateCore5(this.updateData.bind(this)));if(this.$ScrollablePhotoViewStateCore1.hasBeenCreated(this.$ScrollablePhotoViewStateCore3)){var i=this.$ScrollablePhotoViewStateCore1.getAvailableRange(this.$ScrollablePhotoViewStateCore3).length;if(i>=this.$ScrollablePhotoViewStateCore7||!this.$ScrollablePhotoViewStateCore1.hasNextPage(this.$ScrollablePhotoViewStateCore3))this.syncState();return;}this.$ScrollablePhotoViewStateCore6(this.$ScrollablePhotoViewStateCore3);};h.prototype.hasNextPage=function(){'use strict';return this.$ScrollablePhotoViewStateCore1.hasBeenCreated(this.$ScrollablePhotoViewStateCore3)&&this.$ScrollablePhotoViewStateCore1.hasNextPage(this.$ScrollablePhotoViewStateCore3);};h.prototype.fetchToIndex=function(i){'use strict';var j=this.$ScrollablePhotoViewStateCore1.getEndIndex(this.$ScrollablePhotoViewStateCore3),k=i-j;if(k<=0)return;this.$ScrollablePhotoViewStateCore1.getItemsAfterIndex(this.$ScrollablePhotoViewStateCore3,j,k,c('emptyFunction'));};h.prototype.fetchMore=function(i){'use strict';if(!this.hasNextPage())return;this.$ScrollablePhotoViewStateCore1.getItemsAfterIndex(this.$ScrollablePhotoViewStateCore3,this.$ScrollablePhotoViewStateCore1.getEndIndex(this.$ScrollablePhotoViewStateCore3),this.$ScrollablePhotoViewStateCore8,i||c('emptyFunction'));};h.prototype.destroy=function(){'use strict';this.$ScrollablePhotoViewStateCore9.release();};h.prototype.updateData=function(i){'use strict';if(i.set_id!=this.$ScrollablePhotoViewStateCore3)return;var j=i.query_results&&i.query_results.result_type;if(j=='init'){this.$ScrollablePhotoViewStateCore1.executePostCreate(this.$ScrollablePhotoViewStateCore3,function(){this.syncState();}.bind(this));}else this.syncState();};f.exports=h;}),null);
__d('fetchInitPhotoViewState',['AsyncRequest'],(function a(b,c,d,e,f,g){function h(i,j){new (c('AsyncRequest'))(i).setData({set:j}).send();}f.exports=h;}),null);
__d('subscribeToArbiterUpdatePhotos',['Arbiter'],(function a(b,c,d,e,f,g){function h(i){return c('Arbiter').subscribe('update-photos',function(j,k){i(k);});}f.exports=h;}),null);
__d('OmnipickerExistingPhotosViewState',['PhotoStore','ScrollablePhotoViewStateCore','URI','subscribeToArbiterUpdatePhotos','fetchInitPhotoViewState'],(function a(b,c,d,e,f,g){var h,i;function j(l,m){c('fetchInitPhotoViewState')(l,m);}h=babelHelpers.inherits(k,c('ScrollablePhotoViewStateCore'));i=h&&h.prototype;function k(l,m,n,o,p,q){'use strict';i.constructor.call(this,{fetchInitData:j.bind(null,p),initBatchSize:n,pageBatchSize:o,photoStore:c('PhotoStore'),setToken:m,subscribeUpdatePhotos:c('subscribeToArbiterUpdatePhotos'),updateCallback:q,viewer:l});this.$OmnipickerExistingPhotosViewState1=n;this.$OmnipickerExistingPhotosViewState2=m;this.$OmnipickerExistingPhotosViewState3=q;}k.prototype.syncState=function(){'use strict';this.$OmnipickerExistingPhotosViewState3({media:c('PhotoStore').getItemsInAvailableRange(this.$OmnipickerExistingPhotosViewState2),hasNextPage:c('PhotoStore').hasNextPage(this.$OmnipickerExistingPhotosViewState2)});};f.exports=k;}),null);
__d("XPagesManagerPostedPhotosController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/content_tab\/posted_photos\/",{set:{type:"String",required:true},size:{type:"Int",required:true}});}),null);
__d('OmnipickerPagePostedPhotosPanel.react',['ActorURI','OmnipickerConfig','OmnipickerExistingPhotosPanelMixin.react','OmnipickerExistingPhotosViewState','PhotoSourceTypes','PUWMethods','React','SelectionSource','XPagesManagerPostedPhotosController'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'OmnipickerPagePostedPhotosPanel',mixins:[c('OmnipickerExistingPhotosPanelMixin.react')],_viewState:null,propTypes:{pageID:h.string.isRequired},getDefaultProps:function j(){return {initBatchSize:20,pageBatchSize:16,puwMethod:c('PUWMethods').RECENT_PHOTOS,selectionSource:c('SelectionSource').PAGES_POSTED_PHOTOS,setID:c('OmnipickerConfig').POSTED_PHOTOS_SET_ID,sourceType:c('PhotoSourceTypes').PAGES_POSTED_PHOTOS};},componentWillMount:function j(){var k=c('ActorURI').create(c('XPagesManagerPostedPhotosController').getURIBuilder().setString('set',this.props.setID).setInt('size',this.props.initBatchSize).getURI(),this.props.pageID);this._viewState=new (c('OmnipickerExistingPhotosViewState'))(this,this.props.setID,this.props.initBatchSize,this.props.pageBatchSize,k,this.onViewStateChanged);},getViewState:function j(){return this._viewState;}});f.exports=i;}),null);
__d('OmnipickerPagePostedPhotosSelector.react',['cx','fbt','OmnipickerSelector.react','PhotoSourceTypes','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){return c('React').createElement(c('OmnipickerSelector.react'),babelHelpers['extends']({iconClass:"_2_y4"},this.props),this.props.labelText);};function m(){j.apply(this,arguments);}m.propTypes={labelText:l.node};m.defaultProps={sourceType:c('PhotoSourceTypes').PAGES_POSTED_PHOTOS,labelText:i._("Page Photos")};f.exports=m;}),null);
__d('OmnipickerSelectorList.react',['cx','PhotoSourceTypes','React'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){'use strict';var m=c('React').Children.map(this.props.children,function(n){if(!n)return;return c('React').cloneElement(n,{isSelected:n.props.sourceType===this.props.selectedSourceType,appID:this.props.appID});}.bind(this));return c('React').createElement('div',{className:"_1n6_"},c('React').createElement('ul',null,m));};function l(){'use strict';i.apply(this,arguments);}l.propTypes={appID:k.string,selectedSourceType:k.oneOf(Object.keys(c('PhotoSourceTypes')))};f.exports=l;}),null);
__d('ProductVideoChunkedUploader',['AdsVideoUploadEvents','AdsVideoUploadSession','AdsVideoUploadUtil','URI','VideoUploader','VideoUploadFile','VideoUploadProgressBar'],(function a(b,c,d,e,f,g){var h,i,j='/v2.4',k='graph-video';h=babelHelpers.inherits(l,c('VideoUploader'));i=h&&h.prototype;function l(m){'use strict';var n=m.config,o=new (c('URI'))(j+'/'+m.target_id+'/videos?'+'access_token='+m.access_token).setSubdomain(k).toString(),p={start_uri:o,receive_uri:o,post_uri:o,chunk_start_uri:o,chunk_receive_uri:o,chunk_post_uri:o,min_size:n.minSize,min_width:n.minWidth,min_height:n.minHeight,min_length:n.minLength,max_size:n.maxSize,max_length:n.maxLength,extensions:n.extensions,logging_delay:n.loggingDelay,max_transport_retries:n.maxTransportRetries,transport_retry_interval_base:n.transportRetryIntervalBase,max_server_retries:n.maxServerRetries,server_retry_interval_base:n.serverRetryIntervalBase,source:m.source,target_id:m.target_id,target_type:m.target_type};i.constructor.call(this,p);this.$ProductVideoChunkedUploader1='';}l.prototype.getUploadTime=function(){'use strict';if(this.__getSession()!==null)return this.__getSession().getUploadTime();return null;};l.prototype.getEncodingTime=function(){'use strict';if(this.__getSession()!==null)return this.__getSession().getEncodingTime();return null;};l.prototype.abort=function(){'use strict';this.cancel();};l.prototype.upload=function(m){'use strict';var n=m.getFileInput();this.$ProductVideoChunkedUploader1=c('AdsVideoUploadUtil').getVideoTitle(n);i.upload.call(this,m);};l.prototype.__getVideoUploadSession=function(m){'use strict';return new (c('AdsVideoUploadSession'))(m);};l.prototype.getVideoTitle=function(){'use strict';return this.$ProductVideoChunkedUploader1;};l.prototype.__createSession=function(m){'use strict';return new (c('AdsVideoUploadSession'))(m);};l.prototype.__getEventsWhichShouldListenFromSession=function(){'use strict';var m=i.__getEventsWhichShouldListenFromSession.call(this);m.push(c('AdsVideoUploadEvents').ENCODING_SUCCESS,c('AdsVideoUploadEvents').ENCODING_ERROR);return m;};l.prototype.__getEventsForWhichSessionShouldBeSetToNull=function(){'use strict';return ['upload-failed',c('AdsVideoUploadEvents').ENCODING_SUCCESS,c('AdsVideoUploadEvents').ENCODING_ERROR];};l.prototype.__delegateEvent=function(event,m){'use strict';var n=null;if(event==='upload-progressed'){var o=c('VideoUploadProgressBar').computeProgress(m.start_offset,m.sent_bytes,m.file_size,0,0);n=o/100;}else if(event==='upload-finished'){this.post({});}else if(event==='post-finished'){n=m.video_id;}else if(event==='post-failed')event='upload-failed';i.__delegateEvent.call(this,event,n);};f.exports=l;}),null);
__d('PageContentTabProductUploadVideoButton.react',['cx','fbt','AdsVideoUploadConfig','AdsVideoUploadEvents','AsyncRequest','FileInput.react','GraphAPI','Link.react','ProductVideoChunkedUploader','React','VideoUploadFile','VideoUploadTargetType','XUIGrayText.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=1000,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={videoUploaders:[],lastEncodingStatusCheckTimes:[]},this.$PageContentTabProductUploadVideoButton1=function(){var t=this.refs.fileInput.getFileInput().getInput(),u=c('VideoUploadFile').fromFileInput(t),v=new (c('ProductVideoChunkedUploader'))({config:c('AdsVideoUploadConfig'),source:'product_edit_tool',target_id:this.props.productCatalogID,target_type:c('VideoUploadTargetType').PRODUCT_CATALOG,access_token:this.props.pageContentTabAccessToken}),w=this.state.videoUploaders.length;v.subscribe('upload-failed',this.$PageContentTabProductUploadVideoButton2.bind(this,w));v.subscribe(c('AdsVideoUploadEvents').UPLOAD_ERROR,this.$PageContentTabProductUploadVideoButton2.bind(this,w));v.subscribe('post-failed',this.$PageContentTabProductUploadVideoButton2.bind(this,w));v.subscribe('post-finished',this.$PageContentTabProductUploadVideoButton3.bind(this,w));this.props.onVideoSelected(w);v.upload(u);var x=this.state.videoUploaders;x[w]=v;this.setState({videoUploaders:x});}.bind(this),this.$PageContentTabProductUploadVideoButton2=function(t){this.props.onVideoUploadError(t);}.bind(this),this.$PageContentTabProductUploadVideoButton3=function(t){this.$PageContentTabProductUploadVideoButton4(t);}.bind(this),this.$PageContentTabProductUploadVideoButton4=function(t){var u=this.state.lastEncodingStatusCheckTimes[t]+l,v=Math.max(0,u-Date.now());setTimeout(this.$PageContentTabProductUploadVideoButton5.bind(this,t),v);}.bind(this),this.$PageContentTabProductUploadVideoButton5=function(t){var u=this.$PageContentTabProductUploadVideoButton6(t),v=this.state.lastEncodingStatusCheckTimes;v[t]=Date.now();this.setState({lastEncodingStatusCheckTimes:v});new (c('AsyncRequest'))().setURI('/ajax/video/encode/feedback/ping/').setData({video_id:u}).setHandler(this.$PageContentTabProductUploadVideoButton7.bind(this,t)).send();}.bind(this),this.$PageContentTabProductUploadVideoButton7=function(t,u){var v=this.$PageContentTabProductUploadVideoButton6(t),w=u.payload;if(w)if(w.is_ready){c('GraphAPI')('2.3').object('video',v).edge('thumbnails').get({access_token:this.props.pageContentTabAccessToken}).done(this.$PageContentTabProductUploadVideoButton8.bind(this,t));}else if(w.error){this.$PageContentTabProductUploadVideoButton2(t);}else this.$PageContentTabProductUploadVideoButton4(t);}.bind(this),this.$PageContentTabProductUploadVideoButton8=function(t,u){var v=this.$PageContentTabProductUploadVideoButton6(t),w=u.data;if(w)for(var x=0;x<w.length;x++)if(w[x].is_preferred){this.props.onVideoUploadFinished(t,v,w[x].uri);return;}}.bind(this),this.$PageContentTabProductUploadVideoButton6=function(t){return this.state.videoUploaders[t].getUploadSession().getVideoID();}.bind(this),p;}n.prototype.render=function(){return c('React').createElement(c('FileInput.react'),{name:'video',ref:'fileInput',onChange:this.$PageContentTabProductUploadVideoButton1},c('React').createElement(c('Link.react'),{className:"_25dc"},c('React').createElement('div',{className:"_25dd _25de"},c('React').createElement(c('XUIGrayText.react'),{className:"_25df",size:'small',display:'block'},i._("Add Videos")))));};n.propTypes={onVideoSelected:m.func.isRequired,onVideoUploadError:m.func.isRequired,onVideoUploadFinished:m.func.isRequired,pageContentTabAccessToken:m.string.isRequired,productCatalogID:m.string.isRequired};f.exports=n;}),null);
__d("XPagesManagerProductPhotoUploadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/upload\/file\/product\/photo\/",{waterfall_id:{type:"String"}});}),null);
__d('PageProductPhotoEditButton.react',['cx','fbt','ActorURI','Arbiter','AsyncRequest','BOFSellerLogger','BOFSellerLoggerEvent','ReactComposerPhotoActions','PhotoEditorTargetType','XPagesManagerProductPhotoUploadController','React','Tooltip','XComposerPhotoUploader','XStickerPhotoEditorController'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.componentDidMount=function(){c('Arbiter').subscribe('PageProductPhotoEditor/newImage'+this.props.composerID,this.$PageProductPhotoEditButton2.bind(this));};m.prototype.render=function(){var n=i._("Edit Photo");return c('React').createElement('button',babelHelpers['extends']({className:"_k4v",onClick:this.$PageProductPhotoEditButton3.bind(this)},c('Tooltip').propsFor(n)),c('React').createElement('div',{className:"_k4w"}));};m.prototype.$PageProductPhotoEditButton3=function(){if(this.$PageProductPhotoEditButton1)return;c('BOFSellerLogger').log(c('BOFSellerLoggerEvent').ACTN_EDIT_PHOTO_CLICK,this.props.pageID,{target_class:'Photo',target_id:this.props.photoID});var n=void 0,o=void 0;if(this.props.photoID==parseInt(this.props.photoID,10)){n=parseInt(this.props.photoID,10);o='';}else{n=0;o=this.props.photoID;}var p=c('ActorURI').create(c('XStickerPhotoEditorController').getURIBuilder().setString('grid_id',this.props.composerID).setEnum('target_type',c('PhotoEditorTargetType').PAGE_PRODUCT_COMPOSER).setInt('photo_fbid',n).setString('encrypted_photo_id',o).getURI(),this.props.pageID);this.$PageProductPhotoEditButton1=new (c('AsyncRequest'))(p).setFinallyHandler(function(){this.$PageProductPhotoEditButton1=null;}.bind(this)).send();c('ReactComposerPhotoActions').startPhotoEdit(this.props.composerID,null);};m.prototype.$PageProductPhotoEditButton2=function(n,o){var p=c('ActorURI').create(c('XPagesManagerProductPhotoUploadController').getURIBuilder().getURI(),this.props.pageID),q=o.encryptedID||o.fbid,r=new (c('XComposerPhotoUploader'))({uploadEndpoint:p,onUploadSuccess:function(s,t){this.props.onPhotoEdited(q,t.response.payload[0]);}.bind(this)});r.getAsyncUploadRequest([o.blob]).send();};function m(){j.apply(this,arguments);}m.propTypes={composerID:l.string.isRequired,onPhotoEdited:l.func.isRequired,pageID:l.string.isRequired,photoID:l.string.isRequired};f.exports=m;}),null);
__d('PageContentTabProductPhotoUploader.react',['cx','fbt','invariant','ActorURI','AudienceManagerEngagementVideoSelectionError.react','Image.react','Link.react','Omnipicker.react','ComputerPanel.react','OmnipickerComputerSelector.react','OmnipickerDialog.react','OmnipickerDialogRenderer','OmnipickerPagePostedPhotosPanel.react','OmnipickerPagePostedPhotosSelector.react','OmnipickerPanelList.react','OmnipickerSelectorList.react','OmnipickerWaterfallLogger','PageContentTabProductUploadVideoButton.react','PageProductPhotoEditButton.react','XPagesManagerProductPhotoUploadController','PUWApplications','PUWSteps','React','WaterfallIDGenerator','XUICloseButton.react','XUIError.react','XUIGrayText.react','XUISpinner.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('React').PropTypes,l=c('React').createClass({displayName:'PageContentTabProductPhotoUploader',_waterfallLogger:c('OmnipickerWaterfallLogger'),propTypes:{className:k.string,maxPhotosCount:k.number,pageID:k.string.isRequired,onPhotoEdited:k.func,onPhotosSelected:k.func.isRequired,onPhotoRemoved:k.func.isRequired,photos:k.array.isRequired,photoEditingEnabled:k.bool.isRequired,productCatalogID:k.string,pageContentTabAccessToken:k.string,videos:k.array,onVideoSelected:k.func,onVideoUploadFinished:k.func,onVideoUploadError:k.func,onVideoRemoved:k.func,showVideoUploadButton:k.bool,xuiError:k.any},getInitialState:function m(){var n={fileUploadURI:c('ActorURI').create(c('XPagesManagerProductPhotoUploadController').getURIBuilder().getURI(),this.props.pageID)};this._waterfallLogger=new (c('OmnipickerWaterfallLogger'))(c('PUWApplications').WEB_PRODUCT_PHOTO_OMNIPICKER,c('WaterfallIDGenerator').generate());return {dialogRenderer:new (c('OmnipickerDialogRenderer'))(c('React').createElement(c('OmnipickerDialog.react'),{onCancel:this.onPickerCancel,title:i._("Select Photo")},c('React').createElement(c('Omnipicker.react'),{logger:this._waterfallLogger,onDoneSelecting:this.onPickerAddPhotos},c('React').createElement(c('OmnipickerSelectorList.react'),null,c('React').createElement(c('OmnipickerComputerSelector.react'),null),c('React').createElement(c('OmnipickerPagePostedPhotosSelector.react'),null)),c('React').createElement(c('OmnipickerPanelList.react'),null,c('React').createElement(c('ComputerPanel.react'),{config:n}),c('React').createElement(c('OmnipickerPagePostedPhotosPanel.react'),{pageID:this.props.pageID})))))};},onPickerCancel:function m(){this.state.dialogRenderer.hide();this._waterfallLogger.logStep(c('PUWSteps').CLIENT_FLOW_CANCEL);},onPickerAddPhotos:function m(n){this.state.dialogRenderer.hide();this.props.onPhotosSelected(n);},render:function m(){var n=null,o=null,p=this.props.photos.length;if(this.props.videos)p+=this.props.videos.length;if(!this.props.maxPhotosCount||p<this.props.maxPhotosCount){n=this._renderAddPhotoLink();o=this._renderAddVideoLink();}return c('React').createElement('div',{className:this.props.className},this._renderUploadedMedia(),n,o);},_renderUploadedPhoto:function m(n){var o=null;if(this.props.photoEditingEnabled)o=c('React').createElement(c('PageProductPhotoEditButton.react'),{composerID:this._waterfallLogger.getWaterfallID(),onPhotoEdited:this.props.onPhotoEdited,pageID:this.props.pageID,photoID:n.fbid});return c('React').createElement('div',{key:n.fbid,className:"_5m94"},c('React').createElement(c('XUICloseButton.react'),{className:"_5m95",size:'medium',shade:'light',onClick:function(p){return this.props.onPhotoRemoved(n);}.bind(this)}),c('React').createElement(c('Image.react'),{className:"_19tc",src:n.src}),o,c('React').createElement('div',{className:"_19td"}));},_renderUploadedVideo:function m(n){var o=null;if(!n.ready&&!n.error)o=c('React').createElement(c('XUISpinner.react'),{className:"_37cg",size:'large'});var p=null;if(n.error)p=c('React').createElement('div',{className:"_37ch"},c('React').createElement(c('AudienceManagerEngagementVideoSelectionError.react'),{mainLabel:i._("Upload failed")}));return c('React').createElement('div',{key:n.fbid,className:"_5m94"},c('React').createElement(c('XUICloseButton.react'),{className:"_5m95",size:'medium',shade:'light',onClick:function(){this.props.onVideoRemoved||j(0);this.props.onVideoRemoved(n);}.bind(this)}),c('React').createElement(c('Image.react'),{className:"_19tc",src:n.src}),o,p,c('React').createElement('div',{className:"_37cj"}),c('React').createElement('div',{className:"_37cm"},c('React').createElement('div',{className:"_37cn"})),c('React').createElement('div',{className:"_19td"}));},_renderUploadedMedia:function m(){var n=this.props.videos&&this.props.onVideoRemoved?this.props.videos.map(this._renderUploadedVideo):[],o=this.props.photos.map(this._renderUploadedPhoto);return n.concat(o);},_renderAddPhotoLink:function m(){return c('React').createElement(c('Link.react'),{className:"_3ff7",ref:'uploadButton',onClick:this._onPickerLaunch},c('React').createElement(c('XUIError.react'),{xuiError:this.props.xuiError},c('React').createElement('div',{className:"_22to _19tc"},c('React').createElement(c('XUIGrayText.react'),{className:"_3ff8",size:'small',display:'block'},i._("Add Photos")))));},_renderAddVideoLink:function m(){if(!this.props.showVideoUploadButton||!this.props.onVideoSelected||!this.props.onVideoUploadFinished||!this.props.onVideoUploadError||!this.props.productCatalogID||!this.props.pageContentTabAccessToken)return null;return c('React').createElement(c('PageContentTabProductUploadVideoButton.react'),{productCatalogID:this.props.productCatalogID,onVideoSelected:this.props.onVideoSelected,onVideoUploadFinished:this.props.onVideoUploadFinished,onVideoUploadError:this.props.onVideoUploadError,pageContentTabAccessToken:this.props.pageContentTabAccessToken});},_onPickerLaunch:function m(){this._waterfallLogger.logStep(c('PUWSteps').CLIENT_FLOW_BEGIN);this.state.dialogRenderer.show();}});f.exports=l;}),null);
__d('PageContentTabConfirmationDialog.react',['fbt','LayerHideOnEscape','LayerFadeOnHide','React','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogFooter.react','XUIDialogTitle.react'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){'use strict';var m=this.props.cancelLabel||h._("Cancel");return c('React').createElement(c('XUIDialog.react'),{behaviors:{LayerHideOnEscape:c('LayerHideOnEscape'),LayerFadeOnHide:c('LayerFadeOnHide')},shown:true,width:450},c('React').createElement(c('XUIDialogTitle.react'),null,this.props.title),c('React').createElement(c('XUIDialogBody.react'),null,this.props.body),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',label:m,use:'default'}),c('React').createElement(c('XUIDialogButton.react'),{'data-testid':'page_content_tab_confirm_button',action:'cancel',label:this.props.confirmationLabel,onClick:this.props.onConfirm,use:'confirm'})));};function l(){'use strict';i.apply(this,arguments);}l.propTypes={cancelLabel:k.string,title:k.string.isRequired,body:k.string.isRequired,confirmationLabel:k.string.isRequired,onConfirm:k.func.isRequired};f.exports=l;}),null);
__d('PageContentTabTextUtils',[],(function a(b,c,d,e,f,g){'use strict';var h={getPostID:function i(j){var k=j.split('_');return k.pop();}};f.exports=h;}),null);
__d('PageContentTabCommonConfig',['DOM','React','ReactDOM','LayerFadeOnHide','LayerHideOnEscape','PageContentTabConfirmationDialog.react','PageContentTabConstants','PageContentTabTextUtils','XUIDialog.react','XUIDialogBody.react','XUIDialogFooter.react','XUIDialogOkayButton.react','XUIDialogTitle.react'],(function a(b,c,d,e,f,g){'use strict';var h=c('PageContentTabConstants').COLUMNS,i={getValueFromInsight:function j(k){if(k.values&&k.values.length===1)return k.values[0].value.toString();return '0';},maxInsightValue:function j(k,l){var m=0;k.forEach(function(n){var o=n.insights&&n.insights.data;(o||[]).forEach(function(p){if(p.name===l){var q=i.getValueFromInsight(p);m=Math.max(m,parseInt(q,10));}});});return m;},maxProductInsightValue:function j(k,l){var m=0;k.forEach(function(n){var o=l.map(function(q){return n.commerce_insights[q];}),p=o.reduce(function(q,r){return q+r;});m=Math.max(m,p?p:0);});return m;},showErrorDialog:function j(k,l){c('ReactDOM').render(c('React').createElement(c('XUIDialog.react'),{shown:true,behaviors:{LayerFadeOnHide:c('LayerFadeOnHide'),LayerHideOnEscape:c('LayerHideOnEscape')},width:600},c('React').createElement(c('XUIDialogTitle.react'),null,c('React').createElement('span',null,k)),c('React').createElement(c('XUIDialogBody.react'),null,l),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogOkayButton.react'),{use:'confirm',action:'cancel'}))),c('DOM').create('div'));},showConfirmationDialog:function j(k,l,m,n,o){c('ReactDOM').render(c('React').createElement(c('PageContentTabConfirmationDialog.react'),{cancelLabel:o,title:k,body:l,confirmationLabel:m,onConfirm:n}),c('DOM').create('div'));},createScheduledPostRow:function j(k,l){var m=i.createDraftPostRow(k,l);m[h.SCHEDULED_PUBLISH_TIME]={time:k.scheduled_publish_time,admin:k.admin_creator&&k.admin_creator.name};m[h.PROMOTION_STATUS]=k.promotion_info;m[h.ID]=c('PageContentTabTextUtils').getPostID(k.id);return m;},createDraftPostRow:function j(k,l){return i._createUnpublishedPostRowBase(k,l);},_createUnpublishedPostRowBase:function j(k,l){var m={};m[h.POST]={id:k.id,text:k.message,img:k.thumbnail||l.picture&&l.picture.url,url:k.permalink_url,owner:l.page_id,place:k.place,og_action_summary:k.og_action_summary};m[h.DATE_CREATED]={time:k.creation_time,admin:k.admin_creator&&k.admin_creator.name};m[h.DATE_LAST_MODIFIED]={edit_actions:k.edit_actions&&k.edit_actions.data,modified_time:k.modified_time};m[h.LOCATION_LANGUAGE]=k.privacy_description;return m;}};f.exports=i;}),null);
__d("XPagesManagerProductDeleteController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/content_tab\/products\/product_delete\/",{group_ids:{type:"StringVector"}});}),null);
__d("XPagesManagerProductUpdateInventoryController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/content_tab\/products\/update_inventory\/",{product_group_ids:{type:"IntVector"},inventory_in_stock:{type:"Bool",defaultValue:false}});}),null);
__d('PageProductActions',['fbt','ActorURI','AsyncRequest','PageContentTabCommonConfig','PageContentTabDispatcher','PageContentTabLoadingDialog','XPagesManagerProductDeleteController','XPagesManagerProductUpdateInventoryController'],(function a(b,c,d,e,f,g,h){'use strict';var i={deleteProducts:function j(k,l,m){c('PageContentTabLoadingDialog').show();var n=c('ActorURI').create(c('XPagesManagerProductDeleteController').getURIBuilder().setStringVector('group_ids',k).getURI(),l);new (c('AsyncRequest'))(n).setMethod('POST').setHandler(function(o){k.forEach(function(p){return c('PageContentTabDispatcher').handlePostRemoved(l,p);});}).setFinallyHandler(function(){c('PageContentTabLoadingDialog').hide();m&&m();}).send();},deleteProductsWithConfirmation:function j(k,l,m){var n=k.length===1?h._("Deleting this product will remove it from your shop"):h._("Deleting these products will remove them from your shop");c('PageContentTabCommonConfig').showConfirmationDialog(h._({"Product":"Delete Product?","Products":"Delete Products?"},[h['enum'](k.length===1?'Product':'Products',{Product:'Product',Products:'Products'})]),n,h._({"product":"Delete product","products":"Delete products"},[h['enum'](k.length===1?'product':'products',{product:'product',products:'products'})]),i.deleteProducts.bind(i,k,l,m),null);},MarkStockWithConfirmation:function j(k,l,m,n){var o=l.map(function(t){return t.id;}),p=false;l.forEach(function(t){if(t.products.data.length>1)p=true;});var q=null;if(m){q=p?h._({"product":"Mark product as in stock. All variants will be affected","products":"Mark products as in stock. All variants will be affected"},[h['enum'](o.length===1?'product':'products',{product:'product',products:'products'})]):h._({"product":"Mark product as in stock","products":"Mark products as in stock"},[h['enum'](o.length===1?'product':'products',{product:'product',products:'products'})]);}else q=p?h._({"product":"Mark product as out of stock. All variants will be affected","products":"Mark products as out of stock. All variants will be affected"},[h['enum'](o.length===1?'product':'products',{product:'product',products:'products'})]):h._({"product":"Mark product as out of stock","products":"Mark products as out of stock"},[h['enum'](o.length===1?'product':'products',{product:'product',products:'products'})]);var r=m?h._("Mark in stock"):h._("Mark out of stock"),s=m?h._("Mark in stock"):h._("Mark out of stock");c('PageContentTabCommonConfig').showConfirmationDialog(r,q,s,i.MarkStockProducts.bind(i,k,m,l,n),null,null);},MarkStockProducts:function j(k,l,m,n){c('PageContentTabLoadingDialog').show();var o=m.map(function(q){return q.id;}),p=c('ActorURI').create(c('XPagesManagerProductUpdateInventoryController').getURIBuilder().setIntVector('product_group_ids',o).setBool('inventory_in_stock',l).getURI(),k);new (c('AsyncRequest'))(p).setMethod('POST').setHandler(function(q){var r=q.payload;m.forEach(function(s){if(s.id in r){var t=s.products.data[0];t.inventory=r[s.id];if(t.commerce_settings){t.commerce_settings.inventory=t.inventory;t.commerce_settings.total_inventory=t.inventory;}c('PageContentTabDispatcher').handlePostChanged(s);}});}).setFinallyHandler(function(){c('PageContentTabLoadingDialog').hide();n&&n();}).send();}};f.exports=i;}),null);
__d('PageProductComposerMarketplaceCategorySelector.react',['cx','fbt','BUIFormSelector.react','React','XUIGrayText.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('BUIFormSelector.react').Option;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){var n=this.props.categories.map(function(o){return c('React').createElement(l,{value:o.id,key:o.id},o.text);});return c('React').createElement('div',{className:"_3-8x"},c('React').createElement(c('XUIGrayText.react'),{className:"_3-94",display:'block',weight:'bold',shade:'dark',size:'small'},i._("Product Category")),c('React').createElement(c('BUIFormSelector.react'),{density:'snug',onChange:function(o){return this.props.onCategoryClick(o.value);}.bind(this),value:this.props.value},n));};function m(){j.apply(this,arguments);}f.exports=m;}),null);
__d('PageProductComposerShippingOptions.react',['ix','cx','fbt','xuiglyph','CommerceSelfServeUI','CurrencyInput.atlas','Image.react','LeftRight.react','Link.react','React','XUIGrayText.react','XUIText.react','XUITextInput.react'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l,m,n=c('React').PropTypes;l=babelHelpers.inherits(o,c('React').Component);m=l&&l.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=m.constructor).call.apply(p,[this].concat(s)),this.$PageProductComposerShippingOptions1=function(){return {shipping_country:'US',shipping_price_currency:this.props.currencyCode,shipping_price_value:0,shipping_service:null};}.bind(this),this.$PageProductComposerShippingOptions2=function(u,v){var w=this.props.shippingOptions;w[u].shipping_service=v;this.props.onShippingOptionsChange(w);}.bind(this),this.$PageProductComposerShippingOptions3=function(u,v){var w=this.props.shippingOptions;w[u].shipping_price_value=v;this.props.onShippingOptionsChange(w);}.bind(this),this.$PageProductComposerShippingOptions5=function(){var u=this.props.shippingOptions;u[u.length]=this.$PageProductComposerShippingOptions1();this.props.onShippingOptionsChange(u);}.bind(this),this.$PageProductComposerShippingOptions4=function(u){var v=this.props.shippingOptions;v.splice(u,1);this.props.onShippingOptionsChange(v);var w=u>0?u-1:0;this.refs[w].focusInput();}.bind(this),q;}o.prototype.componentWillMount=function(){if(this.props.shippingOptions.length===0)this.props.onShippingOptionsChange([this.$PageProductComposerShippingOptions1()]);};o.prototype.componentWillReceiveProps=function(p){if(p.shippingOptions.length===0)this.props.onShippingOptionsChange([this.$PageProductComposerShippingOptions1()]);};o.prototype.render=function(){var p=this.props.shippingOptions.length,q=h("88985"),r=[];this.props.shippingOptions.forEach(function(x){var y=x.shipping_service,z=r.length;r[z]=c('React').createElement('tr',{className:"_5b1f",key:'option-'+z},c('React').createElement('td',{className:"_b3y"},c('React').createElement(c('XUITextInput.react'),{className:"_2mfs",disabled:this.props.disabled,height:'tall',value:y,placeholder:j._("Shipping method name"),onChange:function(aa){return this.$PageProductComposerShippingOptions2(z,aa.target.value);}.bind(this),ref:z})),c('React').createElement('td',{className:"_b3z"},c('React').createElement(c('CurrencyInput.atlas'),{className:"_5rpn",currency:x.shipping_price_currency,disabled:this.props.disabled,isZeroValidValue:true,value:Number(x.shipping_price_value)/100,onChange:function(aa){return this.$PageProductComposerShippingOptions3(z,aa*100);}.bind(this)})),p>c('CommerceSelfServeUI').MIN_SHIPPING_OPTIONS?c('React').createElement('td',{className:"_b3-"},c('React').createElement(c('Link.react'),{onClick:function(aa){this.props.disabled?null:this.$PageProductComposerShippingOptions4(z);}.bind(this)},c('React').createElement(c('Image.react'),{className:"_2_qb",src:q}))):null);}.bind(this));var s=void 0,t=c('React').createElement(c('XUIText.react'),{size:'small'},j._("Add Shipping Method"));if(p>=c('CommerceSelfServeUI').MAX_SHIPPING_OPTIONS){var u=j._("You have reached the maximum number of shipping options.");s=c('React').createElement(c('Link.react'),{'data-hover':'tooltip','data-tooltip-content':u,onClick:function x(y){return y.stopPropagation();}},t);}else s=c('React').createElement(c('Link.react'),{onClick:this.props.disabled?null:this.$PageProductComposerShippingOptions5},t);var v=null;if(this.props.settingsURI)v=c('React').createElement(c('Link.react'),{className:"_3-9b",href:this.props.settingsURI,target:'_blank'},j._("Edit Default Shipping Options"));var w=null;if(!this.props.hideTitle)w=c('React').createElement('div',{className:"_3-94"},c('React').createElement(c('XUIGrayText.react'),{display:'block',weight:'bold',shade:'dark',size:'small'},j._("Shipping Options"),v),c('React').createElement(c('XUIGrayText.react'),{shade:'light',size:'small'},j._("Customers will only be charged one shipping fee per order, even if they order more than one of this item.")));return c('React').createElement('div',{className:"_4qx _2pid"},w,c('React').createElement('table',{className:"_b40"},c('React').createElement('tbody',null,r)),c('React').createElement('div',{className:"_2pic _2pir"},s));};o.propTypes={currencyCode:n.string.isRequired,disabled:n.bool,hideTitle:n.bool,settingsURI:n.object,shippingOptions:n.arrayOf(n.shape({shipping_country:n.string,shipping_price_currency:n.string,shipping_price_value:n.number,shipping_service:n.string})).isRequired,onShippingOptionsChange:n.func.isRequired};f.exports=o;}),null);
__d('PageProductComposerTaxCategorySelector.react',['cx','fbt','invariant','AdsHelpLink.react','BUIFormSelector.react','CommerceSelfServeProductTaxCategories','React','XUIGrayText.react','forEachObject'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('BUIFormSelector.react').Option,n=c('React').PropTypes;k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=l.constructor).call.apply(p,[this].concat(s)),this.$PageProductComposerTaxCategorySelector1=function(u){Object.prototype.hasOwnProperty.call(c('CommerceSelfServeProductTaxCategories'),u)||j(0);switch(c('CommerceSelfServeProductTaxCategories')[u]){case c('CommerceSelfServeProductTaxCategories').TAX_ITEM_CODE_COMMERCE_SPORT_RECREATION:return i._("Sports and Recreation");case c('CommerceSelfServeProductTaxCategories').TAX_ITEM_CODE_COMMERCE_CLOTHING:return i._("Clothing");case c('CommerceSelfServeProductTaxCategories').TAX_ITEM_CODE_COMMERCE_SHOES:return i._("Shoes");case c('CommerceSelfServeProductTaxCategories').TAX_ITEM_CODE_COMMERCE_LUGGAGE_BAGS:return i._("Luggage\/Bags");case c('CommerceSelfServeProductTaxCategories').TAX_ITME_CODE_COMMERCE_PERSONAL_CARE:return i._("Personal Care");case c('CommerceSelfServeProductTaxCategories').TAX_ITEM_CODE_COMMERCE_JEWELRY:return i._("Jewelry");case c('CommerceSelfServeProductTaxCategories').TAX_ITEM_CODE_COMMERCE_WATCHES:return i._("Watches");case c('CommerceSelfServeProductTaxCategories').TAX_ITEM_CODE_COMMERCE_OTHERS:return i._("Other physical goods");default:j(0);}},q;}o.prototype.render=function(){var p=[];c('forEachObject')(c('CommerceSelfServeProductTaxCategories'),function(q,r){if(q!==c('CommerceSelfServeProductTaxCategories').NONE&&q!==c('CommerceSelfServeProductTaxCategories').TAX_ITEM_CODE_COMMERCE_SPORT_RECREATION_BAD)p.push(c('React').createElement(m,{value:q,key:'UNSPSC_'+q},this.$PageProductComposerTaxCategorySelector1(r)));}.bind(this));return c('React').createElement('div',{className:"_3-8x"},c('React').createElement(c('XUIGrayText.react'),{className:"_3-94",display:'block',weight:'bold',shade:'dark',size:'small'},i._("Product Category"),c('React').createElement(c('AdsHelpLink.react'),{width:350,position:'below'},i._("This category is used to calculate taxes. You can also enter a tax rate under Custom Product Taxes in Advanced Options."))),c('React').createElement(c('BUIFormSelector.react'),{density:'snug',onChange:this.props.onTaxCategoryChange,value:this.props.taxCategory},p));};o.propTypes={onTaxCategoryChange:n.func,taxCategory:n.number};o.defaultProps={taxCategory:c('CommerceSelfServeProductTaxCategories').TAX_ITEM_CODE_COMMERCE_OTHERS};f.exports=o;}),null);
__d('PageProductReviewNUX.react',['cx','fbt','React','ReactLayeredComponentMixin_DEPRECATED','XUIDialog.react','XUIDialogBody.react','XUICloseButton.react','XUIDialogFooter.react','XUIDialogOkayButton.react','XUIGrayText.react','classWithMixins','mixin'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=500;j=babelHelpers.inherits(n,c('classWithMixins')(c('React').Component,c('mixin')(c('ReactLayeredComponentMixin_DEPRECATED'))));k=j&&j.prototype;function n(){k.constructor.call(this);this.state={dialogShown:true};}n.prototype.render=function(){return c('React').createElement('span',null);};n.prototype.renderLayers=function(){if(!this.state.dialogShown)return {};return {dialog:c('React').createElement(c('XUIDialog.react'),{width:m,onToggle:function(o){return this.$PageProductReviewNux1.bind(this,o);}.bind(this),shown:this.state.dialogShown,layerHideOnBlur:false},c('React').createElement('div',{className:"_2pie _2pij"},c('React').createElement(c('XUICloseButton.react'),{label:this.props.closeButtonText,className:"layerCancel rfloat"})),c('React').createElement(c('XUIDialogBody.react'),{className:"_4o_9"},c('React').createElement('h1',{className:"_4o_a"},this.$PageProductReviewNux2()),c('React').createElement(c('XUIGrayText.react'),{size:'medium'},this.$PageProductReviewNux3())),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogOkayButton.react'),{use:'confirm',action:'button',onClick:this.$PageProductReviewNux1.bind(this,false)})))};};n.prototype.$PageProductReviewNux2=function(){return i._("You just added your first product!");};n.prototype.$PageProductReviewNux3=function(){return i._("All products are processed before they are visible to your customers. You will receive a notification when this is done, usually within a few minutes.");};n.prototype.$PageProductReviewNux1=function(o){this.setState({dialogShown:o});if(!o&&this.props.onDialogClosed)this.props.onDialogClosed();};n.propTypes={onDialogClosed:l.func};f.exports=n;}),null);
__d('ProductVisibilitySelector.react',['fbt','BUIFormSelector.react','ProductVisibility','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('BUIFormSelector.react').Option,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;m.prototype.render=function(){var n=this.props,o=n.onChange,p=n.value,q=babelHelpers.objectWithoutProperties(n,['onChange','value']);return c('React').createElement(c('BUIFormSelector.react'),babelHelpers['extends']({onChange:function(r){function s(t){return r.apply(this,arguments);}s.toString=function(){return r.toString();};return s;}(function(r){return o(r.value);}),value:p},q),c('React').createElement(k,{value:c('ProductVisibility').PUBLISHED},h._("Public")),c('React').createElement(k,{value:c('ProductVisibility').STAGING},h._("Unpublished")));};function m(){i.apply(this,arguments);}m.propTypes=babelHelpers['extends']({onChange:l.func.isRequired,value:l.string.isRequired},c('BUIFormSelector.react').propTypes);f.exports=m;}),null);
__d("XPagesManagerFeaturedItemsCountController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/content_tab\/featured_items_count\/",{});}),null);
__d("XPagesManagerProductCreateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/content_tab\/products\/product_create\/",{});}),null);
__d("XPagesManagerProductVariantsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/content_tab\/product_variants\/",{product_group_id:{type:"String",required:true}});}),null);
__d("XPagesManagerProductViewController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/content_tab\/product\/",{product_id:{type:"String",required:true}});}),null);
__d('PageProductComposerDialog.react',['ix','cx','fbt','AdsHelpLink.react','AsyncRequest','ActorURI','BOFSellerLogger','BOFSellerLoggerEvent','BOFSellerLoggingSources','BUIFormButton.react','CommerceCurrencySelector.react','CommerceExceptionHandlerMixin.react','CommerceInventoryToggle.react','CommerceSelfServeSection','CommerceSelfServeProductTaxCategories','CommerceSelfServeProductTaxRatesTable.react','CommerceInventoryAvailabilityOptions','Currency','AdsCurrencyInput.react','DOM','FBNumberInput.react','FBToggleSwitch.react','Image.react','InlineBlock.react','InputLabel.react','Link.react','CommerceCurrencyInputUtils','PageCommerceProductVariantPage.react','PageContentTabDispatcher','PageContentTabProductPhotoUploader.react','PagesManagerProductToolsConstants','PageProductActions','PageProductComposerShippingOptions.react','PageProductComposerMarketplaceCategorySelector.react','PageProductComposerTaxCategorySelector.react','PageProductReviewNUX.react','PageSettingsRef','PECurrency','ProductVisibility','ProductVisibilitySelector.react','React','ReactDOM','URI','XCommerceSelfServeParam','XPagesManagerFeaturedItemsCountController','XPagesManagerProductCreateController','XPagesManagerProductVariantsController','XPagesManagerSettingsController','XPagesManagerProductViewController','XUICheckboxInput.react','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogCancelButton.react','XUIDialogFooter.react','XUIDialogHeader.react','XUIDialogHeaderTitle.react','XUIDialogTitle.react','XUIError.react','XUIGrayText.react','XUINotice.react','XUISpinner.react','XUITextInput.react','areEqual','fbglyph','getOwnObjectValues','PageContentTabConstants'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('React').PropTypes,l=c('PageContentTabConstants').TABS,m='USD',n=500,o=80,p=3,q=50,r=1,s=100,t=100,u={main:'main',variant:'variant'},v={edit:'Edit',advanced:'Advanced'},w=c('React').createClass({displayName:'PageProductComposerDialog',mixins:[c('CommerceExceptionHandlerMixin.react')],propTypes:{categories:k.array,checkoutURL:k.string,collectionID:k.string,currencyCode:k.string,defaultShippingOptions:k.array,onProductChanged:k.func,onProductCreated:k.func,onProductDeleted:k.func,pageContentTabAccessToken:k.string.isRequired,pageID:k.string.isRequired,pageHasShop:k.bool.isRequired,productCatalogID:k.string.isRequired,productID:k.string,productGroupID:k.string,requireDescription:k.bool.isRequired,sections:k.array.isRequired,shownInitially:k.bool,showShareToTimelineToggle:k.bool,showTOS:k.bool,showVideoUploadButton:k.bool,source:k.oneOf(c('getOwnObjectValues')(c('BOFSellerLoggingSources'))).isRequired,tosURI:k.string,onClose:k.func,shouldCreateShopFromProduct:k.bool},getDefaultProps:function x(){return {showShareToTimelineToggle:true};},getInitialState:function x(){return {categoryID:null,checkoutURL:this.props.checkoutURL||'',currencyCode:this.props.currencyCode||m,currentTabKey:v.edit,currentPage:u.main,dialogShown:this.props.shownInitially,errorTabs:[],featuredCount:0,hasAttemptedSave:false,inventory:c('CommerceInventoryAvailabilityOptions').INVENTORY_IN_STOCK,isOnSale:false,loading:false,saving:false,photos:[],videos:[],productDesc:'',productPrice:0,productSalePrice:0,productTitle:'',productVisibility:c('ProductVisibility').PUBLISHED,shareToTimeline:false,shippingOptions:this.props.defaultShippingOptions||[],taxCategory:c('CommerceSelfServeProductTaxCategories').TAX_ITEM_CODE_COMMERCE_OTHERS,taxRates:{state_abbr:{},zip_code:{}},showVariants:false,visibilityNotice:null,variants:[],variantItems:{}};},componentWillMount:function x(){this._reviewedProductData=this._getReviewableDataFromState(this.state);if(this.props.productID)this._fetchProductDetails(this.props.pageID,this.props.productID);if(this.props.productGroupID)this._fetchVariants(this.props.pageID,this.props.productGroupID);this._fetchFeaturedCount(this.props.pageID);},componentDidMount:function x(){var event=this.props.productID?c('BOFSellerLoggerEvent').ACTN_EDIT_PRODUCT_CLICK:c('BOFSellerLoggerEvent').ACTN_ADD_PRODUCT_CLICK;this._logEvent(event);},componentWillReceiveProps:function x(y){if(this.props.pageID!==y.pageID||this.props.productID!==y.productID||this.props.productGroupID!==y.productGroupID){this._fetchProductDetails(y.pageID,y.productID);this._fetchVariants(y.pageID,y.productGroupID);}},_fetchFeaturedCount:function x(y){this.setState({loading:true});var z=c('ActorURI').create(c('XPagesManagerFeaturedItemsCountController').getURIBuilder().getURI(),y);new (c('AsyncRequest'))().setURI(z).setHandler(function(aa){var ba=aa.payload.featured_count;this.setState({loading:false,featuredCount:ba});}.bind(this)).send();},_fetchProductDetails:function x(y,z){this.setState({loading:true});var aa=c('ActorURI').create(c('XPagesManagerProductViewController').getURIBuilder().setString(c('XCommerceSelfServeParam').PRODUCT_ID,z).getURI(),y);new (c('AsyncRequest'))().setURI(aa).setHandler(this._onProductDetailsFetched).send();},_fetchVariants:function x(y,z){this.setState({loading:true});var aa=c('ActorURI').create(c('XPagesManagerProductVariantsController').getURIBuilder().setString('product_group_id',z).getURI(),y);new (c('AsyncRequest'))().setURI(aa).setHandler(function(ba){var ca=ba.payload,da={variants:ca.variants,variantItems:ca.variantItems};this._oldVariants=this._deepClone(da);this._reviewedProductData=this._getReviewableDataFromState(babelHelpers['extends']({},this.state,ca));this.setState(ca);}.bind(this)).send();},_oldVariants:{variants:[],variantItems:{}},_deepClone:function x(y){return JSON.parse(JSON.stringify(y));},onPhotosSelected:function x(y){this.setState({photos:this.state.photos.concat(y)});},onPhotoRemoved:function x(y){this.setState({photos:this.state.photos.filter(function(z){return z.fbid!==y.fbid;})});},onPhotoEdited:function x(y,z){var aa=this.state.photos.findIndex(function(ca){return ca.fbid===y;});if(aa!==undefined){c('BOFSellerLogger').log(c('BOFSellerLoggerEvent').ACTN_PHOTO_EDITED,this.props.pageID,{target_class:'Photo',target_id:z.fbid});var ba=this.state.photos.slice();ba[aa]=z;this.setState({photos:ba});}},_onVideoSelected:function x(y){var z=this.state.videos;z=z.concat({requestID:y,fbid:y,src:null,ready:false,error:false});this.setState({videos:z});},_onVideoRemoved:function x(y){this.setState({videos:this.state.videos.filter(function(z){return z.fbid!==y.fbid;})});},_onVideoUploadFinished:function x(y,z,aa){var ba=this.state.videos;for(var ca=0;ca<ba.length;ca++)if(ba[ca].requestID===y){ba[ca].fbid=z;ba[ca].src=aa;ba[ca].ready=true;}this.setState({videos:ba});},_onVideoUploadError:function x(y){var z=this.state.videos;for(var aa=0;aa<z.length;aa++)if(z[aa].requestID===y){z[aa].error=true;z[aa].ready=false;}this.setState({videos:z});},_getDialogHeader:function x(){switch(this.state.currentPage){case u.main:return c('React').createElement(c('XUIDialogHeader.react'),{activeTabKey:this.state.currentTabKey,onTabClick:this._handleTabChange},this._getTabHeaders());case u.variant:return c('React').createElement(c('XUIDialogTitle.react'),null,this._getTitle());}return c('React').createElement('div',null);},_getTabHeaders:function x(){var y=[c('React').createElement(c('XUIDialogHeaderTitle.react'),{href:'#',key:v.edit},this._getTitle())];if(this._showSection(c('CommerceSelfServeSection').TAX_TABLE))y.push(c('React').createElement(c('XUIDialogHeaderTitle.react'),{href:'#',key:v.advanced},j._("Advanced Options")));return y;},_getPhotoUploader:function x(){var y=this.state.hasAttemptedSave?this._getPhotosError(this.state.photos):null;return c('React').createElement(c('PageContentTabProductPhotoUploader.react'),{className:"_2anr",pageID:this.props.pageID,photoEditingEnabled:true,photos:this.state.photos,onPhotosSelected:this.onPhotosSelected,onPhotoRemoved:this.onPhotoRemoved,onPhotoEdited:this.onPhotoEdited,productCatalogID:this.props.productCatalogID,pageContentTabAccessToken:this.props.pageContentTabAccessToken,videos:this.state.videos,onVideoSelected:this._onVideoSelected,onVideoUploadFinished:this._onVideoUploadFinished,onVideoUploadError:this._onVideoUploadError,onVideoRemoved:this._onVideoRemoved,showVideoUploadButton:this.props.showVideoUploadButton,xuiError:y});},_getPhotoTooltip:function x(){if(this.state.photos.length>0||this.state.videos.length>0)return null;if(this.props.source===c('BOFSellerLoggingSources').PRODUCT_TAGGING_TYPEAHEAD&&!this.props.pageHasShop)return c('React').createElement(c('XUINotice.react'),{size:'small'},c('React').createElement('div',{className:"_45zv"},j._("Adding a product lets you tag it in posts, photos and videos on your Page.")));return c('React').createElement(c('XUINotice.react'),{size:'small'},c('React').createElement('div',{className:"_1mxl"},j._("Check out our {link} for tips on making your product images look good on Facebook.",[j.param('link',c('React').createElement(c('Link.react'),{href:'https://www.facebook.com/business/help/481150918755515',target:'_blank'},j._("recommended photo guidelines")))])));},_getTabBodies:function x(){var y=this.state.currentTabKey==v.edit,z=[c('React').createElement('div',{className:y?"_2pi1":"hidden_elem",key:'basic_product_edit_tab'},c('React').createElement('div',{dangerouslySetInnerHTML:this.state.visibilityNotice}),c('React').createElement('div',null,this._getPhotoUploader(),this._getPhotoTooltip()),c('React').createElement('div',{className:"clearfix"}),this._getNamePriceDescriptionInputs(),this._getCheckoutURLInput(),this._getFeaturedToggleSwitch(),this._getShareToTimelineToggle(),c('React').createElement('div',{className:"_3p77"},c('React').createElement('div',{className:"_4o5s"},this._getInventoryInput()),c('React').createElement('div',{className:"_4o5t"},this._getTaxCategorySelector())),c('React').createElement('div',{className:"_3p77"},c('React').createElement('div',{className:"_4o5s"},this._getVariantsButton()),c('React').createElement('div',{className:"_4o5t"},this._getVisibilitySelector())),this._getEditWarning(),this._getShippingOptionsSection(),this._getShopCreationNoticeSection(),this._getTOSSection())];if(this._showSection(c('CommerceSelfServeSection').TAX_TABLE))z.push(c('React').createElement('div',{className:(y?"hidden_elem":'')+(' '+"_2pi1")+(' '+"_5dz6"),key:'advanced_product_edit_tab'},this._getTaxTable()));return z;},_getShopCreationNoticeSection:function x(){if(this.props.pageHasShop||!this.props.shouldCreateShopFromProduct)return null;return c('React').createElement('div',{className:"_3-8x _4u1-"},j._("When you add a product we will create a shop section for your page. You can easily edit and manage your products within your shop."));},_getTOSSection:function x(){if(!this.props.showTOS)return null;return c('React').createElement('div',{className:"_3-8x _1otd"},j._("By clicking {Label displayed on button to save a product}, you agree to the {Merchant Terms and Policies link}",[j.param('Label displayed on button to save a product',this._getSaveButtonText()),j.param('Merchant Terms and Policies link',c('React').createElement(c('Link.react'),{href:this.props.tosURI,target:'_blank'},'Merchant Terms and Policies'))]));},_getMerchantSettingsURI:function x(){return c('XPagesManagerSettingsController').getURIBuilder().setString('page_token',this.props.pageID).setString('tab','shop').setString('ref',c('PageSettingsRef').PRODUCT_COMPOSER).getURI();},_getTaxTable:function x(){return c('React').createElement('div',null,c('React').createElement('div',{display:'block',className:"_3-96"},c('React').createElement(c('XUIGrayText.react'),{weight:'bold',shade:'dark',size:'medium'},j._("Custom Product Taxes")),c('React').createElement(c('AdsHelpLink.react'),{width:350,position:'below'},j._("You can enter specific taxes for products taxed at special rates, such as some foods and beverages."))),c('React').createElement(c('CommerceSelfServeProductTaxRatesTable.react'),{taxRates:this.state.taxRates,onChangeTaxRates:this._onChangeTaxRates}),c('React').createElement('div',{display:'block',className:"_3-8x"},c('React').createElement(c('Link.react'),{href:this._getMerchantSettingsURI(),target:'_blank'},j._("View Default Shop Taxes"))));},_getInnerContent:function x(){if(this.state.loading)return c('React').createElement(c('XUISpinner.react'),{className:"_2_i8",size:'large'});switch(this.state.currentPage){case u.main:return c('React').createElement('div',null,this._getTabBodies());case u.variant:return c('React').createElement('div',null,c('React').createElement('div',{className:"_1go"},c('React').createElement(c('InlineBlock.react'),{alignv:'middle',className:"_1gp",onClick:this._onVariantsSaveButtonClicked},c('React').createElement(c('Image.react'),{src:h("141823")})),c('React').createElement(c('InlineBlock.react'),{alignv:'middle',className:"_1gq"},j._("Variants"))),c('React').createElement('div',{className:"_3-8j"},c('React').createElement(c('XUIGrayText.react'),{display:'block'},j._("Variants are the different styles\u2014such as sizes, colors or materials\u2014that a product comes in."))),c('React').createElement(c('PageCommerceProductVariantPage.react'),{currencyCode:this.state.currencyCode,defaultVariantPrice:this.state.productPrice,getPriceError:this._getPriceError,inventoryType:this._showSection(c('CommerceSelfServeSection').IN_STOCK_TOGGLE)?c('CommerceSelfServeSection').IN_STOCK_TOGGLE:c('CommerceSelfServeSection').INVENTORY,isOnSale:this.state.isOnSale,setVariantInfo:function(y){return this.setState(y);}.bind(this),variants:this.state.variants,variantItems:this.state.variantItems}));}return c('React').createElement('div',null);},_backToMainPage:function x(){this.setState({currentPage:u.main});},_getVariantsButton:function x(){if(!this._showSection(c('CommerceSelfServeSection').VARIANTS))return null;return c('React').createElement('div',{className:"_3-8x"},c('React').createElement(c('XUIGrayText.react'),{weight:'bold',shade:'dark',size:'small',display:'block'},j._("Variants"),c('React').createElement(c('AdsHelpLink.react'),{width:350,position:'below'},j._("Variants are the different styles\u2014such as sizes, colors or materials\u2014that a product comes in."))),c('React').createElement(c('BUIFormButton.react'),{className:"_3-8w",density:'snug',label:j._("Edit Variants"),onClick:function(){return this.setState({currentPage:u.variant});}.bind(this)}));},_getCheckoutURLInput:function x(){if(!this._showSection(c('CommerceSelfServeSection').CHECKOUT_URL))return null;var y=this.getFieldErrorMessage(c('XCommerceSelfServeParam').CHECKOUT_URL)||(this.state.hasAttemptedSave?this._getCheckoutURLError(this.state.checkoutURL):null);return c('React').createElement('div',{className:"_3-97"},c('React').createElement(c('XUIGrayText.react'),{display:'inline',shade:'dark',size:'small',weight:'bold'},j._("Checkout URL")),c('React').createElement(c('AdsHelpLink.react'),{width:350,position:'above'},j._("The website where users will be directed to purchase this product")),c('React').createElement(c('XUITextInput.react'),{className:"_2mfs",disabled:this.state.loading,height:'tall',name:'checkoutURL',onChange:function(event){return this.setState({checkoutURL:event.target.value});}.bind(this),placeholder:j._("http:\/\/www.example.com"),value:this.state.checkoutURL,xuiError:y}));},_getDialogFooter:function x(){switch(this.state.currentPage){case u.main:return this._getMainFooter();case u.variant:return this._getVariantsFooter();}return null;},_getMainFooter:function x(){var y=null;if(this.props.productID&&!this.state.loading)y=c('React').createElement(c('Link.react'),{onClick:this.state.saving?null:this._onDeleteProductClicked},c('React').createElement(c('XUIGrayText.react'),{shade:'light',size:'small'},j._("Delete Product")));var z=this.state.saving?c('React').createElement(c('XUISpinner.react'),{size:'small',className:"_3-90"}):null;return c('React').createElement(c('XUIDialogFooter.react'),{leftContent:y},z,c('React').createElement(c('XUIDialogCancelButton.react'),{disabled:this.state.saving||this.state.loading}),c('React').createElement(c('XUIDialogButton.react'),{use:'confirm',label:this._getSaveButtonText(),action:'button',disabled:this.state.saving||this.state.loading,onClick:this._onSubmitButtonClicked}));},_getVariantsFooter:function x(){return c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{label:j._("Cancel"),action:'button',use:'default',onClick:this._onVariantsCancelButtonClicked}),c('React').createElement(c('XUIDialogButton.react'),{label:j._("Apply"),action:'button',use:'confirm',onClick:this._onVariantsSaveButtonClicked}));},_onVariantsCancelButtonClicked:function x(){this.setState(this._deepClone(this._oldVariants));this._backToMainPage();},_onVariantsSaveButtonClicked:function x(){this._oldVariants=this._deepClone({variants:this.state.variants,variantItems:this.state.variantItems});this._backToMainPage();},show:function x(){this.setState({currentPage:u.main,dialogShown:true});},hide:function x(){this.props.onClose&&this.props.onClose();this.setState({dialogShown:false});},_onDeleteProductClicked:function x(){c('PageProductActions').deleteProductsWithConfirmation(Array(this.props.productGroupID),this.props.pageID,function(){this.hide();if(this.props.onProductDeleted)this.props.onProductDeleted();}.bind(this));},_getCategoryInput:function x(){if(!this._showSection(c('CommerceSelfServeSection').CATEGORY))return null;var y=this.state.categoryID?this.state.categoryID:'0',z={id:'0',text:j._("Select category (optional)")};return c('React').createElement(c('PageProductComposerMarketplaceCategorySelector.react'),{categories:[z].concat(this.props.categories),value:y,onCategoryClick:function(aa){return this.setState({categoryID:aa});}.bind(this)});},_getNamePriceDescriptionInputs:function x(){var y=null;if(this.props.requireDescription){y=j._("Add details about your item");}else y=j._("Add details about your item (Optional)");var z=null;if(this.state.variants.length===0){var aa=c('CommerceCurrencyInputUtils').convertPEFormatToPBFormat(this.state.productPrice,this.state.currencyCode);z=c('React').createElement(c('AdsCurrencyInput.react'),{className:"_5rpn",currency:this.state.currencyCode,disabled:this.state.loading||this.state.variants.length>0,invalidInputIsNull:true,nonnegative:true,onDataUpdate:function(fa){this.setState({productPrice:c('CommerceCurrencyInputUtils').convertPBFormatToPEFormat(fa,this.state.currencyCode)});}.bind(this),placeholder:j._("Enter price"),value:aa!==null?aa:0,xuiError:this.state.hasAttemptedSave?this._getPriceError(this.state.productPrice):null});if(!this.props.currencyCode)z=c('React').createElement('div',null,c('React').createElement('div',{className:"_4tjr"},c('React').createElement(c('CommerceCurrencySelector.react'),{onChange:function(event){return this.setState({currencyCode:event.value});}.bind(this),selectedCurrency:this.state.currencyCode})),c('React').createElement('div',{className:"_4tke"},z));}else z=c('React').createElement('div',{className:"_4o5u"},c('React').createElement(c('XUIGrayText.react'),{shade:'light',size:'medium',className:"_4o5v"},this._getVariantsPriceRange('price')),c('React').createElement(c('Link.react'),{size:'small',className:"_20ac _2pii",onClick:function(){return this.setState({currentPage:u.variant});}.bind(this)},j._("Edit")));var ba=null;if(this.state.isOnSale){var ca=void 0;if(this.state.variants.length===0){var da=c('CommerceCurrencyInputUtils').convertPEFormatToPBFormat(this.state.productSalePrice,this.state.currencyCode);ca=c('React').createElement(c('AdsCurrencyInput.react'),{className:"_5rpn",currency:this.state.currencyCode,disabled:this.state.loading||this.state.variants.length>0,invalidInputIsNull:true,nonnegative:true,onDataUpdate:function(fa){this.setState({productSalePrice:c('CommerceCurrencyInputUtils').convertPBFormatToPEFormat(fa,this.state.currencyCode)});}.bind(this),placeholder:j._("Enter price"),value:da!==null?da:0,xuiError:this.state.hasAttemptedSave?this._getPriceError(this.state.productSalePrice):null});}else ca=c('React').createElement('div',{className:"_4o5u"},c('React').createElement(c('XUIGrayText.react'),{shade:'light',size:'medium',className:"_4o5v"},this._getVariantsPriceRange('salePrice')),c('React').createElement(c('Link.react'),{size:'small',className:"_20ac _2pii",onClick:function(){return this.setState({currentPage:u.variant});}.bind(this)},j._("Edit")));ba=c('React').createElement('div',{className:"_4o5t"},c('React').createElement(c('XUIGrayText.react'),{className:"_3-8x _3-94",display:'block',weight:'bold',shade:'dark',size:'small'},j._("Sale Price")),ca);}var ea=this.state.hasAttemptedSave?this._getProductDescriptionError(this.state.productDesc):null;return c('React').createElement('div',{className:"_2pin"},this._getNameInput(),c('React').createElement('div',{className:this.state.isOnSale?"_4o5s":''},c('React').createElement(c('XUIGrayText.react'),{className:"_3-8x _3-94",display:'block',weight:'bold',shade:'dark',size:'small'},j._("Price")),z),ba,c('React').createElement('div',{className:"clearfix"}),this._getSaleToggleSwitch(),c('React').createElement(c('XUIGrayText.react'),{className:"_3-8x _3-94",display:'block',weight:'bold',shade:'dark',size:'small'},j._("Description")),c('React').createElement(c('XUIError.react'),{xuiError:ea},c('React').createElement('textarea',{name:'productDescription',className:"_3jm _2ph-",disabled:this.state.loading,rows:p,value:this.state.productDesc,onChange:function(event){return this.setState({productDesc:event.target.value});}.bind(this),placeholder:y})),this._getCategoryInput());},_getNameInput:function x(){var y=this.getFieldErrorMessage(c('XCommerceSelfServeParam').PRODUCT_TITLE)||(this.state.hasAttemptedSave?this._getProductTitleError(this.state.productTitle):null);return c('React').createElement('div',null,c('React').createElement(c('XUIGrayText.react'),{className:"_3-94",display:'block',weight:'bold',shade:'dark',size:'small'},j._("Name")),c('React').createElement(c('XUITextInput.react'),{name:'productTitle',className:"_2mfs",disabled:this.state.loading,value:this.state.productTitle,height:'tall',maxLength:o,onChange:function(event){return this.setState({productTitle:event.target.value});}.bind(this),xuiError:y}));},_getVariantsPriceRange:function x(y){var z=Number.MAX_VALUE,aa=Number.MIN_VALUE;for(var ba in this.state.variantItems){var ca=this.state.variantItems[ba];if(ca[y]<z)z=ca[y];if(ca[y]>aa)aa=ca[y];}var da=this.state.currencyCode;if(z===aa){return c('PECurrency').formatAmount(da,z,true,false,false);}else return c('PECurrency').formatAmount(da,z,true,false,false)+' - '+c('PECurrency').formatAmount(da,aa,true,false,false);},_getTaxCategorySelector:function x(){if(!this._showSection(c('CommerceSelfServeSection').TAX_CATEGORY))return null;var y=this.state.taxCategory||c('CommerceSelfServeProductTaxCategories').TAX_ITEM_CODE_COMMERCE_OTHERS;if(y===c('CommerceSelfServeProductTaxCategories').TAX_ITEM_CODE_COMMERCE_SPORT_RECREATION_BAD)y=c('CommerceSelfServeProductTaxCategories').TAX_ITEM_CODE_COMMERCE_SPORT_RECREATION;return c('React').createElement(c('PageProductComposerTaxCategorySelector.react'),{className:"_3-8y",onTaxCategoryChange:this._handleTaxCategoryChange,taxCategory:y});},_getVisibilitySelector:function x(){if(!this._showSection(c('CommerceSelfServeSection').PRODUCT_VISIBILITY))return null;return c('React').createElement('div',null,c('React').createElement(c('XUIGrayText.react'),{className:"_3-94 _3-8x",display:'block',weight:'bold',shade:'dark',size:'small'},j._("Visibility")),c('React').createElement(c('ProductVisibilitySelector.react'),{density:'snug',onChange:function(y){return this.setState({productVisibility:y});}.bind(this),value:this.state.productVisibility}));},_getInventoryInput:function x(){var y=null;y=this._getInventoryNumberInput()!==null?this._getInventoryNumberInput():this._getInventoryStockToggle();if(y===null)return null;return c('React').createElement('div',null,c('React').createElement(c('XUIGrayText.react'),{className:"_3-94 _3-8x",display:'block',weight:'bold',shade:'dark',size:'small'},j._("Inventory")),y);},_getInventoryNumberInput:function x(){if(!this._showSection(c('CommerceSelfServeSection').INVENTORY))return null;var y=null;if(this.state.variants.length===0){y=c('React').createElement(c('FBNumberInput.react'),{className:"_3jm _2ph-",disabled:this.state.loading,name:'productInventory',nonnegative:true,value:this.state.inventory,onValueChange:function(ba){return this.setState({inventory:ba});}.bind(this)});}else{var z=0;for(var aa in this.state.variantItems)z+=this.state.variantItems[aa].inventory;y=c('React').createElement('div',{className:"_4o5u"},c('React').createElement('div',{className:"_4o5v"},c('React').createElement(c('XUIGrayText.react'),{shade:'light',size:'medium'},z)),c('React').createElement(c('Link.react'),{size:'small',className:"_20ac _2pii",onClick:function(){return this.setState({currentPage:u.variant});}.bind(this)},j._("Edit Inventory")));}return y;},_getInventoryStockToggle:function x(){if(!this._showSection(c('CommerceSelfServeSection').IN_STOCK_TOGGLE))return null;var y=null;if(this.state.variants.length===0){y=c('React').createElement(c('CommerceInventoryToggle.react'),{disabled:this.state.loading,inventory:this.state.inventory,setInventoryInfo:function(ba){this.setState({inventory:ba?c('CommerceInventoryAvailabilityOptions').INVENTORY_IN_STOCK:c('CommerceInventoryAvailabilityOptions').INVENTORY_OUT_OF_STOCK});}.bind(this)});}else{var z=0;for(var aa in this.state.variantItems)z+=this.state.variantItems[aa].inventory;y=c('React').createElement('div',null,c('React').createElement(c('CommerceInventoryToggle.react'),{disabled:true,inventory:z}),c('React').createElement('div',{className:"_4ul8"},c('React').createElement(c('Link.react'),{size:'small',onClick:function(){return this.setState({currentPage:u.variant});}.bind(this)},j._("Edit Variants Inventory"))));}return y;},_getSaleToggleSwitch:function x(){if(!this._showSection(c('CommerceSelfServeSection').SALE_PRICE))return null;return c('React').createElement('div',{className:"_3-8x"},c('React').createElement(c('FBToggleSwitch.react'),{disabled:this.state.loading,animate:true,checked:this.state.isOnSale,onToggle:function(y){return this.setState({isOnSale:y});}.bind(this)}),c('React').createElement('span',{className:"_3jn"},j._("This product is on sale"),c('React').createElement(c('AdsHelpLink.react'),{width:350,position:'below'},j._("Show people you're selling this product at a discount by setting a sale price in addition to the regular price."))));},_getShippingOptionsSection:function x(){if(!this._showSection(c('CommerceSelfServeSection').SHIPPING_OPTIONS))return null;return c('React').createElement(c('PageProductComposerShippingOptions.react'),{currencyCode:this.state.currencyCode,disabled:this.state.loading,shippingOptions:this.state.shippingOptions,settingsURI:this.props.productID?undefined:this._getMerchantSettingsURI(),onShippingOptionsChange:function(y){return this.setState({shippingOptions:y});}.bind(this)});},_getShareToTimelineToggle:function x(){if(this.props.productID||!this.props.showShareToTimelineToggle)return null;var y=null;if(this.state.shareToTimeline)y=c('React').createElement('div',{className:"_4lw_"},j._("Your product will be shared on your Page as soon as it's approved."));return c('React').createElement('div',null,c('React').createElement(c('FBToggleSwitch.react'),{disabled:this.state.loading,animate:true,checked:this.state.shareToTimeline,onToggle:function(z){return this.setState({shareToTimeline:z});}.bind(this)}),c('React').createElement('span',{className:"_3jn"},j._("Share this product on your page"),c('React').createElement(c('AdsHelpLink.react'),{width:350,position:'above'},j._("Automatically post this product to your Page's Timeline as soon as it's approved."))),y);},_unpackTaxRates:function x(){var y=[],z={},aa={};for(var ba in this.state.taxRates){var ca=this.state.taxRates[ba];for(var da in ca){y[y.length]=da;z[da]=ca[da].tax_rate;aa[da]=ca[da].is_applied_to_shipping;}}return {tax_locations:y,tax_percent_map:z,tax_applied_to_shipping_map:aa};},_getFeaturedToggleSwitch:function x(){if(!this._showSection(c('CommerceSelfServeSection').FEATURED_PRODUCT_TOGGLE))return null;return c('React').createElement('div',{className:"_3-95"},c('React').createElement(c('FBToggleSwitch.react'),{disabled:this.state.loading||this._isFeatureProductToggleDisabled(),animate:true,checked:this.state.featuredProduct,onToggle:this._handleFeatureProductToggleChange}),c('React').createElement('span',{className:"_3jn"},j._("Feature this product"),c('React').createElement(c('AdsHelpLink.react'),{width:350,position:'above'},this._getHelpText())));},_handleFeatureProductToggleChange:function x(y){var z=y?this.state.featuredCount+1:this.state.featuredCount-1;this.setState({featuredProduct:y,featuredCount:z});},_isFeatureProductToggleDisabled:function x(){return !this.state.featuredProduct&&this.state.featuredCount>=c('PagesManagerProductToolsConstants').MAX_FEATURED_ITEM_COUNT;},_getHelpText:function x(){if(this._isFeatureProductToggleDisabled())return j._({"*":"You've already chosen {Maximum number of products that can be featured} to feature. Stop featuring one of your currently selected products to feature this one instead."},[j.param('Maximum number of products that can be featured',c('PagesManagerProductToolsConstants').MAX_FEATURED_ITEM_COUNT,[0])]);return j._({"*":"Featured products appear at the top of your page and are listed first in your shop. You can feature up to {Maximum number of products that can be featured} products."},[j.param('Maximum number of products that can be featured',c('PagesManagerProductToolsConstants').MAX_FEATURED_ITEM_COUNT,[0])]);},_getTitle:function x(){if(this.state.currentPage===u.variant)return j._("Edit Variants");if(this.props.productID)return j._("Edit Product");return j._("Add Product");},_getSaveButtonText:function x(){return j._("Save");},_onProductDetailsFetched:function x(y){var z=y.payload,aa=z.visibility_notice===null?null:z.visibility_notice.markup;for(var ba=0;ba<z.videos.length;ba++){z.videos[ba].ready=true;z.videos[ba].error=false;}var ca=z.price,da=z.sale_price,ea={checkoutURL:z.checkout_url,currentTabKey:v.edit,currentPage:u.main,dialogShown:true,productTitle:z.name,productDesc:z.description,productPrice:ca,productSalePrice:da,productVisibility:z.visibility,photos:z.images,videos:z.videos,featuredProduct:z.featured_product,inventory:z.inventory,shippingOptions:z.shipping_options,taxCategory:z.tax_category,showVariants:z.show_variants,visibilityNotice:aa,loading:false,featuredCount:z.featured_count,taxRates:z.tax_rates};this._reviewedProductData=this._getReviewableDataFromState(babelHelpers['extends']({},this.state,ea));this.setState(ea);},_reviewedProductData:{},_getReviewableDataFromState:function x(y){var z=y.checkoutURL,aa=y.productTitle,ba=y.productDesc,ca=y.photos,da=y.videos,ea=y.variants;return this._deepClone({checkoutURL:z,productTitle:aa,productDesc:ba,photos:ca,videos:da,variants:ea});},_logEvent:function x(event){var y=this.props.productID?{target_class:'EntProductItem',target_id:this.props.productID}:null;c('BOFSellerLogger').log(event,this.props.pageID,babelHelpers['extends']({source:this.props.source},y));},_onToggleDialog:function x(y){this.setState({dialogShown:y});if(y)return;this.props.onClose&&this.props.onClose();var event=this.props.productID?c('BOFSellerLoggerEvent').ACTN_CANCEL_EDIT_PRODUCT:c('BOFSellerLoggerEvent').ACTN_CANCEL_ADD_PRODUCT;this._logEvent(event);},_getPriceError:function x(y){var z=this._getMinimumPrice(),aa=null;if(this._showSection(c('CommerceSelfServeSection').MINIMUM_PRICE_ERROR)&&(!y||y<z)){var ba=c('PECurrency').formatAmount(this.state.currencyCode,z,true,false,false);aa=j._("Price must be at least {Minimum Product Price}",[j.param('Minimum Product Price',ba)]);}else if(y==null||y<0)aa=j._("Non-negative price is required");return aa;},_getMinimumPrice:function x(){var y=q;if(this.state.currencyCode!=='USD'){var z=c('Currency').getOffset(this.state.currencyCode);y=z==t?r:s;}return y;},_getCheckoutURLError:function x(y){var z=null;if(y==='')z=j._("Missing Checkout URL: This product must have a valid url, like \"http:\/\/www.example.com\"");return z;},_getPhotosError:function x(y){var z=null;if(this.state.photos.length===0)z=j._("Product Photo Required: Please provide at least one photo of this product");return z;},_getProductTitleError:function x(y){var z=null;if(y==='')z=j._("Field is Empty: Can't have this field be blank");return z;},_getEditWarning:function x(){if(!this.props.productID||this.state.visibilityNotice)return null;if(c('areEqual')(this._reviewedProductData,this._getReviewableDataFromState(this.state)))return null;return c('React').createElement(c('XUINotice.react'),{size:'small',className:"_3-8y"},j._("This product has been approved and is visible to anyone who visits your shop. If you edit this product, we'll review any changes before they're made publicly visible."));},_getProductDescriptionError:function x(y){var z=null;if(this.props.requireDescription&&y.trim()==='')z=j._("Description Required: Please provide a description for this product.");return z;},_handleTabChange:function x(y){this.setState({currentTabKey:y});},_handleTaxCategoryChange:function x(y){this.setState({taxCategory:y.value});},_validatePrices:function x(){var y=this.state.variants,z=this.state.variantItems;if(!y||y.length===0){if(this._getPriceError(this.state.productPrice)||this.state.isOnSale&&this._getPriceError(this.state.productSalePrice)){this._navigateToTab(v.edit);return false;}return true;}for(var aa in this.state.variantItems){var ba=this._getMinimumPrice();if(z[aa].price<ba||this.state.isOnSale&&this.state.variantItems[aa].salePrice<ba){this._navigateToTab(u.variant);return false;}}return true;},_validateCheckoutURL:function x(){if(!this._showSection(c('CommerceSelfServeSection').CHECKOUT_URL))return true;return !this._getCheckoutURLError(this.state.checkoutURL);},_validatePhotos:function x(){return !this._getPhotosError(this.state.photos);},_validateProductTitle:function x(){return !this._getProductTitleError(this.state.productTitle);},_onSubmitButtonClicked:function x(){this.setState({saving:true,hasAttemptedSave:true});if(!this._validatePrices()||!this._validateCheckoutURL()||!this._validatePhotos()||!this._validateProductTitle()){this.setState({saving:false});return;}var y=[];this.state.photos.forEach(function(sa){y.push(sa.fbid);});var z=[];this.state.videos.forEach(function(sa){if(sa.ready&&!sa.error)z.push(sa.fbid);});var aa=this.state.shippingOptions.filter(function(sa){return sa.shipping_service&&!!sa.shipping_service.trim();});this.setState({shippingOptions:aa});var ba=[],ca=[];aa.forEach(function(sa){ba.push(sa.shipping_service);ca.push(Math.round(sa.shipping_price_value));});var da=this._unpackTaxRates(),ea=this.state.variants,fa=ea.map(function(sa){return sa.label;}),ga=ea.map(function(sa){return sa.options;}),ha=this.state.variantItems,ia={},ja={},ka={},la={},ma={};for(var na in ha){var oa=ha[na];ia[na]=oa.inventory;ja[na]=oa.price;ka[na]=oa.salePrice;la[na]=JSON.stringify(oa.properties);ma[na]=oa.productID;}var pa={};pa.source=this.props.source;pa[c('XCommerceSelfServeParam').PRODUCT_TITLE]=this.state.productTitle;pa[c('XCommerceSelfServeParam').PRODUCT_DESCRIPTION]=this.state.productDesc;pa[c('XCommerceSelfServeParam').PRODUCT_PRICE]=this.state.productPrice;pa[c('XCommerceSelfServeParam').PRODUCT_SALE_PRICE]=this.state.productSalePrice;pa[c('XCommerceSelfServeParam').IS_ON_SALE]=this.state.isOnSale;pa[c('XCommerceSelfServeParam').COLLECTION_ID]=this.props.collectionID;pa[c('XCommerceSelfServeParam').CURRENCY_CODE]=this.state.currencyCode;pa[c('XCommerceSelfServeParam').PRODUCT_PHOTO_IDS]=y;pa[c('XCommerceSelfServeParam').PRODUCT_VIDEO_IDS]=z;pa[c('XCommerceSelfServeParam').PRODUCT_CATALOG_ID]=this.props.productCatalogID;pa[c('XCommerceSelfServeParam').PRODUCT_ID]=this.props.productID;pa[c('XCommerceSelfServeParam').FEATURED_PRODUCT]=this.state.featuredProduct;pa[c('XCommerceSelfServeParam').SHARE_TO_TIMELINE]=this.props.showShareToTimelineToggle&&this.state.shareToTimeline;pa[c('XCommerceSelfServeParam').INVENTORY]=this.state.inventory;pa[c('XCommerceSelfServeParam').SHIPPING_OPTION_NAMES]=ba;pa[c('XCommerceSelfServeParam').SHIPPING_OPTION_VALUES]=ca;pa[c('XCommerceSelfServeParam').TAX_CATEGORY]=this.state.taxCategory;pa[c('XCommerceSelfServeParam').TAX_LOCATIONS]=da.tax_locations;pa[c('XCommerceSelfServeParam').TAX_APPLIED_TO_SHIPPING_MAP]=da.tax_applied_to_shipping_map;pa[c('XCommerceSelfServeParam').TAX_PERCENT_MAP]=da.tax_percent_map;pa[c('XCommerceSelfServeParam').VARIANT_NAMES]=fa;pa[c('XCommerceSelfServeParam').VARIANT_INVENTORY]=ia;pa[c('XCommerceSelfServeParam').VARIANT_PRICE]=ja;pa[c('XCommerceSelfServeParam').VARIANT_SALE_PRICE]=ka;pa[c('XCommerceSelfServeParam').VARIANT_DATA]=la;pa[c('XCommerceSelfServeParam').VARIANT_PRODUCT_ID]=ma;pa[c('XCommerceSelfServeParam').VISIBILITY]=this.state.productVisibility;pa[c('XCommerceSelfServeParam').CHECKOUT_URL]=this.state.checkoutURL;pa[c('XCommerceSelfServeParam').ACCEPTED_TOS]=this.props.showTOS;for(var qa=0;qa<ga.length;qa++)pa['variant'+qa+'_options']=ga[qa];var ra=c('ActorURI').create(c('XPagesManagerProductCreateController').getURIBuilder().getURI(),this.props.pageID);this.sendAsync(ra,pa,this._onProductUpdated,function(){return this.setState({saving:false});}.bind(this));},_navigateToTab:function x(y){switch(y){case u.variant:this.setState({currentPage:u.variant});break;case v.edit:this.setState({currentTabKey:v.edit});break;case v.advanced:this.setState({currentTabKey:v.advanced});break;}},_onChangeTaxRates:function x(y){this.setState({taxRates:y});},_onProductUpdated:function x(y){this.setState({saving:false,dialogShown:false});if(this.props.productID){c('PageContentTabDispatcher').handlePostChanged(y.payload);}else{if(this.props.onProductCreated)this.props.onProductCreated(y.payload);c('PageContentTabDispatcher').handlePostCreated(l.COMMERCE_PRODUCTS,y.payload,this.props.pageID);}if(y.payload.show_creation_nux){c('ReactDOM').render(c('React').createElement(c('PageProductReviewNUX.react'),{onDialogClosed:function(){if(this.props.onProductChanged)this.props.onProductChanged(y.payload);}.bind(this)}),c('DOM').create('div'));}else if(this.props.onProductChanged)this.props.onProductChanged(y.payload);c('ReactDOM').unmountComponentAtNode(c('ReactDOM').findDOMNode(this).parentNode);},render:function x(){if(!this.state.dialogShown)return null;var y=[];if(this.hasFieldErrors())y.push(j._("Your product can't be saved as is. Please check the product info, advanced options and variants and try again."));if(this.hasGeneralError())y.push(this.getGeneralErrorMessage());var z=null;if(y.length>0)z=c('React').createElement('div',{className:"_2pib _2piq"},this.renderErrorMessages(y));return c('React').createElement(c('XUIDialog.react'),{width:n,causalElementRef:function(){return this.refs.createButton;}.bind(this),onToggle:this._onToggleDialog,shown:this.state.dialogShown,key:'dialog'},this._getDialogHeader(),c('React').createElement(c('XUIDialogBody.react'),{useCustomPadding:true},this._getInnerContent()),z,this._getDialogFooter());},_showSection:function x(y){return this.props.sections.indexOf(y)>=0;}});f.exports=w;}),null);
__d("XCommerceProductDialogLoaderController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/commerce\/product_composer_dialog\/loader\/",{page_id:{type:"Int",required:true}});}),null);
__d('PageProductComposerDialogLoader.react',['AsyncRequest','BOFSellerLoggingSources','LoadingDialog.react','PageProductComposerDialog.react','React','XCommerceProductDialogLoaderController','XCommerceSelfServeParam','getOwnObjectValues'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=440,j=c('React').createClass({displayName:'PageProductComposerDialogLoader',propTypes:{collectionID:h.string,onClose:h.func,onProductChanged:h.func,onProductCreated:h.func,onProductDeleted:h.func,productID:h.string,productGroupID:h.string,pageID:h.string.isRequired,source:h.oneOf(c('getOwnObjectValues')(c('BOFSellerLoggingSources'))).isRequired},getInitialState:function k(){return {loading:true};},componentWillMount:function k(){this._fetchPageDetails(this.props.pageID);},_fetchPageDetails:function k(l){var m=c('XCommerceProductDialogLoaderController').getURIBuilder().setInt(c('XCommerceSelfServeParam').PAGE_ID,l).getURI();new (c('AsyncRequest'))().setURI(m).setHandler(this._onPageDetailsFetched).send();},_onPageDetailsFetched:function k(l){var m=l.payload;this.setState({categories:m.categories,currencyCode:m.currency_code,defaultShippingOptions:m.default_shipping_options,hasValidTOS:m.has_valid_tos,loading:false,pageContentTabAccessToken:m.page_content_tab_access_token,pageHasShop:m.page_has_shop,productCatalogID:m.product_catalog_id,requireDescription:m.require_description,sections:m.sections,shouldCreateShopFromProduct:m.should_create_shop_from_product,showVideoUploadButton:m.show_video_upload_button,tosURI:m.tos_uri});},render:function k(){if(this.state.loading)return c('React').createElement(c('LoadingDialog.react'),{shown:true,width:i});return c('React').createElement(c('PageProductComposerDialog.react'),{categories:this.state.categories,collectionID:this.props.collectionID,currencyCode:this.state.currencyCode,defaultShippingOptions:this.state.defaultShippingOptions,onClose:this.props.onClose,onProductChanged:this.props.onProductChanged,onProductCreated:this.props.onProductCreated,onProductDeleted:this.props.onProductDeleted,pageContentTabAccessToken:this.state.pageContentTabAccessToken,pageID:this.props.pageID,pageHasShop:this.state.pageHasShop,productCatalogID:this.state.productCatalogID,productID:this.props.productID,productGroupID:this.props.productGroupID,requireDescription:this.state.requireDescription,sections:this.state.sections,shouldCreateShopFromProduct:this.state.shouldCreateShopFromProduct,shownInitially:true,showShareToTimelineToggle:this.state.pageHasShop,showTOS:!this.state.hasValidTOS,showVideoUploadButton:this.state.showVideoUploadButton,source:this.props.source,tosURI:this.state.tosURI});}});f.exports=j;}),null);
__d('ReactComposerProductTaggerTokenizerToken.react',['cx','ReactComposerPeopleTaggerTokenizerToken.react','React','joinClasses'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){'use strict';var l="_rox";return c('React').createElement(c('ReactComposerPeopleTaggerTokenizerToken.react'),babelHelpers['extends']({},this.props,{className:c('joinClasses')(this.props.className,l)}));};function k(){'use strict';i.apply(this,arguments);}f.exports=k;}),null);
__d('ReactComposerProductTaggerComponent.react',['cx','fbt','BOFSellerLoggingSources','CommerceProductTaggerType','ReactComposerPhotoActions','ReactComposerProductTaggerTokenizerToken.react','ReactComposerTaggerActions','ReactComposerTaggerPresenter','ReactComposerTaggerType','ReactComposerTaggerViewStyles','DOM','Grid.react','PageProductComposerDialogLoader.react','ProductTaggingTranslations','React','ReactDOM','SearchableEntry','TokenizerExampleSearchSource','XUITokenizer.react','emptyFunction'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('Grid.react').GridItem,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={numberOfTags:this.props.taggerData.length,queryString:''},this.$ReactComposerProductTaggerComponent9=function(t){var u=t.products.data[0];if(this.$ReactComposerProductTaggerComponent8(u.id))return;var v={title:u.name,subtitle:u.price,type:'product_item',uniqueID:u.id};this.$ReactComposerProductTaggerComponent10(new (c('SearchableEntry'))(v));}.bind(this),this.$ReactComposerProductTaggerComponent4=function(t){if(t.getType()==='product_item_add'){c('ReactDOM').render(c('React').createElement(c('PageProductComposerDialogLoader.react'),{onProductCreated:this.$ReactComposerProductTaggerComponent9,pageID:this.props.pageID,source:c('BOFSellerLoggingSources').PRODUCT_TAGGING_TYPEAHEAD}),c('DOM').create('div'));return;}if(this.$ReactComposerProductTaggerComponent8(t.getUniqueID()))return;this.$ReactComposerProductTaggerComponent10(t);}.bind(this),this.$ReactComposerProductTaggerComponent6=function(t){var u=this.props.taggerData,v=u.indexOf(t);if(v==-1)return;u.splice(v,1);this.setState({numberOfTags:u.length});c('ReactComposerPhotoActions').untagSubjectFromAllPhotos(this.props.reactComposerID,t.getUniqueID());this.props.onSelect&&this.props.onSelect(u);}.bind(this),this.$ReactComposerProductTaggerComponent5=function(event){this.setState({queryString:event.target.value});}.bind(this),p;}n.prototype.componentDidMount=function(){this.$ReactComposerProductTaggerComponent2();};n.prototype.componentDidUpdate=function(o,p){if(this.state.numberOfTags!==p.numberOfTags||this.state.queryString!==p.queryString)this.$ReactComposerProductTaggerComponent2();};n.prototype.componentWillUnmount=function(){this.$ReactComposerProductTaggerComponent2(false);};n.prototype.render=function(){return c('React').createElement(c('Grid.react'),{cols:2,className:"_5esl",role:'presentation'},c('React').createElement(l,{key:'label',className:"_5esm",role:'presentation'},i._("Products")),c('React').createElement(l,{key:'tokenizer',className:"_5esw",role:'presentation'},c('React').createElement('div',null,c('React').createElement(c('XUITokenizer.react'),babelHelpers['extends']({},this.props,{additionalEntries:this.$ReactComposerProductTaggerComponent3(),className:"_5esx _ysh _4fmg",entries:this.props.taggerData,focusAfterSelection:false,focusedOnInit:this.props.autoFocus,onAddEntryAttempt:this.$ReactComposerProductTaggerComponent4,onQueryStringChange:this.$ReactComposerProductTaggerComponent5,onRemoveEntryAttempt:this.$ReactComposerProductTaggerComponent6,placeholder:this.props.placeholder,presenter:this.$ReactComposerProductTaggerComponent7(),ref:function(o){return this.$ReactComposerProductTaggerComponent1=o;}.bind(this),searchSource:this.props.taggerSource,showEntriesOnFocus:true})))));};n.prototype.$ReactComposerProductTaggerComponent2=function(o){var p=this.props.productTaggerType;if(p!==c('CommerceProductTaggerType').INFLUENCER_PAGE)return;var q=void 0;if(o!==undefined){q=o;}else q=this.state.numberOfTags===1&&!this.state.queryString;c('ReactComposerTaggerActions').handleSetTaggerShowTooltip(this.props.reactComposerID,c('ReactComposerTaggerType').SPONSOR,q);};n.prototype.$ReactComposerProductTaggerComponent3=function(){if(!this.props.showAddProduct)return [];var o=this.props.productTaggerType===c('CommerceProductTaggerType').SHOP_PAGE,p={photo:'/images/commerce/create-product-typeahead.png',title:c('ProductTaggingTranslations').getAddProductTitle(o),subtitle:c('ProductTaggingTranslations').getAddProductSubtitle(o),type:'product_item_add',uniqueID:'product_item_add'};return [new (c('SearchableEntry'))(p)];};n.prototype.$ReactComposerProductTaggerComponent8=function(o){var p=this.props.taggerData;return p.some(function(q){return q.getUniqueID()===o;});};n.prototype.$ReactComposerProductTaggerComponent10=function(o){var p=this.props.taggerData;p.push(o);this.setState({numberOfTags:p.length,queryString:this.$ReactComposerProductTaggerComponent1.queryString});this.props.onSelect&&this.props.onSelect(p);};n.prototype.$ReactComposerProductTaggerComponent7=function(){var o={};o.taggerViewStyle=c('ReactComposerTaggerViewStyles').DEFAULT;o.taggerListClassName="_ysi";return Object.assign({},c('ReactComposerTaggerPresenter'),{extraRendererProps:o,sortEntries:this.$ReactComposerProductTaggerComponent11,TokenRenderer:c('ReactComposerProductTaggerTokenizerToken.react')});};n.prototype.$ReactComposerProductTaggerComponent11=function(o,p,q){o.sort(function(r,s){if(r.getType()==='product_item_add')return 1;if(s.getType()==='product_item_add')return -1;return 0;});return o;};n.propTypes={autoFocus:m.bool,onSelect:m.func,pageID:m.string.isRequired,placeholder:m.string,productTaggerType:m.string.isRequired,reactComposerID:m.string.isRequired,showAddProduct:m.bool,taggerSource:m.object,taggerData:m.array.isRequired};n.defaultProps={autoFocus:true,onSelect:c('emptyFunction'),placeholder:i._("Type product name or ID"),showAddProduct:false,taggerData:[],taggerSource:new (c('TokenizerExampleSearchSource'))()};f.exports=n;}),null);
__d('ReactComposerProductTaggerContainer.react',['ReactComposerLoggingName','ReactComposerProductTaggerComponent.react','ReactComposerTaggerActions','ReactComposerTaggerContainerMixin','ReactComposerTaggerType','React','SubscriptionsHandler','WebAsyncSearchSource'],(function a(b,c,d,e,f,g){var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerProductTaggerContainer',_subscriptions:undefined,mixins:[c('ReactComposerTaggerContainerMixin')()],statics:{taggerID:c('ReactComposerTaggerType').PRODUCT,loggingName:c('ReactComposerLoggingName').PRODUCT_TAGGER,taggerComponent:c('ReactComposerProductTaggerComponent.react')},propTypes:{pageID:h.string.isRequired,productTaggerType:h.string.isRequired,reactComposerID:h.string.isRequired,showAddProduct:h.bool,viewer:h.string.isRequired},getInitialState:function j(){return {reachEstimate:null,searchSource:null};},componentWillMount:function j(){this._updateProductSearchSource();},componentWillUnmount:function j(){this._subscriptions&&this._subscriptions.release();},_updateProductSearchSource:function j(){var k=this.state.searchSource;if(k===null)k=this._createAndBootstrapProductTypeSearchSource();c('ReactComposerTaggerActions').setTaggerSource(this.context.composerID,c('ReactComposerTaggerType').PRODUCT,k);},_createAndBootstrapProductTypeSearchSource:function j(){var k={filter:['product_items'],viewer:this.props.viewer};return new (c('WebAsyncSearchSource'))({getAllForEmptyQuery:true,queryRequests:[{uri:'/ajax/product_items/typeahead/query.php',data:Object.assign({},k,{is_bootstrap:false,page_id:this.props.pageID})}],bootstrapRequests:[{uri:'/ajax/product_items/typeahead/bootstrap.php',data:Object.assign({},k,{is_bootstrap:true,page_id:this.props.pageID})}],auxiliaryFields:{verified:'is_verified'}});}});f.exports=i;}),null);
__d('ReactComposerTargetingTaggerButtonMixin',['cx','fbt'],(function a(b,c,d,e,f,g,h,i){'use strict';var j={getInitialState:function k(){return {dialogShown:false};},getTitleTooltip:function k(){if(this.props.createLiveVideoTooltipText!=null){return this.props.createLiveVideoTooltipText;}else if(this.props.useTargetingAsFilter){return i._("Narrow the potential News Feed audience for this post");}else return i._("Choose the preferred audiences for this post");},getTitle:function k(){return this.getTitleTooltip();},getTooltip:function k(){return this.getTitleTooltip();},getClassName:function k(){return "_lmf";},getRef:function k(){return 'fbReactComposerTargetingTagger';},_onToggle:function k(l){setTimeout(function(){return this.setState({dialogShown:l});}.bind(this),0);},_onSelectX:function k(){this.setState({dialogShown:true});}};f.exports=j;}),null);
__d("XReactComposerTargetingTaggerNuxController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/react_composer\/edit\/targeting_tagger_nux\/",{});}),null);
__d('ReactComposerTargetingTaggerButton.react',['fbt','AsyncRequest','ReactComposerTaggerButtonMixin','ReactComposerTaggerType','ReactComposerTargetingTaggerButtonMixin','PagesComposerAudiences.react','React','ReactLayeredComponentMixin_DEPRECATED','XReactComposerTargetingTaggerNuxController','XUIAmbientNUX.react','XUIText.react','PagesComposerAudiencesConstants'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=c('PagesComposerAudiencesConstants').TABS,k=-12,l=300,m=c('React').createClass({displayName:'ReactComposerTargetingTaggerButton',mixins:[c('ReactComposerTaggerButtonMixin'),c('ReactComposerTargetingTaggerButtonMixin'),c('ReactLayeredComponentMixin_DEPRECATED')],propTypes:{createLiveVideoTooltipText:i.string,feedTargetingGK:i.bool,feedTargetingShowReachGK:i.bool,hideFeedTargeting:i.bool,shouldShowTargetingTaggerNux:i.bool,shouldShowRestrictionTabNux:i.bool,useTargetingAsFilter:i.bool,shouldHideLeftFooter:i.bool,allowExclusionsWithoutInclusions:i.bool},statics:{taggerID:c('ReactComposerTaggerType').TARGETING,disableToggle:true},getDefaultProps:function n(){return {feedTargetingGK:false,feedTargetingShowReachGK:false,hideFeedTargeting:false,useTargetingAsFilter:true};},getInitialState:function n(){return {showTargetingTaggerNux:this.props.shouldShowTargetingTaggerNux};},componentDidMount:function n(){var o=!this.state.dialogShown&&this.state.showTargetingTaggerNux&&this.props.feedTargetingGK;if(o){var p=c('XReactComposerTargetingTaggerNuxController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(p).setMethod('POST').setData({impression:true}).send();}},componentWillUnmount:function n(){if(this.state.showTargetingTaggerNux)this.setState({showTargetingTaggerNux:false});},_onNuxClose:function n(){this.setState({showTargetingTaggerNux:false});var o=c('XReactComposerTargetingTaggerNuxController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(o).setMethod('POST').setData({acked:true}).send();},_renderNux:function n(){return c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:function(){return this.refs.fbReactComposerTargetingTagger;}.bind(this),onCloseButtonClick:this._onNuxClose,offsetY:k,position:'below',shown:true,width:'custom',customwidth:l},c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),null,h._("Use Audience Optimization to reach people who are more likely to engage with your post."))));},renderLayers:function n(){var o=!this.state.dialogShown&&this.state.showTargetingTaggerNux&&this.props.feedTargetingGK;if(o)return this._renderNux();if(this.state.dialogShown)return c('React').createElement(c('PagesComposerAudiences.react'),{allowExclusionsWithoutInclusions:this.props.allowExclusionsWithoutInclusions,shown:this.state.dialogShown,onToggle:this._onToggle,onSave:function(){return this._onToggle(false);}.bind(this),initialActiveKey:this.props.hideFeedTargeting?j.GATING:j.TARGETING,shouldHideLeftFooter:this.props.shouldHideLeftFooter,useTargetingAsFilter:this.props.useTargetingAsFilter,feedTargetingShowReachGK:this.props.feedTargetingShowReachGK,hideFeedTargeting:this.props.hideFeedTargeting,shouldShowRestrictionTabNux:this.props.shouldShowRestrictionTabNux});return {};}});f.exports=m;}),null);
__d('ReactComposerTargetingTaggerComponent.react',['cx','fbt','Grid.react','React','XUICloseButton.react','XUIText.react','emptyFunction','isEmpty'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('Grid.react').GridItem,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;'use strict';for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$ReactComposerTargetingTaggerComponent1=function(){this.props.onSelect({});}.bind(this),p;}n.prototype.render=function(){'use strict';return c('React').createElement(c('Grid.react'),{cols:2,className:"_5esl",role:'presentation'},c('React').createElement(l,{key:'prefix',className:"_5esm",role:'presentation'},i._("Targeting")),c('React').createElement(l,{key:'tagger',className:"_5esw",role:'presentation'},c('React').createElement('div',{className:"_2doa"},c('React').createElement('div',{className:"_2dob"},c('React').createElement(c('XUICloseButton.react'),{className:"_2doc"+(c('isEmpty')(this.props.taggerData)?' '+"hidden_elem":''),size:'small',type:'button',onClick:this.$ReactComposerTargetingTaggerComponent1})),c('React').createElement('div',{className:"_2dod"},c('React').createElement(c('XUIText.react'),null,this.props.targetingSentences)))));};n.propTypes={taggerData:m.object.isRequired,onSelect:m.func.isRequired,targetingSentences:m.object};n.defaultProps={taggerData:{},onSelect:c('emptyFunction')};f.exports=n;}),null);
__d('ReactComposerTargetingTaggerContainer.react',['ReactComposerLoggingName','ReactComposerTaggerActions','ReactComposerTaggerContainerStateMixin','ReactComposerTaggerStore','ReactComposerTaggerType','ReactComposerTargetingTaggerComponent.react','SubscriptionsHandler','React'],(function a(b,c,d,e,f,g){var h=c('React').createClass({displayName:'ReactComposerTargetingTaggerContainer',_subscriptions:undefined,mixins:[c('ReactComposerTaggerContainerStateMixin')()],statics:{taggerID:c('ReactComposerTaggerType').TARGETING},getInitialState:function i(){return {targetingSentences:null};},componentWillMount:function i(){var j=new (c('SubscriptionsHandler'))();j.addSubscriptions(c('ReactComposerTaggerStore').addChangeListener(this._onChange));this._subscriptions=j;},componentWillUnmount:function i(){this._subscriptions&&this._subscriptions.release();},_onChange:function i(){var j=c('ReactComposerTaggerStore').getTaggerData(this.context.composerID,c('ReactComposerTaggerType').TARGETING);this.setState({targetingSentences:j?j.targetingSentences:null});},_onTaggerDataChanged:function i(j){this.__onTaggerDataChanged&&this.__onTaggerDataChanged(j);c('ReactComposerTaggerActions').setTaggerData(this.context.composerID,c('ReactComposerLoggingName').TARGETING_TAGGER,c('ReactComposerTaggerType').TARGETING,j);this.props.onSelect&&this.props.onSelect(j);},render:function i(){if(!this.state.isSelected)return c('React').createElement('noscript',null);return c('React').createElement(c('ReactComposerTargetingTaggerComponent.react'),babelHelpers['extends']({},this.props,this.state,{autoFocus:this.state.autoFocus,taggerSource:this.state.taggerSource,taggerData:this.state.taggerData,onSelect:this._onTaggerDataChanged}));}});f.exports=h;}),null);
__d('ReactPagesComposerBodyWrapper.react',['AdsMessengerLinkUtils','CommerceSelfServeNUXType','ReactComposerAttachmentType','ReactComposerBody.react','ReactComposerBoostedPostLazyButton.react','ReactComposerCallLazyAttachment.react','ReactComposerConfig','ReactComposerContextConfig','ReactComposerContextProviderMixin','ReactComposerCTALazyAttachment.react','ReactComposerGetDirectionsLazyAttachment.react','ReactComposerIssueTaggerButton.react','ReactComposerIssueTaggerContainer.react','ReactComposerLiveVideoLazyAttachment.react','ReactComposerMediaLazyAttachment.react','ReactComposerMessageLazyAttachment.react','ReactComposerPagesBootloader','ReactComposerPagesPrivacyContainer.react','ReactComposerProductTaggerButton.react','ReactComposerProductTaggerContainer.react','ReactComposerQAndALazyAttachment.react','ReactComposerQuestionLazyAttachment.react','ReactComposerStatusLazyAttachment.react','ReactComposerTaggerActions','ReactComposerTaggerType','ReactComposerTargetingTaggerButton.react','ReactComposerTargetingTaggerContainer.react','PagesComposerExtraLazyAttachment.react','React','dotAccess'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactPagesComposerBodyWrapper',mixins:[c('ReactComposerContextProviderMixin')],propTypes:{contextConfig:c('ReactComposerContextConfig').isRequired,config:c('ReactComposerConfig').isRequired,selectedAttachment:h.string},_getAdditionalTaggersForStatusAttachment:function j(){var k=[],l=this.props.config.taggersConfig,m=l[c('ReactComposerTaggerType').TARGETING],n=l[c('ReactComposerTaggerType').SPONSOR],o=l[c('ReactComposerTaggerType').PRODUCT],p=l[c('ReactComposerTaggerType').ISSUE_TAG];if(m&&m.enabled)k.push(this._getTargetTagger());if(n&&n.enabled)c('ReactComposerTaggerActions').handleSetTaggerShowNUX(this.props.contextConfig.composerID,c('ReactComposerTaggerType').SPONSOR,n.showSponsorTaggerButtonNUX);if(o&&o.enabled)k.push(this._getProductTagger());if(p&&p.enabled)k.push(this._getIssueTagger());return k;},_getAdditionalTaggersForMediaAttachment:function j(){return this._getAdditionalTaggersForStatusAttachment();},_getTargetTagger:function j(){var k=this.props.config.taggersConfig[c('ReactComposerTaggerType').TARGETING],l=this.props.config.nuxConfig;return {button:c('React').createElement(c('ReactComposerTargetingTaggerButton.react'),{feedTargetingGK:c('dotAccess')(k,'feedTargetingGK'),feedTargetingShowReachGK:c('dotAccess')(k,'feedTargetingShowReachGK'),shouldShowTargetingTaggerNux:l.shouldShowTargetingTaggerNux,shouldShowRestrictionTabNux:this.props.config.nuxConfig.shouldShowRestrictionTabNux,useTargetingAsFilter:!c('dotAccess')(k,'feedTargetingGK'),key:'targeting_button'}),container:c('React').createElement(c('ReactComposerTargetingTaggerContainer.react'),{key:'targeting_container'})};},_getProductTagger:function j(){var k=this.props.config.taggersConfig[c('ReactComposerTaggerType').PRODUCT];c('ReactComposerTaggerActions').handleSetTaggerShowNUX(this.props.contextConfig.composerID,c('ReactComposerTaggerType').PRODUCT,k.showProductTaggerButtonNUX);var l=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').MEDIA];return {button:c('React').createElement(c('ReactComposerProductTaggerButton.react'),{key:'product_button',nuxTipID:k.productTaggerButtonNUXTipID,nuxType:c('CommerceSelfServeNUXType').COMPOSER_PRODUCT_TAGGER_BUTTON,productTaggerType:l.productTaggerType}),container:c('React').createElement(c('ReactComposerProductTaggerContainer.react'),{key:'product_container',pageID:this.props.config.targetData.targetID,productTaggerType:l.productTaggerType,reactComposerID:this.props.contextConfig.composerID,showAddProduct:k.showAddProduct,viewer:this.props.config.actorConfig.viewerAccountID})};},_getIssueTagger:function j(){var k=this.props.config.taggersConfig[c('ReactComposerTaggerType').ISSUE_TAG];c('ReactComposerTaggerActions').handleSetTaggerShowNUX(this.props.contextConfig.composerID,c('ReactComposerTaggerType').ISSUE_TAG,k.showIssueTaggerButtonNUX);return {button:c('React').createElement(c('ReactComposerIssueTaggerButton.react'),{key:'issue_button'}),container:c('React').createElement(c('ReactComposerIssueTaggerContainer.react'),{key:'issue_container',pageIDs:[this.props.config.targetData.targetID],productTaggerType:c('ReactComposerTaggerType').ISSUE_TAG,reactComposerID:this.props.contextConfig.composerID,showAddIssue:k.enabled,viewer:this.props.config.actorConfig.viewerAccountID})};},_getAdditionalFooterActionsForStatusAttachment:function j(){var k=[];if(this.props.config.boostedPostButtonConfig)k.push(c('React').createElement(c('ReactComposerBoostedPostLazyButton.react'),babelHelpers['extends']({},this.props.config.boostedPostButtonConfig,{key:'boosted_post_button',reactComposerID:this.props.contextConfig.composerID})));var l=false,m='';if(this.props.config.taggersConfig&&this.props.config.taggersConfig[c('ReactComposerTaggerType').TARGETING]&&this.props.config.taggersConfig[c('ReactComposerTaggerType').TARGETING].enabled&&!c('dotAccess')(this.props.config,'feedTargetingGK')){l=true;m=this.props.config.taggersConfig[c('ReactComposerTaggerType').TARGETING].lockToPrivacy;}var n=this.props.config.defaultDemographicsConfig?this.props.config.defaultDemographicsConfig.defaultDemographicsList:[];if(l||n.length>0){var o=this.props.config.nuxConfig.shouldShowDistrictTargetingNux;k.push(c('React').createElement(c('ReactComposerPagesPrivacyContainer.react'),{key:'privacy_selector',lockToPrivacy:m,useTargetingAsFilter:true,targetingEnabled:l,defaultDemographicsList:n,shouldShowDistrictTargetingNux:o}));}return k;},_getAdditionalFooterActionsForLiveVideoAttachment:function j(){return [];},_getAdditionalFooterActionsForMediaAttachment:function j(){return this._getAdditionalFooterActionsForStatusAttachment();},render:function j(){var k=this.props.config.attachmentsConfig,l=k[c('ReactComposerAttachmentType').STATUS],m=k[c('ReactComposerAttachmentType').LIVE_VIDEO],n=m&&m.composerDialog;return c('React').createElement(c('ReactComposerBody.react'),null,c('React').createElement(c('ReactComposerStatusLazyAttachment.react'),{config:this.props.config,selected:!this.props.selectedAttachment||this.props.selectedAttachment===c('ReactComposerAttachmentType').STATUS,placeholder:l.placeholder,additionalTaggers:this._getAdditionalTaggersForStatusAttachment(),additionalFooterActions:this._getAdditionalFooterActionsForStatusAttachment(),bootloader:c('ReactComposerPagesBootloader')}),c('React').createElement(c('ReactComposerMediaLazyAttachment.react'),{selected:this.props.selectedAttachment===c('ReactComposerAttachmentType').MEDIA,additionalTaggers:this._getAdditionalTaggersForMediaAttachment(),additionalFooterActions:this._getAdditionalFooterActionsForMediaAttachment(),bootloader:c('ReactComposerPagesBootloader'),config:this.props.config,hasMessagingLink:c('AdsMessengerLinkUtils').hasMessagingRelatedLinkInText}),m&&m.enabled?c('React').createElement(c('ReactComposerLiveVideoLazyAttachment.react'),{additionalFooterActions:this._getAdditionalFooterActionsForLiveVideoAttachment(),selected:this.props.selectedAttachment===c('ReactComposerAttachmentType').LIVE_VIDEO,bootloader:c('ReactComposerPagesBootloader'),config:this.props.config,useDialogComposer:n}):null,c('React').createElement(c('PagesComposerExtraLazyAttachment.react'),{selected:this.props.selectedAttachment===c('ReactComposerAttachmentType').PAGES_EXTRA,bootloader:c('ReactComposerPagesBootloader'),config:this.props.config}),c('React').createElement(c('ReactComposerQuestionLazyAttachment.react'),{selected:this.props.selectedAttachment===c('ReactComposerAttachmentType').QUESTION,config:this.props.config,key:c('ReactComposerAttachmentType').QUESTION,bootloader:c('ReactComposerPagesBootloader')}),c('React').createElement(c('ReactComposerQAndALazyAttachment.react'),{selected:this.props.selectedAttachment===c('ReactComposerAttachmentType').QANDA,config:this.props.config,key:c('ReactComposerAttachmentType').QANDA,bootloader:c('ReactComposerPagesBootloader')}),c('React').createElement(c('ReactComposerCTALazyAttachment.react'),{selected:this.props.selectedAttachment===c('ReactComposerAttachmentType').CTA,config:this.props.config,key:c('ReactComposerAttachmentType').CTA,bootloader:c('ReactComposerPagesBootloader'),additionalFooterActions:this._getAdditionalFooterActionsForStatusAttachment()}),c('React').createElement(c('ReactComposerMessageLazyAttachment.react'),{selected:this.props.selectedAttachment===c('ReactComposerAttachmentType').MESSAGE,config:this.props.config,key:c('ReactComposerAttachmentType').MESSAGE,bootloader:c('ReactComposerPagesBootloader'),additionalFooterActions:this._getAdditionalFooterActionsForStatusAttachment()}),c('React').createElement(c('ReactComposerGetDirectionsLazyAttachment.react'),{selected:this.props.selectedAttachment===c('ReactComposerAttachmentType').GET_DIRECTIONS,config:this.props.config,key:c('ReactComposerAttachmentType').GET_DIRECTIONS,bootloader:c('ReactComposerPagesBootloader'),additionalFooterActions:this._getAdditionalFooterActionsForStatusAttachment()}),c('React').createElement(c('ReactComposerCallLazyAttachment.react'),{selected:this.props.selectedAttachment===c('ReactComposerAttachmentType').CALL,config:this.props.config,key:c('ReactComposerAttachmentType').CALL,bootloader:c('ReactComposerPagesBootloader'),additionalFooterActions:this._getAdditionalFooterActionsForStatusAttachment()}));}});f.exports=i;}),null);
__d('PagesPicUIEvents',[],(function a(b,c,d,e,f,g){var h={PHOTO_DESELECTED:'PagesPicUIEvents/photoDeselected',PHOTO_SELECTED:'PagesPicUIEvents/photoSelected',PHOTOS_SELECTED_CONFIRM:'PagesPicUIEvents/photosSelectedConfirm'};f.exports=h;}),null);
__d('PagesPicModalManager',['Arbiter','PagesPicUIEvents','tidyEvent'],(function a(b,c,d,e,f,g){function h(){'use strict';this.setIsOpen(false);}h.prototype.setIsOpen=function(i){'use strict';this.$PagesPicModalManager1=i;return this;};h.prototype.isOpen=function(){'use strict';return this.$PagesPicModalManager1;};h.prototype.informPhotoSelected=function(i){'use strict';c('Arbiter').inform(c('PagesPicUIEvents').PHOTO_SELECTED,i);};h.prototype.informPhotoDeselected=function(i){'use strict';c('Arbiter').inform(c('PagesPicUIEvents').PHOTO_DESELECTED,i);};h.prototype.informPhotosSelectedConfirm=function(i){'use strict';c('Arbiter').inform(c('PagesPicUIEvents').PHOTOS_SELECTED_CONFIRM,i);};h.prototype.subscribePhotoSelected=function(i){'use strict';c('tidyEvent')(c('Arbiter').subscribe(c('PagesPicUIEvents').PHOTO_SELECTED,i));};h.prototype.subscribePhotoDeselected=function(i){'use strict';c('tidyEvent')(c('Arbiter').subscribe(c('PagesPicUIEvents').PHOTO_DESELECTED,i));};h.prototype.subscribePhotosSelectedConfirm=function(i){'use strict';return c('tidyEvent')(c('Arbiter').subscribeOnce(c('PagesPicUIEvents').PHOTOS_SELECTED_CONFIRM,i));};f.exports=new h();}),null);
__d('ReactComposerCanvasActions',['ReactComposerDispatcher','ReactComposerCanvasActionType'],(function a(b,c,d,e,f,g){var h={showCanvasSelector:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerCanvasActionType').SHOW_CANVAS_SELECTOR});},hideCanvasSelector:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerCanvasActionType').HIDE_CANVAS_SELECTOR});}};f.exports=h;}),null);
__d('ReactComposerPhotoCarouselActions',['ReactComposerPhotoCarouselActionType','ReactComposerDispatcher','ReactComposerPhotoStore'],(function a(b,c,d,e,f,g){c('ReactComposerPhotoStore');var h={selectPhotoCarouselEntryPoint:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerPhotoCarouselActionType').SELECT_PHOTO_CAROUSEL});},unselectPhotoCarouselEntryPoint:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerPhotoCarouselActionType').UNSELECT_PHOTO_CAROUSEL});},setPreviewCompleted:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerPhotoCarouselActionType').PREVIEW_COMPLETED});},setPreviewIncompleted:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerPhotoCarouselActionType').PREVIEW_INCOMPLETED});},showPhotoCarouselUrlEditArea:function i(j,k,l){c('ReactComposerDispatcher').dispatch({composerID:j,source:k,targetID:l,type:c('ReactComposerPhotoCarouselActionType').SHOW_CAROUSEL_URL_INPUT_AREA});},hidePhotoCarouselUrlEditArea:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerPhotoCarouselActionType').HIDE_CAROUSEL_URL_INPUT_AREA});},seenNux:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerPhotoCarouselActionType').SEEN_NUX});}};f.exports=h;}),null);
__d("XPagesPicMenuDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/profile\/pages\/picture\/menu_dialog\/",{multiselect:{type:"Bool",defaultValue:false},page_id:{type:"Int",required:true},source:{type:"String",defaultValue:"unknown"},__asyncDialog:{type:"Int"}});}),null);
__d('ReactComposerSlideshowImageUploadsContainer.react',['cx','Link.react','SlideshowMediaUploadContainer.react','Arbiter','AsyncDialog','AsyncRequest','ReactComposerSlideshowActions','PagesPicModalManager','React','XPagesPicMenuDialogController','emptyFunction','tidyEvent'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l='slideshow_pages_composer';i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$ReactComposerSlideshowImageUploadsContainer1=function(event){var s=this.refs.imageFileInput.getFileInput();if(s!==null&&s!==undefined&&this.props.onFilesSelected!==null&&this.props.onFilesSelected!==undefined)this.props.onFilesSelected(event,s);}.bind(this),this.$ReactComposerSlideshowImageUploadsContainer3=function(){c('AsyncDialog').send(new (c('AsyncRequest'))(this.$ReactComposerSlideshowImageUploadsContainer4()),function(s){self.$ReactComposerSlideshowImageUploadsContainer2=s;var t=c('PagesPicModalManager').subscribePhotosSelectedConfirm(function(u,v){c('ReactComposerSlideshowActions').selectImagesConfirm(this.props.composerID,v);s.hide();}.bind(this));s.subscribe('hide',function(event){c('Arbiter').unsubscribe(t);});}.bind(this));}.bind(this),this.$ReactComposerSlideshowImageUploadsContainer4=function(){return c('XPagesPicMenuDialogController').getURIBuilder().setInt('page_id',this.props.pageID).setString('source',l).setBool('multiselect',true).getURI();}.bind(this),o;}m.handleFileInput=function(n){c('tidyEvent')(n.subscribe('change',function(event){if(!n.getValue())return;this.$ReactComposerSlideshowImageUploadsContainer1(event,n);if(self.$ReactComposerSlideshowImageUploadsContainer2)self.$ReactComposerSlideshowImageUploadsContainer2.hide();}.bind(this)));};m.prototype.componentWillMount=function(){m.$ReactComposerSlideshowImageUploadsContainer1=this.props.onFilesSelected;};m.prototype.render=function(){var n=null;switch(this.props.imageUploadButtonType){case 'more_link':n=c('React').createElement(c('Link.react'),{className:"_38i2"});break;case 'add_button':n=c('SlideshowMediaUploadContainer.react').getImageUploadButton();break;}return c('React').createElement('span',{onClick:this.$ReactComposerSlideshowImageUploadsContainer3,role:'presentation'},n);};m.$ReactComposerSlideshowImageUploadsContainer1=c('emptyFunction');m.$ReactComposerSlideshowImageUploadsContainer2=null;m.propTypes={composerID:k.string.isRequired,imageUploadButtonType:k.oneOf(['more_link','add_button']).isRequired,mediaAcceptParam:k.string.isRequired,pageID:k.string.isRequired,onFilesSelected:k.func.isRequired};f.exports=m;}),null);
__d('ReactComposerSlideshowDialogContainer.react',['ReactComposerMediaUploadStore','ReactComposerMediaUploadActions','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerSelectedImagesStore','ReactComposerSlideshowActions','ReactComposerSlideshowAudioStore','ReactComposerSlideshowStore','React','ReactComposerSlideshowImageUploadsContainer.react','SlideshowDialog.react','SlideshowMediaUploadContainer.react'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerSlideshowDialogContainer',mixins:[c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerSelectedImagesStore'),c('ReactComposerSlideshowAudioStore'),c('ReactComposerSlideshowStore'))],propTypes:{dialogShown:h.bool,maxSelectedImages:h.number,mediaAcceptParam:h.string.isRequired,pageID:h.string.isRequired,showSlideshowPhotoEditButton:h.bool,onCloseDialog:h.func,onFilesSelected:h.func.isRequired},statics:{calculateState:function j(k,l){var m=!c('ReactComposerMediaUploadStore').isUploading(k),n=c('ReactComposerSelectedImagesStore').getSelectedImages(k);return {audioFileUploadInfo:c('ReactComposerSlideshowAudioStore').getAudioFileUploadInfo(k),durationWithTransitionInMS:c('ReactComposerSlideshowStore').getDurationInMS(k),format:c('ReactComposerSelectedImagesStore').getFormat(k),imagesAllLoaded:m,imagesCrops:c('ReactComposerSelectedImagesStore').getImagesCrops(k),isPreviewPlaying:c('ReactComposerSlideshowAudioStore').getIsPreviewPlaying(k),recentlyUsedStorylineMoods:c('ReactComposerSlideshowAudioStore').getRecentlyUsedStorylineMoods(k),selectedImages:n,selectedMusicCategory:c('ReactComposerSlideshowAudioStore').getSelectedMusicCategory(k),selectedStorylineMood:c('ReactComposerSlideshowAudioStore').getSelectedStorylineMood(k),selectedTab:c('ReactComposerSlideshowStore').getSelectedTab(k),storylineMoodFiles:c('ReactComposerSlideshowAudioStore').getStorylineMoodFiles(k),transitionInMS:c('ReactComposerSlideshowStore').getTransitionInMS(k),showPreview:n.length>0};}},_onChangeDuration:function j(event){c('ReactComposerSlideshowActions').changeDuration(this.context.composerID,event.value);},_onChangeFormat:function j(event){c('ReactComposerSlideshowActions').changeFormat(this.context.composerID,event.value);},_onChangeTransition:function j(k){c('ReactComposerSlideshowActions').changeTransition(this.context.composerID,k);},_onChangeStorylineMood:function j(k){c('ReactComposerSlideshowActions').changeStorylineMoodFile(this.context.composerID,k);},_onDeleteStorylineMood:function j(k){c('ReactComposerSlideshowActions').deleteStorylineMoodFile(this.context.composerID,k);},_onCreateSlideshow:function j(){var k=this.context.composerID;if(c('ReactComposerSlideshowStore').isEditing(k)){var l=c('ReactComposerSelectedImagesStore').getRemovedUploadIDs(k);l.forEach(function(m){if(c('ReactComposerMediaUploadStore').getMediaUploadExists(k,m)){var n=c('ReactComposerMediaUploadStore').getMediaUpload(k,m);c('ReactComposerMediaUploadActions').removePhotoAndPhotoUpload(k,n);}});}c('ReactComposerSlideshowActions').createSlideshow(this.context.composerID);},_onImageRemove:function j(k){var l=this.context.composerID;c('ReactComposerSlideshowActions').removeImage(l,k);if(!c('ReactComposerSlideshowStore').isEditing(l)&&c('ReactComposerMediaUploadStore').getMediaUploadExists(l,k.key)){var m=c('ReactComposerMediaUploadStore').getMediaUpload(l,k.key);c('ReactComposerMediaUploadActions').removePhotoAndPhotoUpload(l,m);}},_onImageReorder:function j(k,l){c('ReactComposerSlideshowActions').reorderImages(this.context.composerID,k,l);},_onTabSelect:function j(k){c('ReactComposerSlideshowActions').selectTab(this.context.composerID,k);},_getImageUploadContainer:function j(k){return c('React').createElement(c('ReactComposerSlideshowImageUploadsContainer.react'),{composerID:this.context.composerID,imageUploadButtonType:k,mediaAcceptParam:this.props.mediaAcceptParam,pageID:this.props.pageID,pageImages:this.state.pageImages,onFilesSelected:this.props.onFilesSelected});},_onMusicCategorySelect:function j(k){c('ReactComposerSlideshowActions').musicCategorySelect(this.context.composerID,k);},_onPreviewStateChange:function j(k){c('ReactComposerSlideshowActions').previewStateChange(this.context.composerID,k);},_onAudioFileUploadStarted:function j(){c('ReactComposerSlideshowActions').audioFileUploadStarted(this.context.composerID);},_onAudioFileUploadError:function j(){c('ReactComposerSlideshowActions').audioFileUploadError(this.context.composerID);},_onAudioFileUploadSuccess:function j(k){c('ReactComposerSlideshowActions').audioFileUploadSuccess(this.context.composerID,k);},render:function j(){return c('React').createElement(c('SlideshowDialog.react'),{audioFileUploadInfo:this.state.audioFileUploadInfo,dialogShown:this.props.dialogShown,durationWithTransitionInMS:this.state.durationWithTransitionInMS,format:this.state.format,imagesAllLoaded:this.state.imagesAllLoaded,imagesCrops:this.state.imagesCrops,isPreviewPlaying:this.state.isPreviewPlaying,maxSelectedImages:this.props.maxSelectedImages,recentlyUsedStorylineMoods:this.state.recentlyUsedStorylineMoods,selectedImages:this.state.selectedImages,selectedMusicCategory:this.state.selectedMusicCategory,selectedStorylineMood:this.state.selectedStorylineMood,selectedTab:this.state.selectedTab,showPreview:this.state.showPreview,showSlideshowPhotoEditButton:false,showSlideshowImageCroppingEditOption:false,storylineMoodFiles:this.state.storylineMoodFiles,targetID:this.props.pageID,transitionInMS:this.state.transitionInMS,onAudioFileUpload:this._onAudioFileUploadStarted,onAudioFileUploadError:this._onAudioFileUploadError,onAudioFileUploadSuccess:this._onAudioFileUploadSuccess,onChangeDuration:this._onChangeDuration,onChangeFormat:this._onChangeFormat,onChangeTransition:this._onChangeTransition,onChangeStorylineMood:this._onChangeStorylineMood,onCloseDialog:this.props.onCloseDialog,onCreateSlideshow:this._onCreateSlideshow,onDeleteStorylineMood:this._onDeleteStorylineMood,onImageRemove:this._onImageRemove,onImageReorder:this._onImageReorder,onMusicCategorySelect:this._onMusicCategorySelect,onPreviewStateChange:this._onPreviewStateChange,onTabSelect:this._onTabSelect},this._getImageUploadContainer('more_link'),c('React').createElement(c('SlideshowMediaUploadContainer.react'),{hidden:this.state.showPreview||!this.state.imagesAllLoaded,showVideoButton:false},this._getImageUploadContainer('add_button')));}});f.exports=i;}),null);
__d('ReactComposerSlideshowPostButton.react',['ReactComposerSlideshowDialogContainer.react','React','ReactFragment'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.renderLayers=function(){var p=null;if(this.props.dialogShown)p=c('React').createElement(c('ReactComposerSlideshowDialogContainer.react'),babelHelpers['extends']({},this.props,{onCloseDialog:this.props.onCancel}));return c('ReactFragment').create({dialog:p});}.bind(this),l;}j.prototype.render=function(){return c('React').createElement('div',{className:this.props.className,onClick:this.props.onShowDialog,role:'presentation'},this.props.children,this.renderLayers());};f.exports=j;}),null);
__d('ReactComposerSlideshowPostButtonContainer.react',['ReactComposerMediaUploadActions','ReactComposerMediaUploadStore','ReactComposerMediaUploadType','ReactComposerPropsAndStoreBasedStateMixin','React','ReactComposerSlideshowActions','ReactComposerSlideshowLoggingStore','ReactComposerSlideshowPostButton.react','ReactComposerSlideshowStore','SlideshowDataManager','SlideshowEntrypoint','immutable'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerSlideshowPostButtonContainer',mixins:[c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerSlideshowStore'))],propTypes:{className:h.string,maxSelectedImages:h.number.isRequired,mediaAcceptParam:h.string.isRequired,pageID:h.string.isRequired,onFilesSelected:h.func.isRequired},statics:{calculateState:function j(k,l){var m=c('ReactComposerSlideshowStore').shouldShowSlideshowDialog(k);return {dialogShown:m};}},componentDidMount:function j(){var k=this.context.composerID;c('SlideshowDataManager').fetchStorylineMoodFiles(function(l){c('ReactComposerSlideshowActions').setStorylineMoodFiles(k,l);},this.props.pageID);c('ReactComposerSlideshowLoggingStore').activate();},render:function j(){return c('React').createElement(c('ReactComposerSlideshowPostButton.react'),{className:this.props.className,dialogShown:this.state.dialogShown,maxSelectedImages:this.props.maxSelectedImages,mediaAcceptParam:this.props.mediaAcceptParam,pageID:this.props.pageID,onCancel:this._onCancel,onFilesSelected:this.props.onFilesSelected,onShowDialog:this._onShowDialog},this.props.children);},_onShowDialog:function j(){c('ReactComposerSlideshowActions').showSlideshowDialog(this.context.composerID,c('SlideshowEntrypoint').COMPOSER_PHOTO_VIDEO_TAB);},_onCancel:function j(){c('ReactComposerMediaUploadActions').removeAllPhotoUploads(this.context.composerID,c('ReactComposerMediaUploadStore').getUploadsOfType(this.context.composerID,c('ReactComposerMediaUploadType').PHOTO));c('ReactComposerSlideshowActions').closeSlideshowDialog(this.context.composerID);}});f.exports=i;}),null);
__d("XCarouselPageComposerPhotoUploadFirstController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/composer\/photouploadfirst\/",{composer_id:{type:"String"},target_id:{type:"Int"}});}),null);
__d('ReactComposerMediaAttachmentButtonsWithOptions.react',['cx','fbt','ix','ActorURI','AdsCanvasWebdriverIDs','ReactComposerAttachmentStore','ReactComposerCanvasActions','ReactComposerContextMixin','ReactComposerLoggingActions','ReactComposerLoggingName','ReactComposerMediaUtils','ReactComposerPhotoCarouselActions','ComposerTargetData','PagesComposerPostActionsLoggerEvent','PagesComposerActionsLogger','ReactComposerSlideshowPostButtonContainer.react','XCarouselPageComposerPhotoUploadFirstController','AsyncRequest','DOMContainer.react','FileInput.react','Grid.react','Image.react','Link.react','ReactComponentWithPureRenderMixin','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('Grid.react').GridItem,l=c('React').PropTypes,m=c('React').createClass({displayName:'ReactComposerMediaAttachmentButtonsWithOptions',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextMixin')],propTypes:{carouselConfig:l.object,createAlbumLink:l.any,mediaAcceptParam:l.shape({photos:l.string,both:l.string}).isRequired,onFilesSelected:l.func.isRequired,showCanvasEntryPoint:l.bool,showCarouselEntryPoint:l.bool,showPhotoAlbumEntryPoint:l.bool,showSlideshowEntryPoint:l.bool,showUploadPhotosButton:l.bool,slideshowConfig:l.object,targetData:l.instanceOf(c('ComposerTargetData')).isRequired},getDefaultProps:function o(){return {mediaAcceptParam:{}};},componentDidMount:function o(){if(c('ReactComposerAttachmentStore').getSelectedAttachmentID(this.context.composerID))c('PagesComposerActionsLogger').log({event:c('PagesComposerPostActionsLoggerEvent').SHOW_PHOTO_CAROUSEL_CREATE_TAB,target_id:parseInt(this.context.targetID,10)});},render:function o(){var p=[];p.push(this._getUploadPhotosButton());var q=null,r=null;if(this.props.showPhotoAlbumEntryPoint&&this.props.createAlbumLink){var s=c('React').createElement(c('DOMContainer.react'),{className:"_3m1x",'data-testid':'media-attachment-dialog',display:'block'},this.props.createAlbumLink);q=c('React').createElement(k,{className:"_3m1y",key:'createAlbum'},c('React').createElement(c('Link.react'),{className:"_3m1z _5xvh",onClick:this._onClickPhotoAlbumOption},s));}if(this.props.showCarouselEntryPoint)r=this._getCarouselPostButton();p.push(q);p.push(r);if(this.props.showSlideshowEntryPoint)p.push(this._getSlideshowPostButton());if(this.props.showCanvasEntryPoint)p.push(this._getCanvasPostButton());return c('React').createElement('div',{className:"_3m1_"},c('React').createElement(c('Grid.react'),{className:"_3m20",cols:1},p.filter(function(t){return t!=null;})));},_getUploadPhotosButton:function o(){if(!this.props.showUploadPhotosButton)return null;var p=this.props.targetData.targetSupportsMultiplePhotos,q=this.props.mediaAcceptParam.both,r=p?i._("Upload Photos\/Video"):i._("Upload Photo\/Video"),s=i._("Add photos or video to your status.");return c('React').createElement(k,{className:"_3m1y",key:'uploadPhoto'},c('React').createElement(c('FileInput.react'),{accept:q,multiple:p,name:'composer_photo',onChange:this._onFilesSelected,onClick:this._onUploadPhotosClick,ref:'fileInput','data-testid':'media-attachment-add-photo'},c('React').createElement(c('Link.react'),{className:"_3m1z"},this._renderPhotoPostOption(n.PHOTOVIDEO,r,s))));},_onUploadPhotosClick:function o(){c('ReactComposerLoggingActions').mediaUploadInputClicked(this.context.composerID,c('ReactComposerLoggingName').MEDIA_ATTACHMENT_UPLOAD_BUTTON);c('PagesComposerActionsLogger').log({event:c('PagesComposerPostActionsLoggerEvent').CLICK_UPLOAD_PHOTO_OPTION,target_id:parseInt(this.context.targetID,10)});},_onClickPhotoAlbumOption:function o(){c('PagesComposerActionsLogger').log({event:c('PagesComposerPostActionsLoggerEvent').CLICK_PHOTO_ALBUM_OPTION,target_id:parseInt(this.context.targetID,10)});},_onFilesSelected:function o(event){this.props.onFilesSelected(event,this.refs.fileInput.getFileInput());c('ReactComposerMediaUtils').clearInput(this.refs.fileInput.getFileInput());},_getCarouselPostButton:function o(){if(!this.props.showUploadPhotosButton)return null;var p=i._("Create a Photo Carousel");if(this.props.carouselConfig&&this.props.carouselConfig.supportVideoCarousel)p=i._("Create a Photo\/Video Carousel");var q=i._("Build a scrolling photo carousel with a link.");return c('React').createElement(k,{className:"_3m1y",key:'carousel'},c('React').createElement(c('Link.react'),{onClick:this._onCarouselClick,className:"_3m1z _5xvh"},this._renderPhotoPostOption(n.CAROUSEL,p,q)));},_onCarouselClick:function o(){c('ReactComposerPhotoCarouselActions').selectPhotoCarouselEntryPoint(this.context.composerID);if(!this.props.carouselConfig||!this.props.carouselConfig.ComposerPhotoCarouselUploadFirst){c('ReactComposerPhotoCarouselActions').showPhotoCarouselUrlEditArea(this.context.composerID);}else{var p=c('XCarouselPageComposerPhotoUploadFirstController').getURIBuilder().setString('composer_id',this.context.composerID).setInt('target_id',parseInt(this.context.targetID,10)).getURI();p=c('ActorURI').create(p,this.context.targetID);var q=new (c('AsyncRequest'))().setURI(p);q.send();c('ReactComposerPhotoCarouselActions').setPreviewIncompleted(this.context.composerID);}var r={event:c('PagesComposerPostActionsLoggerEvent').CLICK_PHOTO_CAROUSEL_CREATE_TAB,target_id:parseInt(this.context.targetID,10)};c('PagesComposerActionsLogger').log(r);},_getSlideshowPostButton:function o(){var p=this.props.slideshowConfig;if(!p)return null;var q=i._("Create Slideshow"),r=i._({"*":{"*":"Add {Minimum number of images} to {Maximum number of images} photos to create a video."}},[i.param('Minimum number of images',p?p.minPhotoNum:3,[0]),i.param('Maximum number of images',p?p.maxPhotoNum:7,[0])]),s=c('React').createElement(c('Link.react'),{className:"_3m1z _5xvh"},this._renderPhotoPostOption(n.SLIDESHOW,q,r));return c('React').createElement(k,{className:"_3m1y",key:'slideshow'},c('React').createElement(c('ReactComposerSlideshowPostButtonContainer.react'),{className:"_3-8-",maxSelectedImages:p.maxPhotoNum,mediaAcceptParam:this.props.mediaAcceptParam.photos,pageID:p.pageID,onFilesSelected:this._onSlideshowFilesUpload},s));},_onSlideshowFilesUpload:function o(event,p){this.props.onFilesSelected(event,p);c('ReactComposerMediaUtils').clearInput(p);},_getCanvasPostButton:function o(){var p=i._("Create a Canvas"),q=i._("Now you can tell a more immersive story by combining images and videos.");return c('React').createElement(k,{className:"_3m1y",key:'canvas'},c('React').createElement(c('Link.react'),{'data-testid':c('AdsCanvasWebdriverIDs').PAGE_COMPOSER_SHARE_CANVAS_LINK,onClick:this._onCanvasClick,className:"_3m1z _5xvh"},this._renderPhotoPostOption(n.CANVAS,p,q)));},_onCanvasClick:function o(){c('ReactComposerCanvasActions').showCanvasSelector(this.context.composerID);var p={event:c('PagesComposerPostActionsLoggerEvent').CLICK_CANVAS_CREATE_TAB,target_id:parseInt(this.context.targetID,10)};c('PagesComposerActionsLogger').log(p);},_renderPhotoPostOption:function o(p,q,r){var s=null;if(p===n.CAROUSEL&&this.props.carouselConfig&&this.props.carouselConfig.showCarouselOptionSuperscript){var t=i._("NEW");s=c('React').createElement('sup',{className:"_9td"},t);}return c('React').createElement(c('Grid.react'),{className:"_3m1-",cols:2},c('React').createElement(k,{className:"_5xvi"},c('React').createElement(c('Image.react'),{className:"_5xvj",src:this._getIconSource(p)})),c('React').createElement(k,{className:"_5xvk"},c('React').createElement('div',{className:"_5xvl"},q,s),c('React').createElement('div',{className:"_5xvm"},r)));},_getIconSource:function o(p){switch(p){case n.PHOTOVIDEO:return j("28660");case n.PHOTOALBUM:return j("28659");case n.CAROUSEL:return j("28656");case n.SLIDESHOW:return j("28661");case n.CANVAS:return j("28658");default:return null;}}}),n={PHOTOVIDEO:'photo_video',PHOTOALBUM:'photo_album',CAROUSEL:'carousel',SLIDESHOW:'slideshow',CANVAS:'canvas'};f.exports=m;}),null);
__d('ReactComposerCanvasTypeaheadContainer.react',['cx','fbt','AdsCanvasCapabilities','AdsCanvasCapabilityConfig','AdsCanvasComposerDialogStore','AdsCanvasEditorFunnelLogging','AdsCanvasSearchSource','AdsCanvasTypeahead.react','CanvasCreationEvent','CanvasCreationWaterfallTypedLogger','CanvasSource','ReactComposerCanvasActions','ReactComposerContextMixin','ReactComposerLoggingName','ReactComposerScrapedAttachmentActions','React','RichMediaEditorActions','RichMediaLoggingStoreUtils','SearchableEntry','StoreAndPropBasedStateMixin','XUICloseButton.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=c('React').createClass({displayName:'ReactComposerCanvasTypeaheadContainer',mixins:[c('ReactComposerContextMixin'),c('StoreAndPropBasedStateMixin')(c('AdsCanvasComposerDialogStore'))],propTypes:{config:j.shape({accessToken:j.string.isRequired,businessID:j.string,canAddStoreLocator:j.bool.isRequired,canAddProductSet:j.bool.isRequired,canUseCanvasEditorTemplateV0:j.bool.isRequired,canUseCanvasEditorTemplateV1:j.bool.isRequired,canUseLinkedCanvas:j.bool.isRequired,pageGKsToLog:j.array.isRequired}).isRequired},statics:{calculateState:function l(m){return {selectedCanvas:c('AdsCanvasComposerDialogStore').getSelectedCanvas(),unpublishedCanvas:c('AdsCanvasComposerDialogStore').getUnpublishedCanvas()};}},render:function l(){var m,n=new (c('AdsCanvasSearchSource'))({pageID:this.context.targetID,accessToken:this.props.config.accessToken,searchFilters:{onlyPublished:true}});n.bootstrap();var o=this.state.unpublishedCanvas||this.state.selectedCanvas,p=o?o.id:null,q=this.state.selectedCanvas?new (c('SearchableEntry'))({subtile:'',title:this.state.selectedCanvas.name,uniqueID:0}):null,r=i._("Select a Canvas"),s=i._("Close"),t=new (c('AdsCanvasCapabilityConfig'))((m={},m[c('AdsCanvasCapabilities').CAN_ADD_PRODUCT_SET]=this.props.config.canAddProductSet,m[c('AdsCanvasCapabilities').CAN_ADD_STORE_LOCATOR]=this.props.config.canAddStoreLocator,m[c('AdsCanvasCapabilities').CAN_SAVE_INCOMPLETE_ELEMENTS]=this.props.config.canvasCanSaveIncompleteElements,m[c('AdsCanvasCapabilities').CAN_USE_CANVAS_EDITOR_TEMPLATEV0]=this.props.config.canUseCanvasEditorTemplateV0,m[c('AdsCanvasCapabilities').CAN_USE_CANVAS_EDITOR_TEMPLATEV1]=this.props.config.canUseCanvasEditorTemplateV1,m[c('AdsCanvasCapabilities').CAN_USE_LINKED_CANVAS]=this.props.config.canUseLinkedCanvas,m[c('AdsCanvasCapabilities').CAN_USE_WEBISTE_PARSING]=this.props.config.canvasCanUseWebsiteParsing,m)),u={accessToken:this.props.config.accessToken,businessID:this.props.config.businessID,canvasCapabilityConfig:t,disabled:false,error:null,extraGKsToLog:this.props.config.pageGKsToLog,focusedOnInit:false,mustPublish:true,pageID:this.context.targetID,placeholder:r,searchSource:n,onCloseReset:this._onCloseReset,onDuplicateReload:this._onDuplicateReload,onEntrySelect:this._onEntrySelect,onSaveCanvasSuccess:this._onSaveCanvasSuccess};return c('React').createElement('div',{className:"_3uyo"},c('React').createElement(c('XUICloseButton.react'),{className:"_3uyp",label:s,onClick:this._onClickCloseButton,size:'medium'}),c('React').createElement(c('AdsCanvasTypeahead.react'),babelHelpers['extends']({canvasID:p,selectedEntry:q,source:c('CanvasSource').PAGE_COMPOSER},u)));},_onClickCloseButton:function l(){c('ReactComposerCanvasActions').hideCanvasSelector(this.context.composerID);},_onCloseReset:function l(){c('RichMediaEditorActions').resetUnpublishedCanvas();},_onDuplicateReload:function l(m,n){c('RichMediaEditorActions').setDialogShown(m,false);c('RichMediaEditorActions').setDialogCanvas(n.id,n);c('RichMediaEditorActions').setDialogShown(n.id,true);c('RichMediaEditorActions').setUnpublishedCanvas(n);},_onEntrySelect:function l(m,n){var o=m.getUniqueID(),p=m.getAuxiliaryData();c('RichMediaEditorActions').setDialogCanvas(o,p);c('RichMediaEditorActions').setSelectedCanvas(p);this._scrapeURL(p.canvas_link);},_onSaveCanvasSuccess:function l(m,n,o,p,q){if(p){c('RichMediaEditorActions').resetUnpublishedCanvas();c('AdsCanvasEditorFunnelLogging').endFunnel();c('RichMediaLoggingStoreUtils').logRichMediaCreationEventWithLogger(new (c('CanvasCreationWaterfallTypedLogger'))().setEventName(c('CanvasCreationEvent').EDITOR_EXIT));c('RichMediaEditorActions').setDialogShown(o.id,false);c('RichMediaEditorActions').setSelectedCanvas(o);if(o.canvas_link)this._scrapeURL(o.canvas_link);}else{c('RichMediaEditorActions').setDialogCanvas(o.id,o);c('RichMediaEditorActions').setUnpublishedCanvas(o);}},_scrapeURL:function l(m){c('ReactComposerScrapedAttachmentActions').scrapeAttachment(this.context.composerID,this.context.targetID,m,this.context.composerType,this.context.actorID,c('ReactComposerLoggingName').CANVAS_EDITOR);}});f.exports=k;}),null);
__d("XCarouselPageComposerSeenNuxController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/composer\/carouselseennux\/",{type:{type:"String"}});}),null);
__d('ReactComposerPhotoCarouselUrlInput.react',['cx','fbt','ix','AsyncRequest','ReactComposerContextMixin','ReactComposerPhotoCarouselActions','ReactComposerPhotoCarouselStore','CSS','Keys','Locale','PagesComposerPostActionsLoggerEvent','PagesComposerActionsLogger','PagesComposerCarouselPostNuxType','ReactComponentWithPureRenderMixin','React','Image.react','ReactDOM','URLMatcher','URLScraper','XCarouselPageComposerSeenNuxController','XUIAmbientNUX.react','XUICloseButton.react','XUITextInput.react','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('React').PropTypes,l=c('React').createClass({displayName:'ReactComposerPhotoCarouselUrlInput',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextMixin')],propTypes:{onChange:k.func.isRequired,onClickRemoveButton:k.func.isRequired,prefillURL:k.string,showUrlInputAreaNux:k.bool},getInitialState:function m(){return {disableArrow:true,showUrlInputAreaNux:this.props.showUrlInputAreaNux&&!c('ReactComposerPhotoCarouselStore').seenNux(this.context.composerID)};},componentDidMount:function m(){var n=c('ReactDOM').findDOMNode(this.refs.inputArea);n.focus();c('CSS').addClass(n,"_47_s");var o=this.props.prefillURL?this.props.prefillURL:'',p=!this._checkValidUrl(o);this.setState({disableArrow:p});c('PagesComposerActionsLogger').log({event:c('PagesComposerPostActionsLoggerEvent').PREFILL_SCRAPE_URL,target_id:parseInt(this.context.targetID,10),prefill_scrape_url:this.props.prefillURL});},renderLayers:function m(){var n=i._("Photos are taken from a website you choose. Enter a website to build your photo carousel.");return c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:function(){return this.refs.inputArea;}.bind(this),shown:this.state.showUrlInputAreaNux,onCloseButtonClick:this._onCloseButtonClick,position:'below',key:'notice'},n);},_onCloseButtonClick:function m(){var n=c('XCarouselPageComposerSeenNuxController').getURIBuilder().setString('type',c('PagesComposerCarouselPostNuxType').MEDIA_ATTACHEMENT_URL_INPUT_AREA_NUX).getURI(),o=new (c('AsyncRequest'))().setURI(n);o.send();this.setState({showUrlInputAreaNux:false});c('ReactComposerPhotoCarouselActions').seenNux(this.context.composerID);},render:function m(){var n=i._("Photo Carousel"),o=i._("Remove"),p=i._("Destination URL"),q=null,r=null,s=null,t=c('Locale').isRTL();if(t){r=j("143154");s=j("28654");}else{r=j("143171");s=j("28655");}if(this.state.disableArrow){q=c('React').createElement(c('Image.react'),{className:"_3ev6",size:'small',src:r,onClick:this._handleScrapeLink});}else q=c('React').createElement(c('Image.react'),{className:"_3ev7",size:'small',src:s,onClick:this._handleScrapeLink});var u=i._("Enter a URL");return c('React').createElement('div',{className:"_d67"},c('React').createElement('div',{className:"_d68"},c('React').createElement('div',{className:"_d69"},n),c('React').createElement(c('XUICloseButton.react'),{className:"_d6a",label:o,onClick:this.props.onClickRemoveButton,size:'medium'})),c('React').createElement('div',{className:"_d6b"},c('React').createElement('div',{className:"_px7"},c('React').createElement('span',{className:"_2do6"},p),c('React').createElement('div',{className:"_px8"},c('React').createElement(c('XUITextInput.react'),{className:"_d6c",defaultValue:this.props.prefillURL,onBlur:this._onBlur,onChange:this._onChange,onKeyUp:this._handleKeyUp,placeholder:u,ref:'inputArea'}))),q),this.renderLayers());},_handleScrapeLink:function m(event){var n=c('ReactDOM').findDOMNode(this.refs.inputArea),o=n.childNodes[0].value+'\n';this.setState({inputValue:o});this.props.onChange&&this.props.onChange(o);},_onBlur:function m(event){c('CSS').removeClass(c('ReactDOM').findDOMNode(this.refs.inputArea),"_47_s");},_onChange:function m(event){this.setState({inputValue:event.target.value});this.props.onChange&&this.props.onChange(event.target.value);var n=!this._checkValidUrl(event.target.value);this.setState({disableArrow:n});c('CSS').removeClass(c('ReactDOM').findDOMNode(this.refs.inputArea),"_47_s");},_handleKeyUp:function m(event){if(event.keyCode===c('Keys').RETURN){var n=event.target.value+'\n';this.setState({inputValue:n});this.props.onChange&&this.props.onChange(n);}},_checkValidUrl:function m(n){return c('URLScraper').match(n)||c('URLMatcher').permissiveMatch(n);}});f.exports=l;}),null);
__d('ReactComposerPhotoCarouselUrlInputContainer.react',['ReactComposerContextMixin','ReactComposerLoggingName','ReactComposerPhotoCarouselActions','ReactComposerPhotoCarouselUrlInput.react','ReactComposerStatusUtils','PagesComposerPostActionsLoggerEvent','PagesComposerActionsLogger','ReactComponentWithPureRenderMixin','React','URLScraper'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerPhotoCarouselUrlInputContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextMixin')],propTypes:{prefillURL:h.string,showUrlInputAreaNux:h.bool},render:function j(){return c('React').createElement(c('ReactComposerPhotoCarouselUrlInput.react'),{onChange:this._onMentionsInputChange,onClickRemoveButton:this._onClickRemoveButton,prefillURL:this.props.prefillURL,showUrlInputAreaNux:this.props.showUrlInputAreaNux});},_onClickRemoveButton:function j(){c('ReactComposerPhotoCarouselActions').hidePhotoCarouselUrlEditArea(this.context.composerID);c('PagesComposerActionsLogger').log({event:c('PagesComposerPostActionsLoggerEvent').REMOVE_PHOTO_CAROUSEL_URL_INPUT,target_id:parseInt(this.context.targetID,10)});},_onMentionsInputChange:function j(k){if(!c('URLScraper').trigger(k))c('ReactComposerStatusUtils').scrapeLink(this.context.composerID,this.context.targetID,k,this.context.composerType,this.context.actorID,c('ReactComposerLoggingName').INLINE_COMPOSER);}});f.exports=i;}),null);
__d('ReactComposerPhotoCarouselUtils',['fbt','ReactComposerPhotoCarouselStore','React'],(function a(b,c,d,e,f,g,h){var i={getPhotoCarouselMediaContent:function j(k,l){var m=null;if(!k)return m;if(k.ComposerPhotoCarouselPlaceHolder){var n=k.ComposerPhotoCarouselPlaceHolder;m=c('React').createElement(n,null);}else{var o=k.ComposerPhotoCarouselUrlInputContainer;m=c('React').createElement(o,{showUrlInputAreaNux:l.showUrlInputAreaNux,prefillURL:k.preFillURL});}return m;},getInputPlaceHolder:function j(k,l){var m=h._("Write something...");if(l||!k||!k.ComposerPhotoCarouselPlaceHolder)return m;return h._("Enter a URL");},isPagePostButtonDisabled:function j(k){if(!c('ReactComposerPhotoCarouselStore').isPhotoCarouselSelected(k))return false;if(c('ReactComposerPhotoCarouselStore').shouldShowURLEditArea(k))return true;if(!c('ReactComposerPhotoCarouselStore').isCarouselPreviewCompleted(k))return true;return false;}};f.exports=i;}),null);
__d('ReactComposerSlideshowThumbnailViewContainer.react',['cx','ReactComposerMediaUploadActions','ReactComposerMediaUploadStore','ReactComposerMediaUploadType','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerSelectedImagesStore','ReactComposerSlideshowActions','ReactComposerSlideshowAudioStore','ReactComposerSlideshowDialogContainer.react','ReactComposerSlideshowStore','React','ReactComponentWithPureRenderMixin','ReactFragment','SlideshowPreview.react','SlideshowPreviewConstants','SlideshowImageUtil'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=c('React').createClass({displayName:'ReactComposerSlideshowThumbnailViewContainer',mixins:[c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerSlideshowAudioStore'),c('ReactComposerSlideshowStore'),c('ReactComposerSelectedImagesStore')),c('ReactComponentWithPureRenderMixin')],propTypes:{maxSelectedImages:i.number.isRequired,mediaAcceptParam:i.string.isRequired,pageID:i.string.isRequired,onFilesSelected:i.func.isRequired},statics:{calculateState:function k(l,m){return {dialogShown:c('ReactComposerSlideshowStore').shouldShowSlideshowDialog(l),durationWithTransitionInMS:c('ReactComposerSlideshowStore').getDurationInMS(l),imagesAllLoaded:!c('ReactComposerMediaUploadStore').isUploading(l),imagesCrops:c('ReactComposerSelectedImagesStore').getImagesCrops(l),isPreviewPlaying:c('ReactComposerSlideshowAudioStore').getIsPreviewPlaying(l),selectedImages:c('ReactComposerSelectedImagesStore').getSelectedImages(l),selectedStorylineMood:c('ReactComposerSlideshowAudioStore').getSelectedStorylineMood(l),transitionInMS:c('ReactComposerSlideshowStore').getTransitionInMS(l)};}},_renderPreview:function k(){var l=c('SlideshowPreviewConstants').WWW_PREVIEW_CONTAINER_SIZE_COMPOSER,m=c('SlideshowPreviewConstants').WWW_PLAYER_SIZE_COMPOSER,n=c('SlideshowImageUtil').getPreviewBoxDimensions(this.state.imagesCrops,m),o={marginBottom:(n.height-l)/2,marginLeft:c('SlideshowPreviewConstants').WWW_COMPOSER_LEFT_MARGIN,marginTop:(n.height-l)/2};return c('React').createElement('div',{className:"_3-95",style:{overflow:'hidden'}},c('React').createElement(c('SlideshowPreview.react'),{durationWithTransitionInMS:this.state.durationWithTransitionInMS,hidden:false,imagesAllLoaded:this.state.imagesAllLoaded,imagesCrops:this.state.imagesCrops,isPreviewPlaying:this.state.isPreviewPlaying,maxSelectedImages:this.props.maxSelectedImages,previewBoxContainerSize:l,previewBoxSize:m,showSlideshowImageCroppingEditOption:false,selectedImages:this.state.selectedImages,storylineMoodIDSource:this.state.selectedStorylineMood?this.state.selectedStorylineMood.source:null,style:o,transitionInMS:this.state.transitionInMS,onClose:this._onXout,onEdit:this._onShowDialog,onPreviewStateChange:this._onPreviewStateChange}));},render:function k(){return c('React').createElement('div',null,this._renderPreview(),this.renderLayers());},renderLayers:function k(){var l=null;if(this.state.dialogShown)l=c('React').createElement(c('ReactComposerSlideshowDialogContainer.react'),{dialogShown:this.state.dialogShown,maxSelectedImages:this.props.maxSelectedImages,mediaAcceptParam:this.props.mediaAcceptParam,pageID:this.props.pageID,onCloseDialog:this._onCloseDialog,onFilesSelected:this.props.onFilesSelected});return c('ReactFragment').create({dialog:l});},_onShowDialog:function k(){c('ReactComposerSlideshowActions').showEditSlideshowDialog(this.context.composerID);},_onPreviewStateChange:function k(l){c('ReactComposerSlideshowActions').previewStateChange(this.context.composerID,l);},_onXout:function k(){var l=c('ReactComposerSelectedImagesStore').getNumberOfImages(this.context.composerID);c('ReactComposerMediaUploadActions').removeAllPhotoUploads(this.context.composerID,c('ReactComposerMediaUploadStore').getUploadsOfType(this.context.composerID,c('ReactComposerMediaUploadType').PHOTO));c('ReactComposerSlideshowActions').hideSlideshowEditField(this.context.composerID,l);},_onCloseDialog:function k(){var l=c('ReactComposerSelectedImagesStore').getAddedUploadIDs(this.context.composerID);l.forEach(function(m){var n=c('ReactComposerMediaUploadStore').getMediaUpload(this.context.composerID,m);c('ReactComposerMediaUploadActions').removePhotoAndPhotoUpload(this.context.composerID,n);}.bind(this));c('ReactComposerSlideshowActions').closeEditSlideshowDialog(this.context.composerID);}});f.exports=j;}),null);